/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

const LINKED_TO = " => ";
const LINKED_FROM = " <= ";
const LINKED_CN = "None";
const LINKED_BOTH = " <=> ";
const MOC_VIEW_TYPE = "map-of-content";

class FileItem {
    constructor(path, extension, links_to, linked_from, distance_from_CN) {
        this.path = path;
        this.extension = extension;
        this.links_to = links_to;
        this.linked_from = linked_from;
        this.distance_from_CN = distance_from_CN;
    }
}

const Log = (message) => {
};
const RemoveExtension = (path, extension = ".md") => {
    if (path.endsWith(extension)) {
        return path.slice(0, -extension.length);
    }
    return path;
};
/**@returns True if CTRL / Meta is pressed */
const IsCtrlPressed = (e) => {
    return window.navigator.userAgent.includes("Macintosh") ? e.metaKey : e.ctrlKey;
};
/**  Returns only the name of the actual file  */
const FileNameFromPath = (path) => {
    return path.split("/").last();
};
/**  return the full path if there are two or more notes with the same filename and extension, else only the filename  */
const GetDisplayName = (path, db) => {
    let file_name = FileNameFromPath(path);
    let display_name = null;
    if (db.duplicate_file_status.get(file_name)) {
        display_name = RemoveExtension(path);
    }
    else {
        display_name = RemoveExtension(file_name);
    }
    return display_name;
};
const NavigateToFile = async (app, path, event) => {
    let file = app.metadataCache.getFirstLinkpathDest(path, "/");
    if (!file)
        return;
    IsCtrlPressed(event)
        ? app.workspace.splitActiveLeaf()
        : app.workspace.getUnpinnedLeaf();
    app.workspace.openLinkText(path, "/");
};
/** Get the paths of all folders in the vault, empty or not */
const GetAllFolders = (app) => {
    let vault_files = app.vault.getFiles();
    let all_folder_paths = [];
    vault_files.forEach((file) => {
        // cut of filename
        let folder_path = file.path.slice(0, file.path.length - (file.basename.length + file.extension.length + 1));
        // add path to collected paths
        if (folder_path.length && !all_folder_paths.contains(folder_path)) {
            all_folder_paths.push(folder_path);
        }
    });
    // store all parent folder paths as unique paths if they aren't yet because they don't include any notes directly
    all_folder_paths.forEach((path) => {
        let all_sub_paths = path.split("/");
        for (let i = 1; i < all_sub_paths.length - 1; i++) {
            let partial_path = all_sub_paths.slice(0, i).join("/") + "/";
            if (!all_folder_paths.contains(partial_path)) {
                all_folder_paths.push(partial_path);
            }
        }
    });
    return all_folder_paths;
};

class DBManager {
    constructor(plugin) {
        this.database_updating = true;
        this.app = plugin.app;
        this.plugin = plugin;
        this.settings = plugin.settings;
        this.all_paths = [];
        this.db = {};
        this.db_entries = Object.entries(this.db);
    }
    init() {
    }
    async update(silent = false) {
        this.database_complete = false;
        this.database_updating = true;
        try {
            if (this.plugin.CNexists()) {
                let start_tmsp = Date.now();
                if (!silent) {
                    new obsidian.Notice('Updating the Map of Content...');
                }
                Log("Updating the Map of Content...");
                await new Promise(r => setTimeout(r, 0));
                this.updateDB();
                await new Promise(r => setTimeout(r, 0));
                this.get_paths_ran = 0;
                this.updateDepthInformation();
                this.all_paths.length = 0;
                let path_so_far = { all_members: [this.settings.get("CN_path")], items: [[this.settings.get("CN_path"), LINKED_CN]] };
                await new Promise(r => setTimeout(r, 0));
                this.followPaths(path_so_far);
                await new Promise(r => setTimeout(r, 0));
                this.updateDescendants();
                if (!silent) {
                    new obsidian.Notice("Update complete");
                }
                let end_tmsp = Date.now();
                Log("Update complete, Took " + String((end_tmsp - start_tmsp) / 1000));
                this.database_complete = true;
            }
        }
        finally {
            this.database_updating = false;
            this.plugin.rerender();
        }
    }
    getNoteFromPath(path) {
        if (path in this.db) {
            return this.db[path];
        }
    }
    /** return all paths that include a certain note. Only return the path up to that note*/
    findPaths(path) {
        let filtered_paths = [];
        let filtered_paths_json = JSON.stringify(filtered_paths);
        this.all_paths.forEach((p) => {
            if (p.all_members.includes(path)) {
                if (p.all_members.last() == path) {
                    filtered_paths.push(p);
                }
                else {
                    let index = p.all_members.indexOf(path) + 1;
                    let chopped_of_path = p.items.slice(0, index);
                    if (!filtered_paths_json.includes(JSON.stringify(chopped_of_path))) {
                        // return a path element containing only the parts of the path information up to the note in question
                        filtered_paths.push({ all_members: p.all_members.slice(0, index), items: p.items.slice(0, index) });
                        filtered_paths_json = JSON.stringify(filtered_paths);
                    }
                }
            }
        });
        return filtered_paths;
    }
    all_notes() {
        return this.db_entries.map(([key, value]) => value);
    }
    updateDB() {
        // delete old state 
        for (let note in this.db) {
            delete this.db[note];
        }
        // read all files
        let vault_files = this.app.vault.getFiles();
        Log("Total number of files in vault: " + String(vault_files.length));
        vault_files.forEach((file) => {
            if (!this.settings.isExludedFile(file)) {
                this.db[file.path] = new FileItem(file.path, file.extension, [], [], null);
            }
        });
        this.db_entries = Object.entries(this.db);
        this.db_keys = Object.keys(this.db);
        this.duplicate_file_status = new Map();
        this.all_notes().forEach((note) => {
            let file_name = FileNameFromPath(note.path);
            if (this.duplicate_file_status.has(file_name)) { // If the file name is encountered twice or more, set it's duplicate status to true
                this.duplicate_file_status.set(file_name, true);
            }
            else {
                this.duplicate_file_status.set(file_name, false);
            }
        });
        // update the db_entries representation of the db
        this.db_entries = Object.entries(this.db);
        this.all_notes().forEach((note) => {
            if (note.extension != "md") {
                // skip if it's not an md file. Other file types can't link to anything
                return;
            }
            //  save all the links this note links to
            let this_links_to = [];
            let linkcache = this.app.metadataCache.getCache(note.path).links;
            if (linkcache) {
                linkcache.forEach((val) => {
                    // check if the link is valid 
                    let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                    //TODO is it neccessary to avoid including links multiple times? maybe they can't even be duplicate in the linkcache
                    if (link_dest && !this_links_to.includes(link_dest.path) && this.db_keys.contains(link_dest.path)) {
                        this_links_to.push(link_dest.path);
                    }
                });
            }
            let transclusions = this.app.metadataCache.getCache(note.path).embeds;
            if (transclusions) {
                transclusions.forEach((val) => {
                    // check if the link is valid 
                    let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                    if (link_dest && !this_links_to.includes(link_dest.path) && this.db_keys.contains(link_dest.path)) {
                        this_links_to.push(link_dest.path);
                    }
                });
            }
            if (!this_links_to.length)
                return; // no links
            // save links_to information to db
            this.db[note.path].links_to = this_links_to;
            // add a "linked_from" reference to the db entry of all notes that are linked to from this note
            this_links_to.forEach((link) => {
                if (!this.db[link].linked_from.includes(note.path)) {
                    this.db[link].linked_from.push(note.path);
                }
            });
        });
    }
    /** starting from the CN, follow all paths and store the information on how long the shortest path to each note is*/
    updateDepthInformation() {
        Log("Analyzing distance from Central Note. CN path: " + this.settings.get("CN_path"));
        let depth = 0; // distance from the CN. starts at zero 
        let checked_links = []; // all the notes that have already been visited. dont visit them again to prevent endless loops
        let do_continue = true;
        // start at the the CN
        let links = [this.settings.get("CN_path")];
        while (do_continue) {
            let next_links = [];
            links.forEach((link) => {
                // extract all active and passive connections (linked to or from) for the next iteration of link-following
                let note = this.getNoteFromPath(link);
                note.links_to.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                note.linked_from.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                // update the info on how far the note is removed from CN
                if (note.distance_from_CN == null || note.distance_from_CN > depth) {
                    note.distance_from_CN = depth;
                }
                checked_links.push(link);
            });
            links = next_links.slice();
            if (links.length == 0) {
                do_continue = false;
            }
            depth += 1;
        }
    }
    /**
     * Recursive function that follows all possible paths from the CN that aren't unreasonably long or circular and stores them
     * @param path_so_far the path to be extended in this iteration
     */
    followPaths(path_so_far) {
        // logging
        this.get_paths_ran += 1;
        if (this.get_paths_ran % 10000 == 0) {
            Log("get paths ran " + String(this.get_paths_ran));
        }
        let note = this.db[path_so_far.all_members.last()];
        let all_members = path_so_far.all_members;
        let items = path_so_far.items;
        let new_paths_to_follow = [];
        let note_links_to = note.links_to.slice();
        let note_linked_from = note.linked_from.slice();
        note_links_to.forEach((link) => {
            // check whether the linked note also links to the current note
            let linked_to_or_both_ways = LINKED_TO;
            if (note_linked_from.contains(link)) {
                // remove it from the passive links to be followed later
                let index = note_linked_from.indexOf(link, 0);
                note_linked_from.splice(index, 1);
                linked_to_or_both_ways = LINKED_BOTH;
            }
            let new_path = { all_members: all_members.concat(link), items: items.concat([[link, linked_to_or_both_ways]]) };
            new_paths_to_follow.push(new_path);
        });
        note_linked_from.forEach((link) => {
            let new_path = { all_members: all_members.concat(link), items: items.concat([[link, LINKED_FROM]]) };
            new_paths_to_follow.push(new_path);
        });
        let called_itself = false; // whether the function called itself
        // function calls itself to explore every new path  
        new_paths_to_follow.forEach((path) => {
            // the path without the next note that is to be explored
            let all_items_so_far = path.all_members.slice(0, -1);
            let last_item_path = path.all_members.last();
            let last_item = this.getNoteFromPath(last_item_path);
            // stop if this note is already part of the explored path
            if (all_items_so_far.includes(last_item_path)) {
                return;
            }
            // stop if the path meanders too much 
            if ((path.all_members.length - last_item.distance_from_CN) > 1) {
                return;
            }
            this.followPaths(path);
            called_itself = true;
        });
        if (!called_itself) {
            // only add the path if it does't lead anywhere else. No need to have paths that are parts of other paths
            this.all_paths.push(path_so_far);
        }
    }
    /** for every note, store all notes that come right after it in any path. this is for generating the Map Of Content later on */
    updateDescendants() {
        // delete old Information
        this.descendants = new Map();
        this.all_paths.forEach((p) => {
            p.all_members.forEach((note_path, index) => {
                // make sure it's not the last member of the path
                if (!(index == p.all_members.length - 1)) {
                    // create entry in descendants if it doesn't exist
                    if (!this.descendants.has(note_path)) {
                        this.descendants.set(note_path, []);
                    }
                    let next_path_member = p.all_members[index + 1];
                    // add note as descendant if it isn't already stored in array
                    if (!this.descendants.get(note_path).includes(next_path_member)) {
                        this.descendants.set(note_path, this.descendants.get(note_path).concat(next_path_member));
                    }
                }
            });
        });
    }
    getLinksFromNote(path, contained_in_db = false) {
        let linkcache = this.app.metadataCache.getCache(path).links;
        let all_links = [];
        if (linkcache) {
            linkcache.forEach((val) => {
                // check if the link is valid 
                let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                //TODO is it neccessary to avoid including links multiple times? maybe they can't even be duplicate in the linkcache
                if (link_dest && !all_links.includes(link_dest.path) && (!contained_in_db || this.db_keys.contains(link_dest.path))) {
                    all_links.push(link_dest.path);
                }
            });
        }
        return all_links;
    }
}

function noop() { }
function add_location(element, file, line, column, char) {
    element.__svelte_meta = {
        loc: { file, line, column, char }
    };
}
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function is_function(thing) {
    return typeof thing === 'function';
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function is_empty(obj) {
    return Object.keys(obj).length === 0;
}
function null_to_empty(value) {
    return value == null ? '' : value;
}
function append(target, node) {
    target.appendChild(node);
}
function append_styles(target, style_sheet_id, styles) {
    const append_styles_to = get_root_for_style(target);
    if (!append_styles_to.getElementById(style_sheet_id)) {
        const style = element('style');
        style.id = style_sheet_id;
        style.textContent = styles;
        append_stylesheet(append_styles_to, style);
    }
}
function get_root_for_style(node) {
    if (!node)
        return document;
    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
    if (root.host) {
        return root;
    }
    return document;
}
function append_stylesheet(node, style) {
    append(node.head || node, style);
}
function insert(target, node, anchor) {
    target.insertBefore(node, anchor || null);
}
function detach(node) {
    node.parentNode.removeChild(node);
}
function destroy_each(iterations, detaching) {
    for (let i = 0; i < iterations.length; i += 1) {
        if (iterations[i])
            iterations[i].d(detaching);
    }
}
function element(name) {
    return document.createElement(name);
}
function svg_element(name) {
    return document.createElementNS('http://www.w3.org/2000/svg', name);
}
function text(data) {
    return document.createTextNode(data);
}
function space() {
    return text(' ');
}
function empty() {
    return text('');
}
function listen(node, event, handler, options) {
    node.addEventListener(event, handler, options);
    return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
    if (value == null)
        node.removeAttribute(attribute);
    else if (node.getAttribute(attribute) !== value)
        node.setAttribute(attribute, value);
}
function children(element) {
    return Array.from(element.childNodes);
}
function set_input_value(input, value) {
    input.value = value == null ? '' : value;
}
function set_style(node, key, value, important) {
    node.style.setProperty(key, value, important ? 'important' : '');
}
function toggle_class(element, name, toggle) {
    element.classList[toggle ? 'add' : 'remove'](name);
}
function custom_event(type, detail, bubbles = false) {
    const e = document.createEvent('CustomEvent');
    e.initCustomEvent(type, bubbles, false, detail);
    return e;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
function get_current_component() {
    if (!current_component)
        throw new Error('Function called outside component initialization');
    return current_component;
}
function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
}

const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
    if (!update_scheduled) {
        update_scheduled = true;
        resolved_promise.then(flush);
    }
}
function add_render_callback(fn) {
    render_callbacks.push(fn);
}
let flushing = false;
const seen_callbacks = new Set();
function flush() {
    if (flushing)
        return;
    flushing = true;
    do {
        // first, call beforeUpdate functions
        // and update components
        for (let i = 0; i < dirty_components.length; i += 1) {
            const component = dirty_components[i];
            set_current_component(component);
            update(component.$$);
        }
        set_current_component(null);
        dirty_components.length = 0;
        while (binding_callbacks.length)
            binding_callbacks.pop()();
        // then, once components are updated, call
        // afterUpdate functions. This may cause
        // subsequent updates...
        for (let i = 0; i < render_callbacks.length; i += 1) {
            const callback = render_callbacks[i];
            if (!seen_callbacks.has(callback)) {
                // ...so guard against infinite loops
                seen_callbacks.add(callback);
                callback();
            }
        }
        render_callbacks.length = 0;
    } while (dirty_components.length);
    while (flush_callbacks.length) {
        flush_callbacks.pop()();
    }
    update_scheduled = false;
    flushing = false;
    seen_callbacks.clear();
}
function update($$) {
    if ($$.fragment !== null) {
        $$.update();
        run_all($$.before_update);
        const dirty = $$.dirty;
        $$.dirty = [-1];
        $$.fragment && $$.fragment.p($$.ctx, dirty);
        $$.after_update.forEach(add_render_callback);
    }
}
const outroing = new Set();
let outros;
function group_outros() {
    outros = {
        r: 0,
        c: [],
        p: outros // parent group
    };
}
function check_outros() {
    if (!outros.r) {
        run_all(outros.c);
    }
    outros = outros.p;
}
function transition_in(block, local) {
    if (block && block.i) {
        outroing.delete(block);
        block.i(local);
    }
}
function transition_out(block, local, detach, callback) {
    if (block && block.o) {
        if (outroing.has(block))
            return;
        outroing.add(block);
        outros.c.push(() => {
            outroing.delete(block);
            if (callback) {
                if (detach)
                    block.d(1);
                callback();
            }
        });
        block.o(local);
    }
}

const globals = (typeof window !== 'undefined'
    ? window
    : typeof globalThis !== 'undefined'
        ? globalThis
        : global);
function create_component(block) {
    block && block.c();
}
function mount_component(component, target, anchor, customElement) {
    const { fragment, on_mount, on_destroy, after_update } = component.$$;
    fragment && fragment.m(target, anchor);
    if (!customElement) {
        // onMount happens before the initial afterUpdate
        add_render_callback(() => {
            const new_on_destroy = on_mount.map(run).filter(is_function);
            if (on_destroy) {
                on_destroy.push(...new_on_destroy);
            }
            else {
                // Edge case - component was destroyed immediately,
                // most likely as a result of a binding initialising
                run_all(new_on_destroy);
            }
            component.$$.on_mount = [];
        });
    }
    after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
    const $$ = component.$$;
    if ($$.fragment !== null) {
        run_all($$.on_destroy);
        $$.fragment && $$.fragment.d(detaching);
        // TODO null out other refs, including component.$$ (but need to
        // preserve final state?)
        $$.on_destroy = $$.fragment = null;
        $$.ctx = [];
    }
}
function make_dirty(component, i) {
    if (component.$$.dirty[0] === -1) {
        dirty_components.push(component);
        schedule_update();
        component.$$.dirty.fill(0);
    }
    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));
}
function init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {
    const parent_component = current_component;
    set_current_component(component);
    const $$ = component.$$ = {
        fragment: null,
        ctx: null,
        // state
        props,
        update: noop,
        not_equal,
        bound: blank_object(),
        // lifecycle
        on_mount: [],
        on_destroy: [],
        on_disconnect: [],
        before_update: [],
        after_update: [],
        context: new Map(parent_component ? parent_component.$$.context : options.context || []),
        // everything else
        callbacks: blank_object(),
        dirty,
        skip_bound: false,
        root: options.target || parent_component.$$.root
    };
    append_styles && append_styles($$.root);
    let ready = false;
    $$.ctx = instance
        ? instance(component, options.props || {}, (i, ret, ...rest) => {
            const value = rest.length ? rest[0] : ret;
            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
                if (!$$.skip_bound && $$.bound[i])
                    $$.bound[i](value);
                if (ready)
                    make_dirty(component, i);
            }
            return ret;
        })
        : [];
    $$.update();
    ready = true;
    run_all($$.before_update);
    // `false` as a special case of no DOM component
    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;
    if (options.target) {
        if (options.hydrate) {
            const nodes = children(options.target);
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.l(nodes);
            nodes.forEach(detach);
        }
        else {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.c();
        }
        if (options.intro)
            transition_in(component.$$.fragment);
        mount_component(component, options.target, options.anchor, options.customElement);
        flush();
    }
    set_current_component(parent_component);
}
/**
 * Base class for Svelte components. Used when dev=false.
 */
class SvelteComponent {
    $destroy() {
        destroy_component(this, 1);
        this.$destroy = noop;
    }
    $on(type, callback) {
        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));
        callbacks.push(callback);
        return () => {
            const index = callbacks.indexOf(callback);
            if (index !== -1)
                callbacks.splice(index, 1);
        };
    }
    $set($$props) {
        if (this.$$set && !is_empty($$props)) {
            this.$$.skip_bound = true;
            this.$$set($$props);
            this.$$.skip_bound = false;
        }
    }
}

function dispatch_dev(type, detail) {
    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));
}
function append_dev(target, node) {
    dispatch_dev('SvelteDOMInsert', { target, node });
    append(target, node);
}
function insert_dev(target, node, anchor) {
    dispatch_dev('SvelteDOMInsert', { target, node, anchor });
    insert(target, node, anchor);
}
function detach_dev(node) {
    dispatch_dev('SvelteDOMRemove', { node });
    detach(node);
}
function listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {
    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];
    if (has_prevent_default)
        modifiers.push('preventDefault');
    if (has_stop_propagation)
        modifiers.push('stopPropagation');
    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });
    const dispose = listen(node, event, handler, options);
    return () => {
        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });
        dispose();
    };
}
function attr_dev(node, attribute, value) {
    attr(node, attribute, value);
    if (value == null)
        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });
    else
        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });
}
function prop_dev(node, property, value) {
    node[property] = value;
    dispatch_dev('SvelteDOMSetProperty', { node, property, value });
}
function set_data_dev(text, data) {
    data = '' + data;
    if (text.wholeText === data)
        return;
    dispatch_dev('SvelteDOMSetData', { node: text, data });
    text.data = data;
}
function validate_each_argument(arg) {
    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {
        let msg = '{#each} only iterates over array-like objects.';
        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {
            msg += ' You can use a spread to convert this iterable into an array.';
        }
        throw new Error(msg);
    }
}
function validate_slots(name, slot, keys) {
    for (const slot_key of Object.keys(slot)) {
        if (!~keys.indexOf(slot_key)) {
            console.warn(`<${name}> received an unexpected slot "${slot_key}".`);
        }
    }
}
/**
 * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.
 */
class SvelteComponentDev extends SvelteComponent {
    constructor(options) {
        if (!options || (!options.target && !options.$$inline)) {
            throw new Error("'target' is a required option");
        }
        super();
    }
    $destroy() {
        super.$destroy();
        this.$destroy = () => {
            console.warn('Component was already destroyed'); // eslint-disable-line no-console
        };
    }
    $capture_state() { }
    $inject_state() { }
}

/* src/svelte/NoLinkImage.svelte generated by Svelte v3.42.1 */

const file$6 = "src/svelte/NoLinkImage.svelte";

function add_css$6(target) {
	append_styles(target, "svelte-1ln8ix3", "div#broken-link-container.svelte-1ln8ix3{position:fixed;bottom:5%;width:100%;height:25%;max-height:200px;align-content:center}svg.svelte-1ln8ix3{display:block;width:100%;height:100%;opacity:60%;position:relative;margin-left:auto;margin-right:auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9MaW5rSW1hZ2Uuc3ZlbHRlIiwibWFwcGluZ3MiOiJBQTBEQSxHQUFHLHNCQUFzQixlQUFDLENBQUEsQUFDbEIsUUFBUSxDQUFFLEtBQUssQ0FDZixNQUFNLENBQUUsRUFBRSxDQUNWLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLEdBQUcsQ0FDWCxVQUFVLENBQUUsS0FBSyxDQUNqQixhQUFhLENBQUUsTUFBTSxBQUN6QixDQUFBLEFBQ0EsR0FBRyxlQUFFLENBQUEsQUFDRCxPQUFPLENBQUUsS0FBSyxDQUNkLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLElBQUksQ0FDWixPQUFPLENBQUUsR0FBRyxDQUNaLFFBQVEsQ0FBRSxRQUFRLENBQ2xCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLFlBQVksQ0FBRSxJQUFJLEFBQ3RCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiTm9MaW5rSW1hZ2Uuc3ZlbHRlIl19 */");
}

function create_fragment$6(ctx) {
	let div;
	let svg;
	let g;
	let path0;
	let path1;
	let path2;
	let path3;
	let path4;
	let path5;
	let path6;
	let path7;
	let path8;
	let path9;
	let path10;
	let path11;
	let path12;
	let path13;

	const block = {
		c: function create() {
			div = element("div");
			svg = svg_element("svg");
			g = svg_element("g");
			path0 = svg_element("path");
			path1 = svg_element("path");
			path2 = svg_element("path");
			path3 = svg_element("path");
			path4 = svg_element("path");
			path5 = svg_element("path");
			path6 = svg_element("path");
			path7 = svg_element("path");
			path8 = svg_element("path");
			path9 = svg_element("path");
			path10 = svg_element("path");
			path11 = svg_element("path");
			path12 = svg_element("path");
			path13 = svg_element("path");
			set_style(path0, "fill", "#B3404A");
			attr_dev(path0, "d", "M383.112,223.342c-3.162,0-6.347-1.034-9.008-3.162c-6.227-4.981-7.238-14.067-2.257-20.294\n\t\tl23.098-28.877c4.982-6.226,14.067-7.238,20.294-2.257c6.227,4.981,7.238,14.067,2.257,20.294l-23.098,28.877\n\t\tC391.545,221.487,387.348,223.342,383.112,223.342z");
			add_location(path0, file$6, 6, 1, 315);
			set_style(path1, "fill", "#B3404A");
			attr_dev(path1, "d", "M435.095,270.439h-37.537c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th37.537c7.973,0,14.438,6.465,14.438,14.438C449.533,263.973,443.069,270.439,435.095,270.439z");
			add_location(path1, file$6, 9, 1, 599);
			set_style(path2, "fill", "#B3404A");
			attr_dev(path2, "d", "M406.229,346.41c-4.237,0-8.433-1.854-11.285-5.42l-23.098-28.877\n\t\tc-4.98-6.227-3.97-15.311,2.257-20.294c6.228-4.98,15.313-3.969,20.294,2.257l23.098,28.877c4.98,6.227,3.97,15.311-2.257,20.294\n\t\tC412.576,345.376,409.393,346.41,406.229,346.41z");
			add_location(path2, file$6, 11, 1, 824);
			set_style(path3, "fill", "#B3404A");
			attr_dev(path3, "d", "M128.887,223.342c-4.237,0-8.433-1.854-11.285-5.42l-23.098-28.877\n\t\tc-4.98-6.227-3.97-15.311,2.257-20.294c6.228-4.981,15.311-3.97,20.294,2.257l23.098,28.877c4.98,6.227,3.97,15.311-2.257,20.294\n\t\tC135.232,222.31,132.049,223.342,128.887,223.342z");
			add_location(path3, file$6, 14, 1, 1100);
			set_style(path4, "fill", "#B3404A");
			attr_dev(path4, "d", "M114.44,270.439H76.904c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th37.537c7.973,0,14.438,6.465,14.438,14.438C128.878,263.973,122.413,270.439,114.44,270.439z");
			add_location(path4, file$6, 17, 1, 1378);
			set_style(path5, "fill", "#B3404A");
			attr_dev(path5, "d", "M105.769,346.41c-3.162,0-6.347-1.034-9.008-3.162c-6.227-4.981-7.238-14.067-2.257-20.294\n\t\tl23.098-28.877c4.982-6.226,14.067-7.236,20.294-2.257c6.227,4.981,7.238,14.067,2.257,20.294l-23.098,28.877\n\t\tC114.202,344.553,110.004,346.41,105.769,346.41z");
			add_location(path5, file$6, 19, 1, 1600);
			set_style(path6, "fill", "#B3404A");
			attr_dev(path6, "d", "M471.123,176.32c-7.973,0-14.438-6.465-14.438-14.438v-53.826c0-29.082-23.661-52.741-52.741-52.741\n\t\th-24.949c-7.973,0-14.438-6.465-14.438-14.438s6.465-14.438,14.438-14.438h24.949c45.004,0,81.617,36.613,81.617,81.617v53.826\n\t\tC485.561,169.855,479.096,176.32,471.123,176.32z");
			add_location(path6, file$6, 22, 1, 1881);
			set_style(path7, "fill", "#B3404A");
			attr_dev(path7, "d", "M40.877,176.32c-7.973,0-14.438-6.465-14.438-14.438v-53.826c0-45.004,36.613-81.617,81.617-81.617\n\t\th24.948c7.973,0,14.438,6.465,14.438,14.438s-6.465,14.438-14.438,14.438h-24.948c-29.082,0-52.741,23.661-52.741,52.741v53.826\n\t\tC55.315,169.855,48.85,176.32,40.877,176.32z");
			add_location(path7, file$6, 25, 1, 2188);
			set_style(path8, "fill", "#B3404A");
			attr_dev(path8, "d", "M403.943,485.561h-24.948c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th24.948c29.082,0,52.741-23.661,52.741-52.741v-53.826c0-7.973,6.465-14.438,14.438-14.438c7.973,0,14.438,6.465,14.438,14.438\n\t\tv53.826C485.561,448.947,448.947,485.561,403.943,485.561z");
			add_location(path8, file$6, 28, 1, 2491);
			set_style(path9, "fill", "#B3404A");
			attr_dev(path9, "d", "M133.005,485.561h-24.948c-45.004,0-81.617-36.613-81.617-81.617v-53.826\n\t\tc0-7.973,6.465-14.438,14.438-14.438s14.438,6.465,14.438,14.438v53.826c0,29.082,23.661,52.741,52.741,52.741h24.948\n\t\tc7.973,0,14.438,6.465,14.438,14.438C147.442,479.096,140.979,485.561,133.005,485.561z");
			add_location(path9, file$6, 31, 1, 2806);
			add_location(g, file$6, 5, 0, 310);
			set_style(path10, "fill", "#EBAFAE");
			attr_dev(path10, "d", "M202.039,208.49c12.894,0,23.349-10.453,23.349-23.349V91.748c0-16.593,14.019-30.612,30.612-30.612\n\tc16.593,0,30.612,14.019,30.612,30.612v93.395c0,12.894,10.453,23.349,23.349,23.349l0,0c12.894,0,23.349-10.453,23.349-23.349\n\tV91.748c0-42.521-34.789-77.31-77.31-77.31l0,0c-42.521,0-77.31,34.789-77.31,77.31v93.395\n\tC178.69,198.037,189.143,208.49,202.039,208.49L202.039,208.49z");
			add_location(path10, file$6, 35, 0, 3119);
			set_style(path11, "fill", "#B1404A");
			attr_dev(path11, "d", "M309.961,222.928c-20.837,0-37.787-16.95-37.787-37.787V91.748c0-8.616-7.558-16.175-16.175-16.175\n\tc-8.616,0-16.175,7.558-16.175,16.175v93.395c0,20.837-16.95,37.787-37.787,37.787s-37.787-16.95-37.787-37.787V91.748\n\tC164.252,41.158,205.409,0,256,0s91.748,41.158,91.748,91.748v93.395C347.746,205.978,330.796,222.928,309.961,222.928z M256,46.698\n\tc24.42,0,45.05,20.63,45.05,45.05v93.395c0,4.913,3.998,8.911,8.911,8.911s8.911-3.998,8.911-8.911V91.748\n\tc0-34.668-28.204-62.872-62.872-62.872c-34.668,0-62.872,28.204-62.872,62.872v93.395c0,4.913,3.998,8.911,8.911,8.911\n\ts8.911-3.998,8.911-8.911V91.748C210.948,67.328,231.578,46.698,256,46.698z");
			add_location(path11, file$6, 39, 0, 3526);
			set_style(path12, "fill", "#EBAFAE");
			attr_dev(path12, "d", "M309.96,303.51c-12.894,0-23.349,10.453-23.349,23.349v93.395c0,16.593-14.019,30.612-30.612,30.612\n\tc-16.593,0-30.612-14.019-30.612-30.612v-93.395c0-12.894-10.453-23.349-23.349-23.349l0,0c-12.894,0-23.349,10.453-23.349,23.349\n\tv93.395c0,42.521,34.789,77.31,77.31,77.31l0,0c42.521,0,77.31-34.789,77.31-77.31v-93.395\n\tC333.309,313.963,322.856,303.51,309.96,303.51L309.96,303.51z");
			add_location(path12, file$6, 45, 0, 4196);
			set_style(path13, "fill", "#B1404A");
			attr_dev(path13, "d", "M256,512c-50.59,0-91.748-41.158-91.748-91.748v-93.395c0-20.837,16.95-37.787,37.787-37.787\n\ts37.787,16.95,37.787,37.787v93.395c0,8.616,7.558,16.175,16.175,16.175c8.616,0,16.175-7.558,16.175-16.175v-93.395\n\tc0-20.837,16.95-37.787,37.787-37.787s37.787,16.95,37.787,37.787v93.395C347.746,470.842,306.59,512,256,512z M202.039,317.947\n\tc-4.913,0-8.911,3.998-8.911,8.911v93.395c0,34.668,28.204,62.872,62.872,62.872c34.668,0,62.872-28.204,62.872-62.872v-93.395\n\tc0-4.913-3.998-8.911-8.911-8.911s-8.911,3.998-8.911,8.911v93.395c0,24.42-20.63,45.05-45.05,45.05s-45.05-20.63-45.05-45.05\n\tv-93.395C210.948,321.944,206.952,317.947,202.039,317.947z");
			add_location(path13, file$6, 49, 0, 4605);
			attr_dev(svg, "version", "1.1");
			attr_dev(svg, "id", "Layer_1");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "xmlns:xlink", "http://www.w3.org/1999/xlink");
			attr_dev(svg, "x", "0px");
			attr_dev(svg, "y", "0px");
			attr_dev(svg, "viewBox", "0 0 512 512");
			set_style(svg, "enable-background", "new 0 0 512 512");
			attr_dev(svg, "xml:space", "preserve");
			attr_dev(svg, "class", "svelte-1ln8ix3");
			add_location(svg, file$6, 3, 4, 95);
			attr_dev(div, "id", "broken-link-container");
			attr_dev(div, "class", "svelte-1ln8ix3");
			add_location(div, file$6, 1, 0, 2);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			append_dev(div, svg);
			append_dev(svg, g);
			append_dev(g, path0);
			append_dev(g, path1);
			append_dev(g, path2);
			append_dev(g, path3);
			append_dev(g, path4);
			append_dev(g, path5);
			append_dev(g, path6);
			append_dev(g, path7);
			append_dev(g, path8);
			append_dev(g, path9);
			append_dev(svg, path10);
			append_dev(svg, path11);
			append_dev(svg, path12);
			append_dev(svg, path13);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$6.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$6($$self, $$props) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('NoLinkImage', slots, []);
	const writable_props = [];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<NoLinkImage> was created with unknown prop '${key}'`);
	});

	return [];
}

class NoLinkImage extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$6, create_fragment$6, safe_not_equal, {}, add_css$6);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "NoLinkImage",
			options,
			id: create_fragment$6.name
		});
	}
}

/* src/svelte/Descendants.svelte generated by Svelte v3.42.1 */

const { console: console_1 } = globals;
const file$5 = "src/svelte/Descendants.svelte";

function add_css$5(target) {
	append_styles(target, "svelte-12geck5", "a.link.svelte-12geck5.svelte-12geck5{cursor:pointer}ul.svelte-12geck5.svelte-12geck5{list-style:none;margin:0;padding:0}li.svelte-12geck5.svelte-12geck5{list-style:none;margin:0;padding:0}ul.svelte-12geck5.svelte-12geck5{padding-left:1em}li.svelte-12geck5.svelte-12geck5{padding-left:1em;border:5px solid darkgray;border-width:0 0 1px 1px}li.dark-mode.svelte-12geck5.svelte-12geck5{padding-left:1em;border:5px solid gray;border-width:0 0 1px 1px}li.container.svelte-12geck5.svelte-12geck5{border-bottom:0px}li.svelte-12geck5 p.svelte-12geck5{margin:0;position:relative;top:0em}li.svelte-12geck5 ul.svelte-12geck5{border-top:1px solid darkgray;margin-left:-1em;padding-left:2em}li.dark-mode.svelte-12geck5 ul.svelte-12geck5{border-top:1px solid gray}ul li.svelte-12geck5:last-child ul.svelte-12geck5{border-left:none;margin-left:-17px}.expand-arrow.svelte-12geck5.svelte-12geck5{color:darkgrey}.expand-arrow.svelte-12geck5.svelte-12geck5:hover{color:gray}div.expand_button.svelte-12geck5.svelte-12geck5{display:inline}div.expand_button.svelte-12geck5 svg.svg.svelte-12geck5{width:14px;height:14px;margin-top:5px}li.light-mode.svelte-12geck5 div.expand_button svg.svg.svelte-12geck5{fill:darkgrey}li.light-mode.svelte-12geck5 div.expand_button svg.svg.svelte-12geck5:hover{fill:gray}li.dark-mode.svelte-12geck5 div.expand_button svg.svg.svelte-12geck5{fill:gray}li.dark-mode.svelte-12geck5 div.expand_button svg.svg.svelte-12geck5:hover{fill:lightgray}div.expand_button.svelte-12geck5 svg.svg.expanded.svelte-12geck5{transform:rotate(90deg)}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$4(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[12] = list[i];
	return child_ctx;
}

// (47:0) {:else}
function create_else_block$1(ctx) {
	let li;
	let p;
	let t;
	let ul;
	let current;

	function select_block_type_1(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0) return create_if_block_2$1;
		return create_else_block_1$1;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block0 = current_block_type(ctx);
	let if_block1 = /*children*/ ctx[7].length > 0 && /*expanded*/ ctx[6] && create_if_block_1$1(ctx);

	const block = {
		c: function create() {
			li = element("li");
			p = element("p");
			if_block0.c();
			t = space();
			ul = element("ul");
			if (if_block1) if_block1.c();
			attr_dev(p, "class", "svelte-12geck5");
			add_location(p, file$5, 48, 4, 1194);
			attr_dev(ul, "class", "svelte-12geck5");
			add_location(ul, file$5, 85, 4, 2314);
			attr_dev(li, "class", "container " + /*dark_mode*/ ctx[8] + " svelte-12geck5");
			add_location(li, file$5, 47, 2, 1155);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, p);
			if_block0.m(p, null);
			append_dev(li, t);
			append_dev(li, ul);
			if (if_block1) if_block1.m(ul, null);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block0) {
				if_block0.p(ctx, dirty);
			} else {
				if_block0.d(1);
				if_block0 = current_block_type(ctx);

				if (if_block0) {
					if_block0.c();
					if_block0.m(p, null);
				}
			}

			if (/*children*/ ctx[7].length > 0 && /*expanded*/ ctx[6]) {
				if (if_block1) {
					if_block1.p(ctx, dirty);

					if (dirty & /*children, expanded*/ 192) {
						transition_in(if_block1, 1);
					}
				} else {
					if_block1 = create_if_block_1$1(ctx);
					if_block1.c();
					transition_in(if_block1, 1);
					if_block1.m(ul, null);
				}
			} else if (if_block1) {
				group_outros();

				transition_out(if_block1, 1, 1, () => {
					if_block1 = null;
				});

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block1);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block1);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
			if_block0.d();
			if (if_block1) if_block1.d();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block$1.name,
		type: "else",
		source: "(47:0) {:else}",
		ctx
	});

	return block;
}

// (45:0) {#if indentation == 0 && children.length == 0}
function create_if_block$1(ctx) {
	let t;

	const block = {
		c: function create() {
			t = text("No descendants");
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block$1.name,
		type: "if",
		source: "(45:0) {#if indentation == 0 && children.length == 0}",
		ctx
	});

	return block;
}

// (52:6) {:else}
function create_else_block_1$1(ctx) {
	let t0;
	let a;
	let t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t1;
	let mounted;
	let dispose;
	let if_block = /*children*/ ctx[7].length > 0 && create_if_block_3$1(ctx);

	const block = {
		c: function create() {
			if (if_block) if_block.c();
			t0 = space();
			a = element("a");
			t1 = text(t1_value);
			attr_dev(a, "class", "link svelte-12geck5");
			attr_dev(a, "title", /*note_path*/ ctx[0]);
			add_location(a, file$5, 74, 8, 2073);
		},
		m: function mount(target, anchor) {
			if (if_block) if_block.m(target, anchor);
			insert_dev(target, t0, anchor);
			insert_dev(target, a, anchor);
			append_dev(a, t1);

			if (!mounted) {
				dispose = listen_dev(a, "click", /*click_handler_1*/ ctx[10], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (/*children*/ ctx[7].length > 0) {
				if (if_block) {
					if_block.p(ctx, dirty);
				} else {
					if_block = create_if_block_3$1(ctx);
					if_block.c();
					if_block.m(t0.parentNode, t0);
				}
			} else if (if_block) {
				if_block.d(1);
				if_block = null;
			}

			if (dirty & /*note_path, db*/ 3 && t1_value !== (t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t1, t1_value);

			if (dirty & /*note_path*/ 1) {
				attr_dev(a, "title", /*note_path*/ ctx[0]);
			}
		},
		d: function destroy(detaching) {
			if (if_block) if_block.d(detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1$1.name,
		type: "else",
		source: "(52:6) {:else}",
		ctx
	});

	return block;
}

// (50:6) {#if indentation == 0}
function create_if_block_2$1(ctx) {
	let t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t;

	const block = {
		c: function create() {
			t = text(t_value);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*note_path, db*/ 3 && t_value !== (t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2$1.name,
		type: "if",
		source: "(50:6) {#if indentation == 0}",
		ctx
	});

	return block;
}

// (52:13) {#if children.length > 0}
function create_if_block_3$1(ctx) {
	let span;
	let div;
	let mounted;
	let dispose;

	function select_block_type_2(ctx, dirty) {
		if (/*expanded*/ ctx[6]) return create_if_block_4$1;
		return create_else_block_2;
	}

	let current_block_type = select_block_type_2(ctx);
	let if_block = current_block_type(ctx);

	const block = {
		c: function create() {
			span = element("span");
			div = element("div");
			if_block.c();
			attr_dev(div, "class", "expand_button svelte-12geck5");
			add_location(div, file$5, 63, 13, 1716);
			attr_dev(span, "class", "expand-arrow svelte-12geck5");
			add_location(span, file$5, 52, 10, 1316);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, div);
			if_block.m(div, null);

			if (!mounted) {
				dispose = listen_dev(span, "click", /*click_handler*/ ctx[9], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (current_block_type !== (current_block_type = select_block_type_2(ctx))) {
				if_block.d(1);
				if_block = current_block_type(ctx);

				if (if_block) {
					if_block.c();
					if_block.m(div, null);
				}
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
			if_block.d();
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3$1.name,
		type: "if",
		source: "(52:13) {#if children.length > 0}",
		ctx
	});

	return block;
}

// (69:14) {:else}
function create_else_block_2(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$5, 69, 18, 1947);
			attr_dev(svg, "class", "svg svelte-12geck5");
			add_location(svg, file$5, 68, 21, 1911);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_2.name,
		type: "else",
		source: "(69:14) {:else}",
		ctx
	});

	return block;
}

// (65:14) {#if expanded}
function create_if_block_4$1(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$5, 66, 18, 1834);
			attr_dev(svg, "class", "svg expanded svelte-12geck5");
			add_location(svg, file$5, 65, 16, 1789);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4$1.name,
		type: "if",
		source: "(65:14) {#if expanded}",
		ctx
	});

	return block;
}

// (87:6) {#if children.length > 0 && expanded}
function create_if_block_1$1(ctx) {
	let each_1_anchor;
	let current;
	let each_value = /*children*/ ctx[7];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));
	}

	const out = i => transition_out(each_blocks[i], 1, 1, () => {
		each_blocks[i] = null;
	});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			each_1_anchor = empty();
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, each_1_anchor, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*db, app, children, indentation, view, expandMan*/ 190) {
				each_value = /*children*/ ctx[7];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$4(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
						transition_in(each_blocks[i], 1);
					} else {
						each_blocks[i] = create_each_block$4(child_ctx);
						each_blocks[i].c();
						transition_in(each_blocks[i], 1);
						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
					}
				}

				group_outros();

				for (i = each_value.length; i < each_blocks.length; i += 1) {
					out(i);
				}

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;

			for (let i = 0; i < each_value.length; i += 1) {
				transition_in(each_blocks[i]);
			}

			current = true;
		},
		o: function outro(local) {
			each_blocks = each_blocks.filter(Boolean);

			for (let i = 0; i < each_blocks.length; i += 1) {
				transition_out(each_blocks[i]);
			}

			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(each_1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1$1.name,
		type: "if",
		source: "(87:6) {#if children.length > 0 && expanded}",
		ctx
	});

	return block;
}

// (88:8) {#each children as child}
function create_each_block$4(ctx) {
	let descendants;
	let current;

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[1],
				app: /*app*/ ctx[4],
				note_path: /*child*/ ctx[12],
				indentation: /*indentation*/ ctx[2] + 1,
				view: /*view*/ ctx[3],
				expandMan: /*expandMan*/ ctx[5]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			create_component(descendants.$$.fragment);
		},
		m: function mount(target, anchor) {
			mount_component(descendants, target, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			const descendants_changes = {};
			if (dirty & /*db*/ 2) descendants_changes.db = /*db*/ ctx[1];
			if (dirty & /*app*/ 16) descendants_changes.app = /*app*/ ctx[4];
			if (dirty & /*children*/ 128) descendants_changes.note_path = /*child*/ ctx[12];
			if (dirty & /*indentation*/ 4) descendants_changes.indentation = /*indentation*/ ctx[2] + 1;
			if (dirty & /*view*/ 8) descendants_changes.view = /*view*/ ctx[3];
			if (dirty & /*expandMan*/ 32) descendants_changes.expandMan = /*expandMan*/ ctx[5];
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_component(descendants, detaching);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$4.name,
		type: "each",
		source: "(88:8) {#each children as child}",
		ctx
	});

	return block;
}

function create_fragment$5(ctx) {
	let svg;
	let symbol;
	let path;
	let t;
	let current_block_type_index;
	let if_block;
	let if_block_anchor;
	let current;
	const if_block_creators = [create_if_block$1, create_else_block$1];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0 && /*children*/ ctx[7].length == 0) return 0;
		return 1;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			svg = svg_element("svg");
			symbol = svg_element("symbol");
			path = svg_element("path");
			t = space();
			if_block.c();
			if_block_anchor = empty();
			attr_dev(path, "d", "M22 12l-20 12 5-12-5-12z");
			add_location(path, file$5, 40, 5, 994);
			attr_dev(symbol, "id", "expand-arrow-svg");
			attr_dev(symbol, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol, "viewBox", "0 0 24 24");
			add_location(symbol, file$5, 36, 2, 892);
			attr_dev(svg, "display", "none");
			add_location(svg, file$5, 35, 0, 869);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, symbol);
			append_dev(symbol, path);
			insert_dev(target, t, anchor);
			if_blocks[current_block_type_index].m(target, anchor);
			insert_dev(target, if_block_anchor, anchor);
			current = true;
		},
		p: function update(ctx, [dirty]) {
			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(if_block_anchor.parentNode, if_block_anchor);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
			if (detaching) detach_dev(t);
			if_blocks[current_block_type_index].d(detaching);
			if (detaching) detach_dev(if_block_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$5.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$5($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Descendants', slots, []);
	
	
	
	let { note_path } = $$props;
	let { db } = $$props;
	let { indentation } = $$props;
	let { view } = $$props;
	let { app } = $$props;
	let { expandMan } = $$props;
	expandMan.logIndent(indentation);

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	let expanded;
	let children = [];

	if (db.descendants.has(note_path)) {
		children = db.descendants.get(note_path).slice();
	}

	function resetExpanded(new_max_indent) {
		if (indentation == 0) {
			$$invalidate(6, expanded = true);
		} else if (!view.plugin.settings.isExpanded(note_path)) {
			$$invalidate(6, expanded = false);
		} else {
			$$invalidate(6, expanded = indentation < new_max_indent );
		}
	}

	resetExpanded(expandMan.initial_max_indent);
	expandMan.registerRedrawDescendantCallback(resetExpanded);
	const writable_props = ['note_path', 'db', 'indentation', 'view', 'app', 'expandMan'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console_1.warn(`<Descendants> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		$$invalidate(6, expanded = !expanded);
		console.log("known path: ", note_path);
		view.plugin.settings.setExpanded(note_path, expanded);

		if (expanded) {
			expandMan.onManualExpand();
			expandMan.logIndent(indentation + 1);
		}
	};

	const click_handler_1 = event => {
		NavigateToFile(app, note_path, event);
	};

	$$self.$$set = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('view' in $$props) $$invalidate(3, view = $$props.view);
		if ('app' in $$props) $$invalidate(4, app = $$props.app);
		if ('expandMan' in $$props) $$invalidate(5, expandMan = $$props.expandMan);
	};

	$$self.$capture_state = () => ({
		GetDisplayName,
		NavigateToFile,
		note_path,
		db,
		indentation,
		view,
		app,
		expandMan,
		dark_mode,
		expanded,
		children,
		resetExpanded
	});

	$$self.$inject_state = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('view' in $$props) $$invalidate(3, view = $$props.view);
		if ('app' in $$props) $$invalidate(4, app = $$props.app);
		if ('expandMan' in $$props) $$invalidate(5, expandMan = $$props.expandMan);
		if ('dark_mode' in $$props) $$invalidate(8, dark_mode = $$props.dark_mode);
		if ('expanded' in $$props) $$invalidate(6, expanded = $$props.expanded);
		if ('children' in $$props) $$invalidate(7, children = $$props.children);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		note_path,
		db,
		indentation,
		view,
		app,
		expandMan,
		expanded,
		children,
		dark_mode,
		click_handler,
		click_handler_1
	];
}

class Descendants extends SvelteComponentDev {
	constructor(options) {
		super(options);

		init(
			this,
			options,
			instance$5,
			create_fragment$5,
			safe_not_equal,
			{
				note_path: 0,
				db: 1,
				indentation: 2,
				view: 3,
				app: 4,
				expandMan: 5
			},
			add_css$5
		);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Descendants",
			options,
			id: create_fragment$5.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*note_path*/ ctx[0] === undefined && !('note_path' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'note_path'");
		}

		if (/*db*/ ctx[1] === undefined && !('db' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'db'");
		}

		if (/*indentation*/ ctx[2] === undefined && !('indentation' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'indentation'");
		}

		if (/*view*/ ctx[3] === undefined && !('view' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'view'");
		}

		if (/*app*/ ctx[4] === undefined && !('app' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'app'");
		}

		if (/*expandMan*/ ctx[5] === undefined && !('expandMan' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'expandMan'");
		}
	}

	get note_path() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set note_path(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get db() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set db(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get indentation() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set indentation(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get view() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get app() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get expandMan() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set expandMan(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/UpdateNotice.svelte generated by Svelte v3.42.1 */
const file$4 = "src/svelte/UpdateNotice.svelte";

function add_css$4(target) {
	append_styles(target, "svelte-1afhixd", "div#all-container.svelte-1afhixd{display:flex;flex-direction:column;height:100%}div#main_moc_div.svelte-1afhixd{padding:initial;width:initial;height:initial;position:initial;overflow:auto;flex:1}div#main_moc_div.dark-mode.svelte-1afhixd{color:#dcddde}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXBkYXRlTm90aWNlLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUErREksR0FBRyxjQUFjLGVBQUMsQ0FBQSxBQUNkLE9BQU8sQ0FBRSxJQUFJLENBQ2IsY0FBYyxDQUFFLE1BQU0sQ0FDdEIsTUFBTSxDQUFFLElBQUksQUFDaEIsQ0FBQSxBQUVBLEdBQUcsYUFBYSxlQUFDLENBQUEsQUFDYixPQUFPLENBQUUsT0FBTyxDQUNoQixLQUFLLENBQUUsT0FBTyxDQUNkLE1BQU0sQ0FBRSxPQUFPLENBQ2YsUUFBUSxDQUFFLE9BQU8sQ0FDakIsUUFBUSxDQUFFLElBQUksQ0FDZCxJQUFJLENBQUUsQ0FBQyxBQUNYLENBQUEsQUFFQSxHQUFHLGFBQWEsVUFBVSxlQUFDLENBQUEsQUFDdkIsS0FBSyxDQUFFLE9BQU8sQUFDbEIsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJVcGRhdGVOb3RpY2Uuc3ZlbHRlIl19 */");
}

function create_fragment$4(ctx) {
	let div1;
	let div0;
	let h3;
	let t1;
	let ul;
	let li0;
	let t3;
	let br0;
	let t4;
	let li1;
	let t6;
	let a0;
	let t8;
	let br1;
	let br2;
	let t9;
	let a1;
	let t11;
	let a2;
	let t13;
	let a3;
	let t15;
	let br3;
	let br4;
	let t16;
	let button;
	let mounted;
	let dispose;

	const block = {
		c: function create() {
			div1 = element("div");
			div0 = element("div");
			h3 = element("h3");
			h3.textContent = "This plugin has been updated";
			t1 = text("\n\n        The latest changes are:\n        ");
			ul = element("ul");
			li0 = element("li");
			li0.textContent = "You can pin a file to navigate it's links while\n                keeping it's Map of Content open. Just click on the little pin\n                in the top left corner.";
			t3 = space();
			br0 = element("br");
			t4 = space();
			li1 = element("li");
			li1.textContent = "The plugin can remember whether to show or hide a file's\n                descendants in the tree view. This must be enabled in the\n                settings.";
			t6 = text("\n        See ");
			a0 = element("a");
			a0.textContent = "here";
			t8 = text("\n        for a complete history of all changes.");
			br1 = element("br");
			br2 = element("br");
			t9 = text("\n        You can support the development of this plugin by donating on\n        ");
			a1 = element("a");
			a1.textContent = "Patreon";
			t11 = text(",\n        ");
			a2 = element("a");
			a2.textContent = "Ko-Fi";
			t13 = text("\n        or\n        ");
			a3 = element("a");
			a3.textContent = "PayPal";
			t15 = text(". Thank\n        you!\n\n        ");
			br3 = element("br");
			br4 = element("br");
			t16 = space();
			button = element("button");
			button.textContent = "Close";
			set_style(h3, "text-align", "center");
			add_location(h3, file$4, 17, 8, 370);
			add_location(li0, file$4, 21, 12, 492);
			add_location(br0, file$4, 26, 12, 710);
			add_location(li1, file$4, 27, 12, 729);
			add_location(ul, file$4, 20, 8, 475);
			attr_dev(a0, "href", "https://github.com/Robin-Haupt-1/Obsidian-Map-of-Content/releases");
			add_location(a0, file$4, 33, 12, 951);
			add_location(br1, file$4, 37, 46, 1116);
			add_location(br2, file$4, 37, 52, 1122);
			attr_dev(a1, "href", "https://www.patreon.com/RobinHaupt");
			add_location(a1, file$4, 39, 8, 1207);
			attr_dev(a2, "href", "https://ko-fi.com/robinhaupt");
			add_location(a2, file$4, 40, 8, 1273);
			attr_dev(a3, "href", "https://www.paypal.com/paypalme/robinhaupt");
			add_location(a3, file$4, 42, 8, 1341);
			add_location(br3, file$4, 45, 8, 1434);
			add_location(br4, file$4, 45, 14, 1440);
			set_style(button, "display", "block");
			set_style(button, "margin", "auto");
			add_location(button, file$4, 46, 8, 1455);
			attr_dev(div0, "id", "main_moc_div");
			attr_dev(div0, "class", "" + (null_to_empty(/*dark_mode*/ ctx[2]) + " svelte-1afhixd"));
			add_location(div0, file$4, 15, 4, 315);
			attr_dev(div1, "id", "all-container");
			attr_dev(div1, "class", "svelte-1afhixd");
			add_location(div1, file$4, 14, 0, 286);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div1, anchor);
			append_dev(div1, div0);
			append_dev(div0, h3);
			append_dev(div0, t1);
			append_dev(div0, ul);
			append_dev(ul, li0);
			append_dev(ul, t3);
			append_dev(ul, br0);
			append_dev(ul, t4);
			append_dev(ul, li1);
			append_dev(div0, t6);
			append_dev(div0, a0);
			append_dev(div0, t8);
			append_dev(div0, br1);
			append_dev(div0, br2);
			append_dev(div0, t9);
			append_dev(div0, a1);
			append_dev(div0, t11);
			append_dev(div0, a2);
			append_dev(div0, t13);
			append_dev(div0, a3);
			append_dev(div0, t15);
			append_dev(div0, br3);
			append_dev(div0, br4);
			append_dev(div0, t16);
			append_dev(div0, button);

			if (!mounted) {
				dispose = listen_dev(button, "click", /*click_handler*/ ctx[5], false, false, false);
				mounted = true;
			}
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div1);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$4.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$4($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('UpdateNotice', slots, []);
	
	
	
	let { app } = $$props;
	let { view } = $$props;
	let { plugin } = $$props;
	let settings = plugin.settings;

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	const writable_props = ['app', 'view', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<UpdateNotice> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		settings.set({ do_show_update_notice: false });
		view.rerender();
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(3, app = $$props.app);
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('plugin' in $$props) $$invalidate(4, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		Log,
		onMount,
		app,
		view,
		plugin,
		settings,
		dark_mode
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(3, app = $$props.app);
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('plugin' in $$props) $$invalidate(4, plugin = $$props.plugin);
		if ('settings' in $$props) $$invalidate(1, settings = $$props.settings);
		if ('dark_mode' in $$props) $$invalidate(2, dark_mode = $$props.dark_mode);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [view, settings, dark_mode, app, plugin, click_handler];
}

class UpdateNotice extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$4, create_fragment$4, safe_not_equal, { app: 3, view: 0, plugin: 4 }, add_css$4);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "UpdateNotice",
			options,
			id: create_fragment$4.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[3] === undefined && !('app' in props)) {
			console.warn("<UpdateNotice> was created without expected prop 'app'");
		}

		if (/*view*/ ctx[0] === undefined && !('view' in props)) {
			console.warn("<UpdateNotice> was created without expected prop 'view'");
		}

		if (/*plugin*/ ctx[4] === undefined && !('plugin' in props)) {
			console.warn("<UpdateNotice> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<UpdateNotice>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<UpdateNotice>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get view() {
		throw new Error("<UpdateNotice>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<UpdateNotice>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<UpdateNotice>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<UpdateNotice>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

class expandManager {
    constructor() {
        this.initial_max_indent = 3;
        this.redrawCallbacks = [];
        this.manually_expanded = false;
    }
    expand() {
        if (this.manually_expanded) {
            this.rerenderDescendants(this.initial_max_indent);
            this.manually_expanded = false;
        }
        else {
            this.rerenderDescendants(this.initial_max_indent + 1);
        }
    }
    contract() {
        if (this.initial_max_indent > 1) {
            this.rerenderDescendants(this.initial_max_indent - 1);
            this.initial_max_indent -= 1;
        }
    }
    rerenderDescendants(new_max_indent) {
        for (let func of this.redrawCallbacks) {
            func(new_max_indent);
        }
    }
    registerRedrawDescendantCallback(redraw) {
        this.redrawCallbacks.push(redraw);
    }
    logIndent(indent) {
        if (indent > this.initial_max_indent) {
            this.initial_max_indent = indent;
        }
    }
    onManualExpand() {
        this.manually_expanded = true;
    }
}

/* src/svelte/View.svelte generated by Svelte v3.42.1 */
const file$3 = "src/svelte/View.svelte";

function add_css$3(target) {
	append_styles(target, "svelte-wzt2eg", "div#all-container.svelte-wzt2eg.svelte-wzt2eg{display:flex;flex-direction:column;height:100%}div#top-bar.svelte-wzt2eg.svelte-wzt2eg{min-height:30px;width:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:10px;margin-bottom:1em}div#top-bar.svelte-wzt2eg div#pin-file svg#pinned.svelte-wzt2eg{display:none}div#top-bar.svelte-wzt2eg div#pin-file.is-pinned svg#pinned.svelte-wzt2eg{display:block}div#top-bar.svelte-wzt2eg div#pin-file.is-pinned svg#not-pinned.svelte-wzt2eg{display:none}div#top-bar-flex.svelte-wzt2eg.svelte-wzt2eg{min-height:30px;display:flex;justify-content:center}div#top-bar.svelte-wzt2eg div.action.svelte-wzt2eg{height:20px;width:20px;margin:5px}div#top-bar.svelte-wzt2eg div.action svg.svelte-wzt2eg{height:20px;width:20px;fill:darkgrey}div#top-bar.svelte-wzt2eg div.action:hover svg.svelte-wzt2eg{fill:grey}div.dark-mode.svelte-wzt2eg div#top-bar div.action svg.svelte-wzt2eg{height:20px;width:20px;fill:grey}div.dark-mode.svelte-wzt2eg div#top-bar div.action:hover svg.svelte-wzt2eg{fill:darkgrey}div#main_moc_div.svelte-wzt2eg.svelte-wzt2eg{padding:initial;width:initial;height:initial;position:initial;overflow:auto;flex:1}div.dark-mode.svelte-wzt2eg.svelte-wzt2eg{color:#dcddde}div#scroll_up.svelte-wzt2eg.svelte-wzt2eg{justify-self:flex-end;display:none}div#scroll_up.svelte-wzt2eg.svelte-wzt2eg{cursor:pointer;color:darkgrey}div#scroll_up.svelte-wzt2eg svg.svelte-wzt2eg{transform:rotate(-90deg);height:20px}div.light-mode.svelte-wzt2eg div#scroll_up svg.svelte-wzt2eg{fill:darkgray}div.light-mode.svelte-wzt2eg div#scroll_up:hover svg.svelte-wzt2eg{fill:gray}div.dark-mode.svelte-wzt2eg div#scroll_up svg.svelte-wzt2eg{fill:gray}div.dark-mode.svelte-wzt2eg div#scroll_up:hover svg.svelte-wzt2eg{fill:darkgray}a.link.svelte-wzt2eg.svelte-wzt2eg{cursor:pointer}ul.svelte-wzt2eg.svelte-wzt2eg{padding-left:0}svg.path-arrow.svelte-wzt2eg.svelte-wzt2eg{margin-right:2px;margin-left:2px;display:inline;width:24px;height:0.7em}div.dark-mode.svelte-wzt2eg svg.path-arrow.svelte-wzt2eg{fill:lightgray}.errors.svelte-wzt2eg.svelte-wzt2eg{padding:10px;width:initial;height:initial;position:initial;overflow-y:initial;overflow-wrap:initial}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$3(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[24] = list[i];
	return child_ctx;
}

function get_each_context_1$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[27] = list[i];
	child_ctx[29] = i;
	return child_ctx;
}

// (169:8) {:else}
function create_else_block(ctx) {
	let t0;
	let br;
	let t1;
	let ul;
	let descendants;
	let current;
	let each_value = /*paths*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));
	}

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[9],
				app: /*app*/ ctx[8],
				view: /*view*/ ctx[0],
				note_path: /*view*/ ctx[0].open_file_path,
				indentation: 0,
				expandMan: /*expandMan*/ ctx[11]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t0 = space();
			br = element("br");
			t1 = space();
			ul = element("ul");
			create_component(descendants.$$.fragment);
			add_location(br, file$3, 223, 12, 9854);
			attr_dev(ul, "class", "svelte-wzt2eg");
			add_location(ul, file$3, 224, 12, 9873);
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, t0, anchor);
			insert_dev(target, br, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, ul, anchor);
			mount_component(descendants, ul, null);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths, LINKED_FROM, LINKED_TO, LINKED_BOTH, GetDisplayName, db, NavigateToFile, app*/ 770) {
				each_value = /*paths*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$3(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$3(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(t0.parentNode, t0);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const descendants_changes = {};
			if (dirty & /*view*/ 1) descendants_changes.view = /*view*/ ctx[0];
			if (dirty & /*view*/ 1) descendants_changes.note_path = /*view*/ ctx[0].open_file_path;
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(br);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(ul);
			destroy_component(descendants);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block.name,
		type: "else",
		source: "(169:8) {:else}",
		ctx
	});

	return block;
}

// (152:36) 
function create_if_block_2(ctx) {
	let t0;
	let a0;
	let t1_value = GetDisplayName(/*cn_path*/ ctx[10], /*db*/ ctx[9]) + "";
	let t1;
	let t2;
	let br0;
	let br1;
	let t3;
	let a1;
	let t5;
	let br2;
	let t6;
	let nolinkimage;
	let current;
	let mounted;
	let dispose;
	nolinkimage = new NoLinkImage({ $$inline: true });

	const block = {
		c: function create() {
			t0 = text("This file doesn't have any connections to ");
			a0 = element("a");
			t1 = text(t1_value);
			t2 = text(".");
			br0 = element("br");
			br1 = element("br");
			t3 = text(" Link it to a file that is part of your Map of\n            Content. Then\n            ");
			a1 = element("a");
			a1.textContent = "update";
			t5 = text("\n            your Map of Content and watch it grow!");
			br2 = element("br");
			t6 = space();
			create_component(nolinkimage.$$.fragment);
			attr_dev(a0, "class", "link svelte-wzt2eg");
			attr_dev(a0, "title", /*cn_path*/ ctx[10]);
			add_location(a0, file$3, 152, 54, 6701);
			add_location(br0, file$3, 158, 14, 6916);
			add_location(br1, file$3, 158, 20, 6922);
			attr_dev(a1, "class", "link svelte-wzt2eg");
			add_location(a1, file$3, 160, 12, 7013);
			add_location(br2, file$3, 166, 50, 7205);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t0, anchor);
			insert_dev(target, a0, anchor);
			append_dev(a0, t1);
			insert_dev(target, t2, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t3, anchor);
			insert_dev(target, a1, anchor);
			insert_dev(target, t5, anchor);
			insert_dev(target, br2, anchor);
			insert_dev(target, t6, anchor);
			mount_component(nolinkimage, target, anchor);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(a0, "click", /*click_handler_5*/ ctx[19], false, false, false),
					listen_dev(a1, "click", /*click_handler_6*/ ctx[20], false, false, false)
				];

				mounted = true;
			}
		},
		p: noop,
		i: function intro(local) {
			if (current) return;
			transition_in(nolinkimage.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(nolinkimage.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a0);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t3);
			if (detaching) detach_dev(a1);
			if (detaching) detach_dev(t5);
			if (detaching) detach_dev(br2);
			if (detaching) detach_dev(t6);
			destroy_component(nolinkimage, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2.name,
		type: "if",
		source: "(152:36) ",
		ctx
	});

	return block;
}

// (148:32) 
function create_if_block_1(ctx) {
	let div;
	let raw_value = /*errors*/ ctx[2][0] + "";

	const block = {
		c: function create() {
			div = element("div");
			attr_dev(div, "class", "errors svelte-wzt2eg");
			add_location(div, file$3, 148, 12, 6536);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			div.innerHTML = raw_value;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*errors*/ 4 && raw_value !== (raw_value = /*errors*/ ctx[2][0] + "")) div.innerHTML = raw_value;		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1.name,
		type: "if",
		source: "(148:32) ",
		ctx
	});

	return block;
}

// (146:8) {#if settings.get("do_show_update_notice")}
function create_if_block(ctx) {
	let updatenotice;
	let current;

	updatenotice = new UpdateNotice({
			props: {
				app: /*app*/ ctx[8],
				view: /*view*/ ctx[0],
				plugin: /*plugin*/ ctx[7]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			create_component(updatenotice.$$.fragment);
		},
		m: function mount(target, anchor) {
			mount_component(updatenotice, target, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			const updatenotice_changes = {};
			if (dirty & /*view*/ 1) updatenotice_changes.view = /*view*/ ctx[0];
			updatenotice.$set(updatenotice_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(updatenotice.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(updatenotice.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_component(updatenotice, detaching);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block.name,
		type: "if",
		source: "(146:8) {#if settings.get(\\\"do_show_update_notice\\\")}",
		ctx
	});

	return block;
}

// (177:24) {:else}
function create_else_block_1(ctx) {
	let a;
	let t_value = GetDisplayName(/*pathitem*/ ctx[27][0], /*db*/ ctx[9]) + "";
	let t;
	let a_title_value;
	let mounted;
	let dispose;

	function click_handler_7(...args) {
		return /*click_handler_7*/ ctx[21](/*pathitem*/ ctx[27], ...args);
	}

	const block = {
		c: function create() {
			a = element("a");
			t = text(t_value);
			attr_dev(a, "class", "link svelte-wzt2eg");
			attr_dev(a, "title", a_title_value = /*pathitem*/ ctx[27][0]);
			add_location(a, file$3, 177, 28, 7637);
		},
		m: function mount(target, anchor) {
			insert_dev(target, a, anchor);
			append_dev(a, t);

			if (!mounted) {
				dispose = listen_dev(a, "click", click_handler_7, false, false, false);
				mounted = true;
			}
		},
		p: function update(new_ctx, dirty) {
			ctx = new_ctx;
			if (dirty & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[27][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty & /*paths*/ 2 && a_title_value !== (a_title_value = /*pathitem*/ ctx[27][0])) {
				attr_dev(a, "title", a_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1.name,
		type: "else",
		source: "(177:24) {:else}",
		ctx
	});

	return block;
}

// (173:24) {#if i == 0}
function create_if_block_6(ctx) {
	let span;
	let t_value = GetDisplayName(/*pathitem*/ ctx[27][0], /*db*/ ctx[9]) + "";
	let t;
	let span_title_value;

	const block = {
		c: function create() {
			span = element("span");
			t = text(t_value);
			attr_dev(span, "title", span_title_value = /*pathitem*/ ctx[27][0]);
			add_location(span, file$3, 173, 28, 7448);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[27][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty & /*paths*/ 2 && span_title_value !== (span_title_value = /*pathitem*/ ctx[27][0])) {
				attr_dev(span, "title", span_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_6.name,
		type: "if",
		source: "(173:24) {#if i == 0}",
		ctx
	});

	return block;
}

// (208:61) 
function create_if_block_5(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 9 0 L 0 7.5214844 L 9 15 L 9.6445312 14.236328 L 2.1152344 8 L 21.882812 8 L 14.355469 14.234375 L 15 15 L 24 7.4785156 L 15 0 L 14.355469 0.76367188 L 21.884766 7 L 2.1171875 7 L 9.6445312 0.765625 L 9 0 z ");
			add_location(path, file$3, 213, 32, 9391);
			attr_dev(svg, "class", "path-arrow svelte-wzt2eg");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 208, 28, 9151);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_5.name,
		type: "if",
		source: "(208:61) ",
		ctx
	});

	return block;
}

// (198:59) 
function create_if_block_4(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 2.117,7 9.644,0.765 9,0 0,7.521 9,15 9.645,14.236 2.116,8 H 24 V 7 Z");
			add_location(path, file$3, 203, 32, 8874);
			attr_dev(svg, "class", "path-arrow svelte-wzt2eg");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 198, 28, 8634);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4.name,
		type: "if",
		source: "(198:59) ",
		ctx
	});

	return block;
}

// (188:24) {#if pathitem[1] == LINKED_FROM}
function create_if_block_3(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", " M 21.883,8 14.356,14.235 15,15 24,7.479 15,0 14.355,0.764 21.884,7 H 0 v 1 z");
			add_location(path, file$3, 193, 32, 8352);
			attr_dev(svg, "class", "path-arrow svelte-wzt2eg");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 188, 28, 8112);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3.name,
		type: "if",
		source: "(188:24) {#if pathitem[1] == LINKED_FROM}",
		ctx
	});

	return block;
}

// (172:20) {#each path.reverse() as pathitem, i}
function create_each_block_1$1(ctx) {
	let t;
	let if_block1_anchor;

	function select_block_type_1(ctx, dirty) {
		if (/*i*/ ctx[29] == 0) return create_if_block_6;
		return create_else_block_1;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block0 = current_block_type(ctx);

	function select_block_type_2(ctx, dirty) {
		if (/*pathitem*/ ctx[27][1] == LINKED_FROM) return create_if_block_3;
		if (/*pathitem*/ ctx[27][1] == LINKED_TO) return create_if_block_4;
		if (/*pathitem*/ ctx[27][1] == LINKED_BOTH) return create_if_block_5;
	}

	let current_block_type_1 = select_block_type_2(ctx);
	let if_block1 = current_block_type_1 && current_block_type_1(ctx);

	const block = {
		c: function create() {
			if_block0.c();
			t = space();
			if (if_block1) if_block1.c();
			if_block1_anchor = empty();
		},
		m: function mount(target, anchor) {
			if_block0.m(target, anchor);
			insert_dev(target, t, anchor);
			if (if_block1) if_block1.m(target, anchor);
			insert_dev(target, if_block1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if_block0.p(ctx, dirty);

			if (current_block_type_1 !== (current_block_type_1 = select_block_type_2(ctx))) {
				if (if_block1) if_block1.d(1);
				if_block1 = current_block_type_1 && current_block_type_1(ctx);

				if (if_block1) {
					if_block1.c();
					if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
				}
			}
		},
		d: function destroy(detaching) {
			if_block0.d(detaching);
			if (detaching) detach_dev(t);

			if (if_block1) {
				if_block1.d(detaching);
			}

			if (detaching) detach_dev(if_block1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1$1.name,
		type: "each",
		source: "(172:20) {#each path.reverse() as pathitem, i}",
		ctx
	});

	return block;
}

// (170:12) {#each paths as path}
function create_each_block$3(ctx) {
	let div;
	let t;
	let br;
	let each_value_1 = /*path*/ ctx[24].reverse();
	validate_each_argument(each_value_1);
	let each_blocks = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks[i] = create_each_block_1$1(get_each_context_1$1(ctx, each_value_1, i));
	}

	const block = {
		c: function create() {
			div = element("div");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t = space();
			br = element("br");
			attr_dev(div, "class", "path");
			add_location(div, file$3, 170, 16, 7306);
			add_location(br, file$3, 220, 16, 9814);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(div, null);
			}

			insert_dev(target, t, anchor);
			insert_dev(target, br, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths, LINKED_FROM, LINKED_TO, LINKED_BOTH, GetDisplayName, db, NavigateToFile, app*/ 770) {
				each_value_1 = /*path*/ ctx[24].reverse();
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1$1(ctx, each_value_1, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block_1$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(div, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value_1.length;
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(t);
			if (detaching) detach_dev(br);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$3.name,
		type: "each",
		source: "(170:12) {#each paths as path}",
		ctx
	});

	return block;
}

function create_fragment$3(ctx) {
	let div8;
	let div6;
	let div0;
	let svg0;
	let path0;
	let svg1;
	let path1;
	let div0_title_value;
	let t0;
	let div4;
	let div1;
	let svg2;
	let path2;
	let t1;
	let div2;
	let svg3;
	let path3;
	let t2;
	let div3;
	let svg4;
	let path4;
	let t3;
	let div5;
	let svg5;
	let path5;
	let t4;
	let div7;
	let show_if;
	let current_block_type_index;
	let if_block;
	let current;
	let mounted;
	let dispose;
	const if_block_creators = [create_if_block, create_if_block_1, create_if_block_2, create_else_block];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (show_if == null) show_if = !!/*settings*/ ctx[12].get("do_show_update_notice");
		if (show_if) return 0;
		if (/*errors*/ ctx[2].length) return 1;
		if (/*paths*/ ctx[1].length == 0) return 2;
		return 3;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			div8 = element("div");
			div6 = element("div");
			div0 = element("div");
			svg0 = svg_element("svg");
			path0 = svg_element("path");
			svg1 = svg_element("svg");
			path1 = svg_element("path");
			t0 = space();
			div4 = element("div");
			div1 = element("div");
			svg2 = svg_element("svg");
			path2 = svg_element("path");
			t1 = space();
			div2 = element("div");
			svg3 = svg_element("svg");
			path3 = svg_element("path");
			t2 = space();
			div3 = element("div");
			svg4 = svg_element("svg");
			path4 = svg_element("path");
			t3 = space();
			div5 = element("div");
			svg5 = svg_element("svg");
			path5 = svg_element("path");
			t4 = space();
			div7 = element("div");
			if_block.c();
			attr_dev(path0, "d", "M18 6c0 2.972-2.164 5.433-5 5.91v8.09h-2v-8.089c-2.836-.477-5-2.938-5-5.911 0-3.314 2.687-6 6-6s6 2.687 6 6zm-2 0c0-2.206-1.794-4-4-4s-4 1.794-4 4 1.794 4 4 4 4-1.794 4-4zm-5.618 2.098c2.339 1.84 5.563-.722 3.858-3.539.313 2.237-1.956 4.03-3.858 3.539zm4.618 8.195v2.052l.438.107c1.706.493 2.496 1.027 2.507 1.547-.011.52-.801 1.054-2.507 1.547-2.097.606-4.786.604-6.874.001-1.695-.489-2.515-1.021-2.515-1.547s.82-1.058 2.516-1.548l.436-.106v-2.052c-2.932.593-5.001 2.028-5.001 3.706 0 2.209 3.581 4 8 4s8-1.791 8-4c0-1.678-2.069-3.113-5-3.707z");
			add_location(path0, file$3, 47, 16, 1428);
			attr_dev(svg0, "id", "not-pinned");
			attr_dev(svg0, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg0, "viewBox", "0 0 24 24");
			attr_dev(svg0, "class", "svelte-wzt2eg");
			add_location(svg0, file$3, 42, 12, 1274);
			attr_dev(path1, "d", "M 12,2 C 8.687,2 6,4.687 6,8 c 0,2.972 2.164,5.433 5,5.91 V 20 h 2 v -6.089 c 2.836,-0.477 5,-2.938 5,-5.91 C 18,4.687 15.313,2 12,2 Z M 11.293,6.508 C 10.744,7.158 9.87,7.308 9.34,6.841 8.81,6.374 8.824,5.469 9.374,4.819 9.922,4.169 10.796,4.02 11.326,4.486 c 0.53,0.467 0.515,1.372 -0.033,2.022 z M 20,20 c 0,2.209 -3.581,4 -8,4 -4.419,0 -8,-1.791 -8,-4 0,-1.678 2.069,-3.113 5,-3.707 v 2.052 L 8.564,18.451 C 6.869,18.942 6.048,19.474 6.048,20 c 0,0.526 0.82,1.058 2.516,1.548 2.088,0.603 4.777,0.605 6.874,-10e-4 C 17.144,21.054 17.934,20.52 17.945,20 17.934,19.48 17.144,18.946 15.438,18.453 L 15,18.346 v -2.052 c 2.931,0.593 5,2.028 5,3.706 z");
			add_location(path1, file$3, 55, 17, 2227);
			attr_dev(svg1, "id", "pinned");
			attr_dev(svg1, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg1, "width", "24");
			attr_dev(svg1, "height", "24");
			attr_dev(svg1, "viewBox", "0 0 24 24");
			attr_dev(svg1, "class", "svelte-wzt2eg");
			add_location(svg1, file$3, 49, 18, 2035);
			attr_dev(div0, "id", "pin-file");
			attr_dev(div0, "class", "action is-pinned svelte-wzt2eg");

			attr_dev(div0, "title", div0_title_value = /*is_pinned*/ ctx[6]
			? "Unpin this file"
			: "Pin this file");

			toggle_class(div0, "is-pinned", /*is_pinned*/ ctx[6]);
			add_location(div0, file$3, 30, 8, 885);
			attr_dev(path2, "d", "M23 12c0 1.042-.154 2.045-.425 3h-2.101c.335-.94.526-1.947.526-3 0-4.962-4.037-9-9-9-1.706 0-3.296.484-4.655 1.314l1.858 2.686h-6.994l2.152-7 1.849 2.673c1.684-1.049 3.659-1.673 5.79-1.673 6.074 0 11 4.925 11 11zm-6.354 7.692c-1.357.826-2.944 1.308-4.646 1.308-4.962 0-9-4.038-9-9 0-1.053.191-2.06.525-3h-2.1c-.271.955-.425 1.958-.425 3 0 6.075 4.925 11 11 11 2.127 0 4.099-.621 5.78-1.667l1.853 2.667 2.152-6.989h-6.994l1.855 2.681z");
			add_location(path2, file$3, 70, 20, 3319);
			attr_dev(svg2, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg2, "viewBox", "0 0 24 24");
			attr_dev(svg2, "class", "svelte-wzt2eg");
			add_location(svg2, file$3, 69, 16, 3238);
			attr_dev(div1, "id", "update-moc");
			attr_dev(div1, "class", "action svelte-wzt2eg");
			attr_dev(div1, "title", "Update the Map of Content");
			add_location(div1, file$3, 61, 12, 3004);
			attr_dev(path3, "d", "M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z");
			add_location(path3, file$3, 84, 20, 4187);
			attr_dev(svg3, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg3, "viewBox", "0 0 24 24");
			attr_dev(svg3, "class", "svelte-wzt2eg");
			add_location(svg3, file$3, 83, 16, 4106);
			attr_dev(div2, "id", "minus-expand");
			attr_dev(div2, "class", "action svelte-wzt2eg");
			attr_dev(div2, "title", "Show fewer descendants");
			add_location(div2, file$3, 75, 12, 3864);
			attr_dev(path4, "d", "M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z");
			add_location(path4, file$3, 103, 20, 4922);
			attr_dev(svg4, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg4, "viewBox", "0 0 24 24");
			attr_dev(svg4, "fill-rule", "evenodd");
			attr_dev(svg4, "clip-rule", "evenodd");
			attr_dev(svg4, "class", "svelte-wzt2eg");
			add_location(svg4, file$3, 97, 16, 4704);
			attr_dev(div3, "id", "plus-expand");
			attr_dev(div3, "class", "action svelte-wzt2eg");
			attr_dev(div3, "title", "Show more descendants");
			add_location(div3, file$3, 89, 12, 4466);
			attr_dev(div4, "id", "top-bar-flex");
			attr_dev(div4, "class", "svelte-wzt2eg");
			add_location(div4, file$3, 60, 8, 2968);
			attr_dev(path5, "d", "M15 5.829l6.171 6.171-6.171 6.171v-3.171h-13v-6h13v-3.171zm-2-4.829v6h-13v10h13v6l11-11-11-11z");
			add_location(path5, file$3, 121, 17, 5578);
			attr_dev(svg5, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg5, "viewBox", "0 0 24 24");
			attr_dev(svg5, "class", "svelte-wzt2eg");
			add_location(svg5, file$3, 118, 12, 5468);
			attr_dev(div5, "id", "scroll_up");
			attr_dev(div5, "title", "Scroll to top");
			attr_dev(div5, "class", "action svelte-wzt2eg");
			add_location(div5, file$3, 109, 8, 5230);
			attr_dev(div6, "id", "top-bar");
			attr_dev(div6, "class", "svelte-wzt2eg");
			add_location(div6, file$3, 29, 4, 858);
			attr_dev(div7, "id", "main_moc_div");
			attr_dev(div7, "class", "svelte-wzt2eg");
			add_location(div7, file$3, 127, 4, 5771);
			attr_dev(div8, "id", "all-container");

			attr_dev(div8, "class", "" + (null_to_empty(document.body.classList.contains("theme-dark")
			? "dark-mode"
			: "light-mode") + " svelte-wzt2eg"));

			add_location(div8, file$3, 23, 0, 720);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div8, anchor);
			append_dev(div8, div6);
			append_dev(div6, div0);
			append_dev(div0, svg0);
			append_dev(svg0, path0);
			append_dev(div0, svg1);
			append_dev(svg1, path1);
			append_dev(div6, t0);
			append_dev(div6, div4);
			append_dev(div4, div1);
			append_dev(div1, svg2);
			append_dev(svg2, path2);
			append_dev(div4, t1);
			append_dev(div4, div2);
			append_dev(div2, svg3);
			append_dev(svg3, path3);
			append_dev(div4, t2);
			append_dev(div4, div3);
			append_dev(div3, svg4);
			append_dev(svg4, path4);
			append_dev(div6, t3);
			append_dev(div6, div5);
			append_dev(div5, svg5);
			append_dev(svg5, path5);
			/*div5_binding*/ ctx[17](div5);
			append_dev(div8, t4);
			append_dev(div8, div7);
			if_blocks[current_block_type_index].m(div7, null);
			/*div7_binding*/ ctx[22](div7);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(div0, "click", /*click_handler*/ ctx[13], false, false, false),
					listen_dev(div1, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(div2, "click", /*click_handler_2*/ ctx[15], false, false, false),
					listen_dev(div3, "click", /*click_handler_3*/ ctx[16], false, false, false),
					listen_dev(div5, "click", /*click_handler_4*/ ctx[18], false, false, false),
					listen_dev(div7, "scroll", /*scroll_handler*/ ctx[23], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (!current || dirty & /*is_pinned*/ 64 && div0_title_value !== (div0_title_value = /*is_pinned*/ ctx[6]
			? "Unpin this file"
			: "Pin this file")) {
				attr_dev(div0, "title", div0_title_value);
			}

			if (dirty & /*is_pinned*/ 64) {
				toggle_class(div0, "is-pinned", /*is_pinned*/ ctx[6]);
			}

			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(div7, null);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div8);
			/*div5_binding*/ ctx[17](null);
			if_blocks[current_block_type_index].d();
			/*div7_binding*/ ctx[22](null);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$3.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$3($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('View', slots, []);
	
	
	let { view } = $$props;
	let { paths } = $$props;
	let { errors } = $$props;
	let plugin = view.plugin;
	let app = plugin.app;
	let db = plugin.db;
	let cn_path = plugin.settings.get("CN_path");
	let expandMan = new expandManager();
	let scroll_up_div;
	let settings = plugin.settings;
	let main_div;
	let scroll_up_div_already_visible = false;
	let is_pinned = false;
	const writable_props = ['view', 'paths', 'errors'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<View> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		$$invalidate(0, view.is_pinned = !view.is_pinned, view);
		$$invalidate(6, is_pinned = !is_pinned);

		if (view.is_pinned) ;
	};

	const click_handler_1 = () => {
		db.update();
	};

	const click_handler_2 = () => {
		expandMan.contract();
	};

	const click_handler_3 = () => {
		expandMan.expand();
	};

	function div5_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			scroll_up_div = $$value;
			$$invalidate(3, scroll_up_div);
		});
	}

	const click_handler_4 = () => {
		$$invalidate(4, main_div.scrollTop = 0, main_div);
	};

	const click_handler_5 = event => NavigateToFile(app, cn_path, event);

	const click_handler_6 = () => {
		db.update();
	};

	const click_handler_7 = (pathitem, event) => NavigateToFile(app, pathitem[0], event);

	function div7_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			main_div = $$value;
			$$invalidate(4, main_div);
		});
	}

	const scroll_handler = e => {
		if (e.target.scrollTop > 30 && !scroll_up_div_already_visible) {
			$$invalidate(3, scroll_up_div.style.display = "block", scroll_up_div);
			$$invalidate(5, scroll_up_div_already_visible = true);
		} else //hide the arrow if user scrolls back to the top
		if (e.target.scrollTop <= 30 && scroll_up_div_already_visible) {
			$$invalidate(3, scroll_up_div.style.display = "none", scroll_up_div);
			$$invalidate(5, scroll_up_div_already_visible = false);
		}
	};

	$$self.$$set = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('paths' in $$props) $$invalidate(1, paths = $$props.paths);
		if ('errors' in $$props) $$invalidate(2, errors = $$props.errors);
	};

	$$self.$capture_state = () => ({
		LINKED_BOTH,
		LINKED_TO,
		LINKED_FROM,
		GetDisplayName,
		IsCtrlPressed,
		NavigateToFile,
		Log,
		NoLinkImage,
		Descendants,
		UpdateNotice,
		expandManager,
		view,
		paths,
		errors,
		plugin,
		app,
		db,
		cn_path,
		expandMan,
		scroll_up_div,
		settings,
		main_div,
		scroll_up_div_already_visible,
		is_pinned
	});

	$$self.$inject_state = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('paths' in $$props) $$invalidate(1, paths = $$props.paths);
		if ('errors' in $$props) $$invalidate(2, errors = $$props.errors);
		if ('plugin' in $$props) $$invalidate(7, plugin = $$props.plugin);
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('db' in $$props) $$invalidate(9, db = $$props.db);
		if ('cn_path' in $$props) $$invalidate(10, cn_path = $$props.cn_path);
		if ('expandMan' in $$props) $$invalidate(11, expandMan = $$props.expandMan);
		if ('scroll_up_div' in $$props) $$invalidate(3, scroll_up_div = $$props.scroll_up_div);
		if ('settings' in $$props) $$invalidate(12, settings = $$props.settings);
		if ('main_div' in $$props) $$invalidate(4, main_div = $$props.main_div);
		if ('scroll_up_div_already_visible' in $$props) $$invalidate(5, scroll_up_div_already_visible = $$props.scroll_up_div_already_visible);
		if ('is_pinned' in $$props) $$invalidate(6, is_pinned = $$props.is_pinned);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		view,
		paths,
		errors,
		scroll_up_div,
		main_div,
		scroll_up_div_already_visible,
		is_pinned,
		plugin,
		app,
		db,
		cn_path,
		expandMan,
		settings,
		click_handler,
		click_handler_1,
		click_handler_2,
		click_handler_3,
		div5_binding,
		click_handler_4,
		click_handler_5,
		click_handler_6,
		click_handler_7,
		div7_binding,
		scroll_handler
	];
}

class View extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$3, create_fragment$3, safe_not_equal, { view: 0, paths: 1, errors: 2 }, add_css$3);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "View",
			options,
			id: create_fragment$3.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*view*/ ctx[0] === undefined && !('view' in props)) {
			console.warn("<View> was created without expected prop 'view'");
		}

		if (/*paths*/ ctx[1] === undefined && !('paths' in props)) {
			console.warn("<View> was created without expected prop 'paths'");
		}

		if (/*errors*/ ctx[2] === undefined && !('errors' in props)) {
			console.warn("<View> was created without expected prop 'errors'");
		}
	}

	get view() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get paths() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set paths(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get errors() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set errors(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

class MOCView extends obsidian.ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.max_indent = 5;
        this.is_pinned = false;
        this.plugin = plugin;
        this.db = this.plugin.db;
        this.settings = plugin.settings;
        this.app = this.plugin.app;
        // register with the main class
        this.plugin.registerViewInstance(this);
        this.plugin.app.workspace.onLayoutReady(() => this.init());
        // rerender on css change to adapt to dark/light mode changes
        // TODO pass command to svelte, not recreate it
        this.plugin.app.workspace.on("css-change", () => {
            this.rerender();
        });
    }
    init() {
        // update the path view every time a file is opened
        this.registerEvent(this.app.workspace.on("file-open", (file) => { if (!this.is_pinned) {
            this.monitorNote();
            this.rerender();
        } }));
        this.monitorNote();
        this.rerender();
    }
    async onOpen() {
    }
    /** reload paths and recreate the svelte instance */
    rerender() {
        // destroy old pathview/errorview instance
        // set symbol to undefined to avoid "This component has already been destroyed" message
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        let errors = [];
        if (this.db.database_updating) {
            errors.push("Updating...");
        }
        else if (!this.db.database_complete) {
            errors.push(`Your Map of Content couldn't be created.<br><br> Make sure your Central Note path '${this.settings.get("CN_path")}' is correct. You can change this path in the settings tab.`);
        }
        else if (this.app.workspace.getActiveFile() == null) {
            errors.push("No file is open");
        }
        else if (this.settings.isExludedFile(this.app.workspace.getActiveFile())) {
            errors.push("This file has been excluded from the Map of Content.");
        }
        else {
            this.open_file_path = this.app.workspace.getActiveFile().path;
            if (this.db.getNoteFromPath(this.open_file_path) == undefined) {
                errors.push("Updating...");
                this.db.update(true);
            }
        }
        let paths = [];
        if (errors.length == 0) {
            let all_paths = this.db.findPaths(this.open_file_path);
            if (all_paths.length == 0) ;
            paths = all_paths.map((p) => p.items.slice());
        }
        else {
            this.open_file_path = "None";
            paths = [];
        }
        this._app = new View({
            target: this.contentEl,
            props: { view: this, paths: paths, errors: errors },
        });
    }
    onClose() {
        if (this._app) {
            this._app.$destroy();
            this._app = undefined; // set symbol to undefined to avoid "This component has already been destroyed" message
        }
        this.plugin.unregisterViewInstance(this);
        return Promise.resolve();
    }
    async monitorNote() {
        let rerender = false;
        let active_file = this.app.workspace.getActiveFile();
        if (active_file == null) {
            return;
        }
        if (!this.settings.get("auto_update_on_file_change")) {
            return;
        }
        if (active_file == null || this.settings.isExludedFile(active_file)) {
            return;
        }
        if (this.monitoring_note && this.app.metadataCache.getCache(this.monitoring_note) == undefined) {
            rerender = true;
        }
        let path = active_file.path;
        Log("Old monitoring note: " + this.monitoring_note);
        if (this.monitoring_note && this.app.metadataCache.getCache(this.monitoring_note)) {
            if (!(path === this.monitoring_note)) {
                let now_links = this.db.getLinksFromNote(this.monitoring_note);
                if (!(JSON.stringify(now_links) == JSON.stringify(this.monitoring_note_links))) {
                    rerender = true;
                }
            }
        }
        this.monitoring_note = path;
        this.monitoring_note_links = this.db.getLinksFromNote(path);
        if (rerender) {
            this.db.update(true);
        }
    }
    getViewType() {
        return MOC_VIEW_TYPE;
    }
    getDisplayText() {
        return "Map of Content";
    }
    getIcon() {
        return "stacked-levels";
    }
}

/* src/svelte/settings/ExcludedFolders.svelte generated by Svelte v3.42.1 */
const file$2 = "src/svelte/settings/ExcludedFolders.svelte";

function add_css$2(target) {
	append_styles(target, "svelte-1a0h8f5", ".svelte-1a0h8f5{font-size:1em}h2.svelte-1a0h8f5{text-align:left}div#exluded-folders.svelte-1a0h8f5{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-1a0h8f5{width:300px}#excluded-select.svelte-1a0h8f5{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-1a0h8f5{height:300px;width:300px}div#currently-excluded.svelte-1a0h8f5{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-1a0h8f5{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGb2xkZXJzLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUEyS0ksZUFBRSxDQUFBLEFBQ0UsU0FBUyxDQUFFLEdBQUcsQUFDbEIsQ0FBQSxBQUVBLEVBQUUsZUFBQyxDQUFBLEFBQ0MsVUFBVSxDQUFFLElBQUksQUFDcEIsQ0FBQSxBQUVBLEdBQUcsZ0JBQWdCLGVBQUMsQ0FBQSxBQUNoQixPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxJQUFJLENBQ2YsVUFBVSxDQUFFLElBQUksQUFDcEIsQ0FBQSxBQUVBLEdBQUcsY0FBYyxlQUFDLENBQUEsQUFDZCxLQUFLLENBQUUsS0FBSyxBQUNoQixDQUFBLEFBRUEsZ0JBQWdCLGVBQUMsQ0FBQSxBQUNiLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQ0FDWixTQUFTLENBQUUsR0FBRyxDQUNkLFFBQVEsQ0FBRSxJQUFJLEFBQ2xCLENBQUEsQUFFQSxtQkFBbUIsZUFBQyxDQUFBLEFBQ2hCLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQUFDaEIsQ0FBQSxBQUNBLEdBQUcsbUJBQW1CLGVBQUMsQ0FBQSxBQUNuQixLQUFLLENBQUUsS0FBSyxDQUNaLFVBQVUsQ0FBRSxLQUFLLENBQ2pCLFFBQVEsQ0FBRSxNQUFNLEFBQ3BCLENBQUEsQUFDQSxHQUFHLHdCQUF3QixlQUFDLENBQUEsQUFDeEIsUUFBUSxDQUFFLElBQUksQ0FDZCxVQUFVLENBQUUsS0FBSyxBQUNyQixDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkV4Y2x1ZGVkRm9sZGVycy5zdmVsdGUiXX0= */");
}

function get_each_context$2(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

function get_each_context_1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[23] = list[i];
	return child_ctx;
}

// (107:12) {#each all_folders as folder_path}
function create_each_block_1(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*folder_path*/ ctx[23];
			option.value = option.__value;
			attr_dev(option, "class", "svelte-1a0h8f5");
			add_location(option, file$2, 107, 16, 3303);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1.name,
		type: "each",
		source: "(107:12) {#each all_folders as folder_path}",
		ctx
	});

	return block;
}

// (144:16) {#each excluded_files as file_path}
function create_each_block$2(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-1a0h8f5");
			add_location(li, file$2, 144, 20, 4334);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$2.name,
		type: "each",
		source: "(144:16) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$2(ctx) {
	let h2;
	let t1;
	let div4;
	let div0;
	let select;
	let t2;
	let div1;
	let label;
	let t4;
	let input0;
	let t5;
	let datalist;
	let br0;
	let t6;
	let br1;
	let t7;
	let input1;
	let br2;
	let t8;
	let input2;
	let br3;
	let br4;
	let t9;
	let div3;
	let t10;
	let t11_value = /*excluded_files*/ ctx[1].length + "";
	let t11;
	let t12;
	let input3;
	let input3_value_value;
	let t13;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value_1 = /*all_folders*/ ctx[5];
	validate_each_argument(each_value_1);
	let each_blocks_1 = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
	}

	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded folders";
			t1 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t2 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a folder:";
			t4 = space();
			input0 = element("input");
			t5 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].c();
			}

			br0 = element("br");
			t6 = space();
			br1 = element("br");
			t7 = space();
			input1 = element("input");
			br2 = element("br");
			t8 = space();
			input2 = element("input");
			br3 = element("br");
			br4 = element("br");
			t9 = space();
			div3 = element("div");
			t10 = text("Currently excluded files: ");
			t11 = text(t11_value);
			t12 = space();
			input3 = element("input");
			t13 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-1a0h8f5");
			add_location(h2, file$2, 82, 0, 2549);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-1a0h8f5");
			add_location(select, file$2, 86, 8, 2640);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-1a0h8f5");
			add_location(div0, file$2, 85, 4, 2607);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-1a0h8f5");
			add_location(label, file$2, 95, 8, 2855);
			attr_dev(input0, "list", "exlude-folder");
			attr_dev(input0, "id", "Exluded-folders");
			attr_dev(input0, "type", "text");
			attr_dev(input0, "placeholder", "Start typing to see suggestions...");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-1a0h8f5");
			add_location(input0, file$2, 96, 8, 2909);
			attr_dev(datalist, "id", "exlude-folder");
			attr_dev(datalist, "class", "svelte-1a0h8f5");
			add_location(datalist, file$2, 105, 8, 3210);
			attr_dev(br0, "class", "svelte-1a0h8f5");
			add_location(br0, file$2, 109, 19, 3373);
			attr_dev(br1, "class", "svelte-1a0h8f5");
			add_location(br1, file$2, 110, 8, 3388);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-1a0h8f5");
			add_location(input1, file$2, 111, 8, 3403);
			attr_dev(br2, "class", "svelte-1a0h8f5");
			add_location(br2, file$2, 118, 10, 3566);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-1a0h8f5");
			add_location(input2, file$2, 119, 8, 3581);
			attr_dev(br3, "class", "svelte-1a0h8f5");
			add_location(br3, file$2, 126, 10, 3753);
			attr_dev(br4, "class", "svelte-1a0h8f5");
			add_location(br4, file$2, 126, 16, 3759);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-1a0h8f5");
			add_location(div1, file$2, 94, 4, 2817);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-1a0h8f5");
			add_location(input3, file$2, 130, 8, 3877);
			attr_dev(ul, "class", "svelte-1a0h8f5");
			add_location(ul, file$2, 142, 12, 4257);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-1a0h8f5");
			add_location(div2, file$2, 138, 8, 4118);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-1a0h8f5");
			add_location(div3, file$2, 128, 4, 3781);
			attr_dev(div4, "id", "exluded-folders");
			attr_dev(div4, "class", "svelte-1a0h8f5");
			add_location(div4, file$2, 84, 0, 2576);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[10](select);
			append_dev(div4, t2);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t4);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[11](input0);
			set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			append_dev(div1, t5);
			append_dev(div1, datalist);

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].m(datalist, null);
			}

			append_dev(div1, br0);
			append_dev(div1, t6);
			append_dev(div1, br1);
			append_dev(div1, t7);
			append_dev(div1, input1);
			append_dev(div1, br2);
			append_dev(div1, t8);
			append_dev(div1, input2);
			append_dev(div1, br3);
			append_dev(div1, br4);
			append_dev(div4, t9);
			append_dev(div4, div3);
			append_dev(div3, t10);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, input3);
			append_dev(div3, t13);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[12]),
					listen_dev(input1, "click", /*click_handler*/ ctx[13], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[15], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exlude_path_input_value*/ 4 && input0.value !== /*exlude_path_input_value*/ ctx[2]) {
				set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			}

			if (dirty & /*all_folders*/ 32) {
				each_value_1 = /*all_folders*/ ctx[5];
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1(ctx, each_value_1, i);

					if (each_blocks_1[i]) {
						each_blocks_1[i].p(child_ctx, dirty);
					} else {
						each_blocks_1[i] = create_each_block_1(child_ctx);
						each_blocks_1[i].c();
						each_blocks_1[i].m(datalist, null);
					}
				}

				for (; i < each_blocks_1.length; i += 1) {
					each_blocks_1[i].d(1);
				}

				each_blocks_1.length = each_value_1.length;
			}

			if (dirty & /*excluded_files*/ 2 && t11_value !== (t11_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t11, t11_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$2(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$2(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[10](null);
			/*input0_binding*/ ctx[11](null);
			destroy_each(each_blocks_1, detaching);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$2.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$2($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFolders', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let excluded_folders = plugin.settings.get("exluded_folders");

	// TODO show all exluded files in TextEdit not list
	// Select box based on https://www.c-sharpcorner.com/UploadFile/mahakgupta/add-and-remove-listbox-items-in-javascript/
	let all_folders = GetAllFolders(app);

	var list_options_no = 0;
	let excluded_files = allExcludedFiles();

	onMount(() => {
		// create select entries for all already excluded folders
		excluded_folders.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		let all_files = app.vault.getFiles().map(file => file.path);

		return all_files.filter(path_to_file => {
			return excluded_folders.some(path => path_to_file.startsWith(path));
		});
	}

	let exlude_path_input_value;
	let exlude_path_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.settings.set({ exluded_folders: excluded_folders });
	}

	function addValue() {
		if (!exlude_path_input_value) {
			return;
		}

		// Return if folder doesn't exist
		if (!all_folders.contains(exlude_path_input_value)) {
			alert("Please choose a folder from the list");
			return;
		}

		// Return if folder already on list
		if (excluded_folders.contains(exlude_path_input_value)) {
			$$invalidate(3, exlude_path_input.value = "", exlude_path_input);
			$$invalidate(2, exlude_path_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exlude_path_input_value, exlude_path_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		excluded_folders.push(exlude_path_input_value);

		// reset input field
		$$invalidate(3, exlude_path_input.value = "", exlude_path_input);

		$$invalidate(2, exlude_path_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				excluded_folders.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFolders> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exlude_path_input = $$value;
			$$invalidate(3, exlude_path_input);
		});
	}

	function input0_input_handler() {
		exlude_path_input_value = this.value;
		$$invalidate(2, exlude_path_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		Log,
		GetAllFolders,
		app,
		plugin,
		excludedlist,
		excluded_folders,
		all_folders,
		list_options_no,
		excluded_files,
		allExcludedFiles,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('excluded_folders' in $$props) excluded_folders = $$props.excluded_folders;
		if ('all_folders' in $$props) $$invalidate(5, all_folders = $$props.all_folders);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('exlude_path_input_value' in $$props) $$invalidate(2, exlude_path_input_value = $$props.exlude_path_input_value);
		if ('exlude_path_input' in $$props) $$invalidate(3, exlude_path_input = $$props.exlude_path_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		all_folders,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFolders extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$2, create_fragment$2, safe_not_equal, { app: 8, plugin: 9 }, add_css$2);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFolders",
			options,
			id: create_fragment$2.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[8] === undefined && !('app' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[9] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/settings/ExcludedFilenames.svelte generated by Svelte v3.42.1 */
const file$1 = "src/svelte/settings/ExcludedFilenames.svelte";

function add_css$1(target) {
	append_styles(target, "svelte-1wc77v2", ".svelte-1wc77v2{font-size:1em}h2.svelte-1wc77v2{text-align:left}div#exlude-filenames.svelte-1wc77v2{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-1wc77v2{width:300px}#excluded-select.svelte-1wc77v2{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-1wc77v2{height:300px;width:300px}div#currently-excluded.svelte-1wc77v2{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-1wc77v2{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGaWxlbmFtZXMuc3ZlbHRlIiwibWFwcGluZ3MiOiJBQXlLSSxlQUFFLENBQUEsQUFDRSxTQUFTLENBQUUsR0FBRyxBQUNsQixDQUFBLEFBRUEsRUFBRSxlQUFDLENBQUEsQUFDQyxVQUFVLENBQUUsSUFBSSxBQUNwQixDQUFBLEFBRUEsR0FBRyxpQkFBaUIsZUFBQyxDQUFBLEFBQ2pCLE9BQU8sQ0FBRSxJQUFJLENBQ2IsU0FBUyxDQUFFLElBQUksQ0FDZixVQUFVLENBQUUsSUFBSSxBQUNwQixDQUFBLEFBRUEsR0FBRyxjQUFjLGVBQUMsQ0FBQSxBQUNkLEtBQUssQ0FBRSxLQUFLLEFBQ2hCLENBQUEsQUFFQSxnQkFBZ0IsZUFBQyxDQUFBLEFBQ2IsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxDQUNaLFNBQVMsQ0FBRSxHQUFHLENBQ2QsUUFBUSxDQUFFLElBQUksQUFDbEIsQ0FBQSxBQUVBLG1CQUFtQixlQUFDLENBQUEsQUFDaEIsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxBQUNoQixDQUFBLEFBQ0EsR0FBRyxtQkFBbUIsZUFBQyxDQUFBLEFBQ25CLEtBQUssQ0FBRSxLQUFLLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsUUFBUSxDQUFFLE1BQU0sQUFDcEIsQ0FBQSxBQUNBLEdBQUcsd0JBQXdCLGVBQUMsQ0FBQSxBQUN4QixRQUFRLENBQUUsSUFBSSxDQUNkLFVBQVUsQ0FBRSxLQUFLLEFBQ3JCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRXhjbHVkZWRGaWxlbmFtZXMuc3ZlbHRlIl19 */");
}

function get_each_context$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

// (137:16) {#each excluded_files as file_path}
function create_each_block$1(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-1wc77v2");
			add_location(li, file$1, 137, 20, 4077);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$1.name,
		type: "each",
		source: "(137:16) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$1(ctx) {
	let h2;
	let t1;
	let br0;
	let br1;
	let t2;
	let div4;
	let div0;
	let select;
	let t3;
	let div1;
	let label;
	let t5;
	let input0;
	let t6;
	let br2;
	let t7;
	let br3;
	let t8;
	let input1;
	let br4;
	let t9;
	let input2;
	let br5;
	let br6;
	let t10;
	let div3;
	let t11;
	let t12_value = /*excluded_files*/ ctx[1].length + "";
	let t12;
	let t13;
	let input3;
	let input3_value_value;
	let t14;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded filenames";
			t1 = text("\nFilenames that contain these phrases will not be included in the Map of Content.\nThat also includes the file extension.");
			br0 = element("br");
			br1 = element("br");
			t2 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t3 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a phrase:";
			t5 = space();
			input0 = element("input");
			t6 = space();
			br2 = element("br");
			t7 = space();
			br3 = element("br");
			t8 = space();
			input1 = element("input");
			br4 = element("br");
			t9 = space();
			input2 = element("input");
			br5 = element("br");
			br6 = element("br");
			t10 = space();
			div3 = element("div");
			t11 = text("Currently excluded files: ");
			t12 = text(t12_value);
			t13 = space();
			input3 = element("input");
			t14 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-1wc77v2");
			add_location(h2, file$1, 79, 0, 2406);
			attr_dev(br0, "class", "svelte-1wc77v2");
			add_location(br0, file$1, 81, 38, 2553);
			attr_dev(br1, "class", "svelte-1wc77v2");
			add_location(br1, file$1, 81, 44, 2559);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-1wc77v2");
			add_location(select, file$1, 85, 8, 2632);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-1wc77v2");
			add_location(div0, file$1, 84, 4, 2599);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-1wc77v2");
			add_location(label, file$1, 94, 8, 2847);
			attr_dev(input0, "id", "Exluded-filenames");
			attr_dev(input0, "type", "text");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-1wc77v2");
			add_location(input0, file$1, 95, 8, 2901);
			attr_dev(br2, "class", "svelte-1wc77v2");
			add_location(br2, file$1, 102, 8, 3116);
			attr_dev(br3, "class", "svelte-1wc77v2");
			add_location(br3, file$1, 103, 8, 3131);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-1wc77v2");
			add_location(input1, file$1, 104, 8, 3146);
			attr_dev(br4, "class", "svelte-1wc77v2");
			add_location(br4, file$1, 111, 10, 3309);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-1wc77v2");
			add_location(input2, file$1, 112, 8, 3324);
			attr_dev(br5, "class", "svelte-1wc77v2");
			add_location(br5, file$1, 119, 10, 3496);
			attr_dev(br6, "class", "svelte-1wc77v2");
			add_location(br6, file$1, 119, 16, 3502);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-1wc77v2");
			add_location(div1, file$1, 93, 4, 2809);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-1wc77v2");
			add_location(input3, file$1, 123, 8, 3620);
			attr_dev(ul, "class", "svelte-1wc77v2");
			add_location(ul, file$1, 135, 12, 4000);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-1wc77v2");
			add_location(div2, file$1, 131, 8, 3861);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-1wc77v2");
			add_location(div3, file$1, 121, 4, 3524);
			attr_dev(div4, "id", "exlude-filenames");
			attr_dev(div4, "class", "svelte-1wc77v2");
			add_location(div4, file$1, 83, 0, 2567);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t2, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[9](select);
			append_dev(div4, t3);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t5);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[10](input0);
			set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			append_dev(div1, t6);
			append_dev(div1, br2);
			append_dev(div1, t7);
			append_dev(div1, br3);
			append_dev(div1, t8);
			append_dev(div1, input1);
			append_dev(div1, br4);
			append_dev(div1, t9);
			append_dev(div1, input2);
			append_dev(div1, br5);
			append_dev(div1, br6);
			append_dev(div4, t10);
			append_dev(div4, div3);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, t13);
			append_dev(div3, input3);
			append_dev(div3, t14);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[11]),
					listen_dev(input1, "click", /*click_handler*/ ctx[12], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[13], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[14], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exclude_phrase_input_value*/ 4 && input0.value !== /*exclude_phrase_input_value*/ ctx[2]) {
				set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			}

			if (dirty & /*excluded_files*/ 2 && t12_value !== (t12_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t12, t12_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$1(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[9](null);
			/*input0_binding*/ ctx[10](null);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$1.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$1($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFilenames', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let exluded_filename_components = plugin.settings.get("exluded_filename_components");
	let all_files = app.vault.getFiles().map(file => file.basename + "." + file.extension);
	let excluded_files = allExcludedFiles();

	// TODO show all exluded files in TextEdit not list
	// add all existing excluded folders to select element
	var list_options_no = 0;

	onMount(() => {
		// create select entries for all already excluded filename components
		exluded_filename_components.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		return all_files.filter(filename => {
			return exluded_filename_components.some(path => filename.contains(path));
		});
	}

	let exclude_phrase_input_value;
	let exclude_phrase_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.settings.set({ exluded_filename_components });
	}

	function addValue() {
		if (!exclude_phrase_input_value) {
			return;
		}

		// Return if folder already on list
		if (exluded_filename_components.contains(exclude_phrase_input_value)) {
			$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);
			$$invalidate(2, exclude_phrase_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exclude_phrase_input_value, exclude_phrase_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		exluded_filename_components.push(exclude_phrase_input_value);

		// reset input field
		$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);

		$$invalidate(2, exclude_phrase_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				exluded_filename_components.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFilenames> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exclude_phrase_input = $$value;
			$$invalidate(3, exclude_phrase_input);
		});
	}

	function input0_input_handler() {
		exclude_phrase_input_value = this.value;
		$$invalidate(2, exclude_phrase_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		app,
		plugin,
		excludedlist,
		exluded_filename_components,
		all_files,
		excluded_files,
		list_options_no,
		allExcludedFiles,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('exluded_filename_components' in $$props) exluded_filename_components = $$props.exluded_filename_components;
		if ('all_files' in $$props) all_files = $$props.all_files;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('exclude_phrase_input_value' in $$props) $$invalidate(2, exclude_phrase_input_value = $$props.exclude_phrase_input_value);
		if ('exclude_phrase_input' in $$props) $$invalidate(3, exclude_phrase_input = $$props.exclude_phrase_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFilenames extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$1, create_fragment$1, safe_not_equal, { app: 7, plugin: 8 }, add_css$1);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFilenames",
			options,
			id: create_fragment$1.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[7] === undefined && !('app' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[8] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/Settings.svelte generated by Svelte v3.42.1 */
const file = "src/svelte/Settings.svelte";

function add_css(target) {
	append_styles(target, "svelte-83jj2u", "#settings-container.svelte-83jj2u{position:relative;height:100%;width:100%}#CN_select.svelte-83jj2u{min-width:200px;width:50%;font-size:1em}#update_TLI_path_button.svelte-83jj2u{margin-left:auto;margin-right:auto}h2.svelte-83jj2u{text-align:left}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dGluZ3Muc3ZlbHRlIiwibWFwcGluZ3MiOiJBQTJJRSxtQkFBbUIsY0FBQyxDQUFBLEFBQ2xCLFFBQVEsQ0FBRSxRQUFRLENBQ2xCLE1BQU0sQ0FBRSxJQUFJLENBQ1osS0FBSyxDQUFFLElBQUksQUFDYixDQUFBLEFBQ0EsVUFBVSxjQUFDLENBQUEsQUFDVCxTQUFTLENBQUUsS0FBSyxDQUNoQixLQUFLLENBQUUsR0FBRyxDQUNWLFNBQVMsQ0FBRSxHQUFHLEFBQ2hCLENBQUEsQUFDQSx1QkFBdUIsY0FBQyxDQUFBLEFBQ3RCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLFlBQVksQ0FBRSxJQUFJLEFBQ3BCLENBQUEsQUFDQSxFQUFFLGNBQUMsQ0FBQSxBQUNELFVBQVUsQ0FBRSxJQUFJLEFBQ2xCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiU2V0dGluZ3Muc3ZlbHRlIl19 */");
}

function get_each_context(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[18] = list[i];
	return child_ctx;
}

// (61:6) {#each all_files as filepath}
function create_each_block(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*filepath*/ ctx[18];
			option.value = option.__value;
			add_location(option, file, 61, 8, 2099);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block.name,
		type: "each",
		source: "(61:6) {#each all_files as filepath}",
		ctx
	});

	return block;
}

function create_fragment(ctx) {
	let div3;
	let div0;
	let h20;
	let t1;
	let span;
	let br0;
	let t3;
	let label0;
	let t5;
	let input0;
	let t6;
	let datalist;
	let t7;
	let button;
	let t9;
	let br1;
	let t10;
	let div1;
	let h21;
	let t12;
	let label1;
	let input1;
	let t14;
	let br2;
	let t15;
	let div2;
	let h22;
	let t17;
	let label2;
	let input2;
	let t19;
	let br3;
	let t20;
	let excludedfolders;
	let t21;
	let excludedfilenames;
	let t22;
	let p;
	let t23;
	let a0;
	let t25;
	let a1;
	let t27;
	let br4;
	let br5;
	let t28;
	let a2;
	let t30;
	let a3;
	let t32;
	let a4;
	let t34;
	let current;
	let mounted;
	let dispose;
	let each_value = /*all_files*/ ctx[7];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
	}

	excludedfolders = new ExcludedFolders({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	excludedfilenames = new ExcludedFilenames({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			div3 = element("div");
			div0 = element("div");
			h20 = element("h2");
			h20.textContent = "Path of your Central Note";
			t1 = text("\n    Current path: ");
			span = element("span");
			span.textContent = `${/*current_tli*/ ctx[8]}`;
			br0 = element("br");
			t3 = space();
			label0 = element("label");
			label0.textContent = "New path:";
			t5 = space();
			input0 = element("input");
			t6 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t7 = space();
			button = element("button");
			button.textContent = "Save";
			t9 = space();
			br1 = element("br");
			t10 = space();
			div1 = element("div");
			h21 = element("h2");
			h21.textContent = "Auto-updating the Map of Content";
			t12 = space();
			label1 = element("label");
			label1.textContent = "Update when switching between files\n    ";
			input1 = element("input");
			t14 = space();
			br2 = element("br");
			t15 = space();
			div2 = element("div");
			h22 = element("h2");
			h22.textContent = "Descendants";
			t17 = space();
			label2 = element("label");
			label2.textContent = "Remember whether a file's descandants are shown or hidden\n    ";
			input2 = element("input");
			t19 = space();
			br3 = element("br");
			t20 = space();
			create_component(excludedfolders.$$.fragment);
			t21 = space();
			create_component(excludedfilenames.$$.fragment);
			t22 = space();
			p = element("p");
			t23 = text("For support & suggestion feature ideas, visit the plugin's ");
			a0 = element("a");
			a0.textContent = "GitHub page";
			t25 = text("\n    or\n    ");
			a1 = element("a");
			a1.textContent = "this post";
			t27 = text("\n    in the official Obsidian forum.\n    ");
			br4 = element("br");
			br5 = element("br");
			t28 = text("\n    You can support the development by donating on\n    ");
			a2 = element("a");
			a2.textContent = "Patreon";
			t30 = text(",\n    ");
			a3 = element("a");
			a3.textContent = "Ko-Fi";
			t32 = text("\n    or ");
			a4 = element("a");
			a4.textContent = "PayPal";
			t34 = text(". Thank\n    you!");
			attr_dev(h20, "class", "svelte-83jj2u");
			add_location(h20, file, 47, 4, 1680);
			attr_dev(span, "id", "tli_path");
			add_location(span, file, 48, 23, 1738);
			add_location(br0, file, 48, 63, 1778);
			attr_dev(label0, "for", "myBrowser");
			add_location(label0, file, 49, 4, 1789);
			attr_dev(input0, "type", "text");
			attr_dev(input0, "list", "notes");
			attr_dev(input0, "id", "CN_select");
			attr_dev(input0, "placeholder", "Start typing to see suggestions...");
			attr_dev(input0, "class", "svelte-83jj2u");
			add_location(input0, file, 50, 4, 1835);
			attr_dev(datalist, "id", "notes");
			add_location(datalist, file, 59, 4, 2033);
			attr_dev(button, "id", "update_TLI_path_button");
			attr_dev(button, "type", "button");
			attr_dev(button, "class", "svelte-83jj2u");
			add_location(button, file, 64, 4, 2155);
			attr_dev(div0, "class", "path");
			add_location(div0, file, 46, 2, 1657);
			add_location(br1, file, 72, 2, 2304);
			attr_dev(h21, "class", "svelte-83jj2u");
			add_location(h21, file, 74, 4, 2323);
			attr_dev(label1, "for", "auto-update-file-switch");
			add_location(label1, file, 75, 4, 2369);
			attr_dev(input1, "type", "checkbox");
			attr_dev(input1, "id", "auto-update-file-switch");
			input1.checked = /*settings*/ ctx[6].get("auto_update_on_file_change");
			add_location(input1, file, 77, 12, 2461);
			add_location(div1, file, 73, 2, 2313);
			add_location(br2, file, 91, 2, 2895);
			attr_dev(h22, "class", "svelte-83jj2u");
			add_location(h22, file, 93, 4, 2914);
			attr_dev(label2, "for", "do_remember_expanded_checkbox");
			add_location(label2, file, 94, 4, 2939);
			attr_dev(input2, "type", "checkbox");
			attr_dev(input2, "id", "do_remember_expanded_checkbox");
			input2.checked = /*settings*/ ctx[6].get("do_remember_expanded");
			add_location(input2, file, 96, 12, 3059);
			add_location(div2, file, 92, 2, 2904);
			add_location(br3, file, 110, 2, 3475);
			attr_dev(a0, "href", "https://github.com/Robin-Haupt-1/Obsidian-Map-of-Content");
			add_location(a0, file, 114, 63, 3627);
			attr_dev(a1, "href", "https://forum.obsidian.md/t/map-of-content-plugin-release/25209");
			add_location(a1, file, 120, 4, 3744);
			add_location(br4, file, 124, 4, 3884);
			add_location(br5, file, 124, 10, 3890);
			attr_dev(a2, "href", "https://www.patreon.com/RobinHaupt");
			add_location(a2, file, 126, 4, 3952);
			attr_dev(a3, "href", "https://ko-fi.com/robinhaupt");
			add_location(a3, file, 127, 4, 4014);
			attr_dev(a4, "href", "https://www.paypal.com/paypalme/robinhaupt");
			add_location(a4, file, 128, 7, 4070);
			add_location(p, file, 113, 2, 3560);
			attr_dev(div3, "id", "settings-container");
			attr_dev(div3, "class", "svelte-83jj2u");
			add_location(div3, file, 45, 0, 1625);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div3, anchor);
			append_dev(div3, div0);
			append_dev(div0, h20);
			append_dev(div0, t1);
			append_dev(div0, span);
			append_dev(div0, br0);
			append_dev(div0, t3);
			append_dev(div0, label0);
			append_dev(div0, t5);
			append_dev(div0, input0);
			/*input0_binding*/ ctx[10](input0);
			set_input_value(input0, /*cn_path_input_value*/ ctx[3]);
			append_dev(div0, t6);
			append_dev(div0, datalist);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(datalist, null);
			}

			append_dev(div0, t7);
			append_dev(div0, button);
			append_dev(div3, t9);
			append_dev(div3, br1);
			append_dev(div3, t10);
			append_dev(div3, div1);
			append_dev(div1, h21);
			append_dev(div1, t12);
			append_dev(div1, label1);
			append_dev(div1, input1);
			/*input1_binding*/ ctx[13](input1);
			append_dev(div3, t14);
			append_dev(div3, br2);
			append_dev(div3, t15);
			append_dev(div3, div2);
			append_dev(div2, h22);
			append_dev(div2, t17);
			append_dev(div2, label2);
			append_dev(div2, input2);
			/*input2_binding*/ ctx[15](input2);
			append_dev(div3, t19);
			append_dev(div3, br3);
			append_dev(div3, t20);
			mount_component(excludedfolders, div3, null);
			append_dev(div3, t21);
			mount_component(excludedfilenames, div3, null);
			append_dev(div3, t22);
			append_dev(div3, p);
			append_dev(p, t23);
			append_dev(p, a0);
			append_dev(p, t25);
			append_dev(p, a1);
			append_dev(p, t27);
			append_dev(p, br4);
			append_dev(p, br5);
			append_dev(p, t28);
			append_dev(p, a2);
			append_dev(p, t30);
			append_dev(p, a3);
			append_dev(p, t32);
			append_dev(p, a4);
			append_dev(p, t34);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[11]),
					listen_dev(button, "click", /*click_handler*/ ctx[12], false, false, false),
					listen_dev(input1, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(input2, "click", /*click_handler_2*/ ctx[16], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*cn_path_input_value*/ 8 && input0.value !== /*cn_path_input_value*/ ctx[3]) {
				set_input_value(input0, /*cn_path_input_value*/ ctx[3]);
			}

			if (dirty & /*all_files*/ 128) {
				each_value = /*all_files*/ ctx[7];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(datalist, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const excludedfolders_changes = {};
			if (dirty & /*app*/ 1) excludedfolders_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfolders_changes.plugin = /*plugin*/ ctx[1];
			excludedfolders.$set(excludedfolders_changes);
			const excludedfilenames_changes = {};
			if (dirty & /*app*/ 1) excludedfilenames_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfilenames_changes.plugin = /*plugin*/ ctx[1];
			excludedfilenames.$set(excludedfilenames_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(excludedfolders.$$.fragment, local);
			transition_in(excludedfilenames.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(excludedfolders.$$.fragment, local);
			transition_out(excludedfilenames.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div3);
			/*input0_binding*/ ctx[10](null);
			destroy_each(each_blocks, detaching);
			/*input1_binding*/ ctx[13](null);
			/*input2_binding*/ ctx[15](null);
			destroy_component(excludedfolders);
			destroy_component(excludedfilenames);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Settings', slots, []);
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let cn_input;
	let settings = plugin.settings;

	// TODO check the db is complete before allow settings changes (maybe have this svelte only do that and load all other components from other svelte files)
	// TODO lazy load all the file names and folders?
	// get list of all files for dropdown menu
	let all_files = app.vault.getFiles().map(file => file.path);

	Log("Central note path: " + settings.get("CN_path"));
	let cn_path_input_value;
	let current_tli = settings.get("CN_path");

	const updateCNPath = () => {
		if (!cn_path_input_value) {
			return;
		}

		// change TLI path
		settings.set({ CN_path: cn_path_input_value });
		document.getElementById("tli_path").textContent = cn_path_input_value;
		new obsidian.Notice("New Central Note path saved");

		// clear selection dropdown list
		$$invalidate(2, cn_input.value = "", cn_input);

		$$invalidate(3, cn_path_input_value = "");
	};

	let auto_update_file_switch_checkbox;
	let do_remember_expanded_checkbox;

	const toggleUpdateOnFileSwitch = () => {
		settings.set({
			auto_update_on_file_change: !settings.get("auto_update_on_file_change")
		});

		if (settings.get("auto_update_on_file_change")) {
			$$invalidate(4, auto_update_file_switch_checkbox.checked = true, auto_update_file_switch_checkbox);
		} else {
			$$invalidate(4, auto_update_file_switch_checkbox.checked = false, auto_update_file_switch_checkbox);
		}
	};

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<Settings> was created with unknown prop '${key}'`);
	});

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			cn_input = $$value;
			$$invalidate(2, cn_input);
		});
	}

	function input0_input_handler() {
		cn_path_input_value = this.value;
		$$invalidate(3, cn_path_input_value);
	}

	const click_handler = () => {
		updateCNPath();
	};

	function input1_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			auto_update_file_switch_checkbox = $$value;
			$$invalidate(4, auto_update_file_switch_checkbox);
		});
	}

	const click_handler_1 = () => {
		let enabled = !settings.get("auto_update_on_file_change");
		settings.set({ auto_update_on_file_change: enabled });
		$$invalidate(4, auto_update_file_switch_checkbox.checked = enabled, auto_update_file_switch_checkbox);
	};

	function input2_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			do_remember_expanded_checkbox = $$value;
			$$invalidate(5, do_remember_expanded_checkbox);
		});
	}

	const click_handler_2 = () => {
		let enabled = !settings.get("do_remember_expanded");
		settings.set({ do_remember_expanded: enabled });
		$$invalidate(5, do_remember_expanded_checkbox.checked = enabled, do_remember_expanded_checkbox);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		App: obsidian.App,
		Notice: obsidian.Notice,
		TFile: obsidian.TFile,
		Log,
		GetAllFolders,
		ExcludedFolders,
		ExcludedFilenames,
		app,
		plugin,
		cn_input,
		settings,
		all_files,
		cn_path_input_value,
		current_tli,
		updateCNPath,
		auto_update_file_switch_checkbox,
		do_remember_expanded_checkbox,
		toggleUpdateOnFileSwitch
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
		if ('cn_input' in $$props) $$invalidate(2, cn_input = $$props.cn_input);
		if ('settings' in $$props) $$invalidate(6, settings = $$props.settings);
		if ('all_files' in $$props) $$invalidate(7, all_files = $$props.all_files);
		if ('cn_path_input_value' in $$props) $$invalidate(3, cn_path_input_value = $$props.cn_path_input_value);
		if ('current_tli' in $$props) $$invalidate(8, current_tli = $$props.current_tli);
		if ('auto_update_file_switch_checkbox' in $$props) $$invalidate(4, auto_update_file_switch_checkbox = $$props.auto_update_file_switch_checkbox);
		if ('do_remember_expanded_checkbox' in $$props) $$invalidate(5, do_remember_expanded_checkbox = $$props.do_remember_expanded_checkbox);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		app,
		plugin,
		cn_input,
		cn_path_input_value,
		auto_update_file_switch_checkbox,
		do_remember_expanded_checkbox,
		settings,
		all_files,
		current_tli,
		updateCNPath,
		input0_binding,
		input0_input_handler,
		click_handler,
		input1_binding,
		click_handler_1,
		input2_binding,
		click_handler_2
	];
}

class Settings extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance, create_fragment, safe_not_equal, { app: 0, plugin: 1 }, add_css);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Settings",
			options,
			id: create_fragment.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[0] === undefined && !('app' in props)) {
			console.warn("<Settings> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[1] === undefined && !('plugin' in props)) {
			console.warn("<Settings> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

const DEFAULT_SETTINGS = {
    CN_path: "Central Note.md",
    exluded_folders: [],
    exluded_filename_components: [],
    settings_version: "0.1.14",
    plugin_version: "0.1.14",
    do_show_update_notice: false,
    auto_update_on_file_change: true,
    do_remember_expanded: false,
    file_descendants_expanded: {}
};
class SettingsManager {
    constructor(plugin) {
        this.plugin = plugin;
    }
    async loadSettings() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, this.UpgradeSettingsVersion(await this.plugin.loadData()));
        this.saveSettings();
    }
    async saveSettings() {
        await this.plugin.saveData(this.settings);
    }
    async set(updates) {
        Object.assign(this.settings, updates);
        await this.plugin.saveData(this.settings);
    }
    get(setting) {
        return this.settings[setting];
    }
    UpgradeSettingsVersion(object) {
        // TODO remove deleted/renamed files from the is_expanded object
        try {
            // if fresh install, go with defaults
            if (object == undefined) {
                Log("fresh install, returning empty settings object");
                return {};
            }
            // abort if settings are already in current version format
            if (object["settings_version"] === DEFAULT_SETTINGS["settings_version"]) {
                Log("Settings already in current version");
                return object;
            }
            // clone the object
            object = JSON.parse(JSON.stringify(object));
            let object_keys = Object.keys(object);
            Log("old settings object: " + String(object_keys));
            let old_version = undefined;
            // determine which version the legacy object is from
            if (!object_keys.contains("settings_version")) {
                old_version = "pre-0.1.10";
            }
            else {
                old_version = object["settings_version"];
            }
            Log("old settings version: " + old_version);
            if (old_version === "pre-0.1.10") {
                // extract the CN path from CN_path_per_vault and save it as CN_path
                Log("Converting CN path from pre-0.1.10 to 0.1.10");
                let cn_settings_vault_names = object["CN_path_per_vault"].map((val) => val[0]); // get just the name of all vaults there's a CN stored for
                if (cn_settings_vault_names.contains(this.plugin.app.vault.getName())) {
                    object["CN_path"] = object["CN_path_per_vault"][cn_settings_vault_names.indexOf(this.plugin.app.vault.getName())][1];
                }
                else {
                    delete object["CN_path"];
                }
                delete object["CN_path_per_vault"];
                object["settings_version"] = "0.1.10";
            } // clone the object
            if (old_version === "0.1.10") {
                Log("upgrading settings to 0.1.12");
                object["plugin_version"] = "0.1.12";
                object["settings_version"] = "0.1.12";
                object["do_show_update_notice"] = true;
            }
            if (old_version === "0.1.12") {
                Log("upgrading settings to 0.1.14");
                object["plugin_version"] = "0.1.14";
                object["settings_version"] = "0.1.14";
                object["do_show_update_notice"] = true;
            }
            return this.UpgradeSettingsVersion(object);
        }
        catch (_a) {
            return {};
        }
    }
    isExludedFile(file) {
        let path_to_file = file.path;
        let in_excluded_folder = this.get("exluded_folders").some((path) => path_to_file.startsWith(path));
        if (in_excluded_folder) {
            return true;
        }
        let filename = file.basename + "." + file.extension;
        let has_excluded_filename = this.get("exluded_filename_components").some((phrase) => filename.contains(phrase));
        return has_excluded_filename;
    }
    isExpanded(path) {
        if (!this.get("do_remember_expanded"))
            return true;
        let current_settings = this.get("file_descendants_expanded");
        if (Object.keys(current_settings).contains(path)) {
            return current_settings[path];
        }
        let new_settings = Object.assign(current_settings, { path: true });
        this.set({ "file_descendants_expanded": new_settings });
        return true;
    }
    setExpanded(path, expanded) {
        if (!this.get("do_remember_expanded"))
            return;
        let new_val = {};
        new_val[path] = expanded;
        let new_settings = Object.assign({}, this.get("file_descendants_expanded"), new_val);
        this.set({ "file_descendants_expanded": new_settings });
        return true;
    }
}
class MOCSettingTab extends obsidian.PluginSettingTab {
    constructor(plugin) {
        super(plugin.app, plugin);
        this.plugin = plugin;
        this.db = plugin.db;
        this._app = undefined;
    }
    display() {
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        this._app = new Settings({
            target: this.containerEl,
            props: { app: this.app, plugin: this.plugin },
        });
    }
    hide() {
        this.plugin.db.update();
    }
}

class MOCPlugin extends obsidian.Plugin {
    async onload() {
        this.settings = new SettingsManager(this);
        await this.settings.loadSettings();
        this.db = new DBManager(this);
        this.registerView(MOC_VIEW_TYPE, (leaf) => (this.view = new MOCView(leaf, this)));
        this.app.workspace.onLayoutReady(() => this.initializePlugin());
    }
    async initializePlugin() {
        this.addSettingTab(new MOCSettingTab(this));
        this.initLeaf();
        this.db.update(true);
        this.addRibbonIcon('sync', 'Update Map of Content', async () => {
            await this.db.update();
        });
        this.addCommand({
            id: 'rebuild-map-of-content',
            name: 'Update Map of Content',
            callback: () => {
                this.db.update();
            }
        });
        this.addCommand({
            id: 'open-note-as-central-note',
            name: 'Set current note as Central Note',
            callback: () => {
                let errors = [];
                // make sure a file is opened
                if (this.app.workspace.getActiveFile() == null) {
                    errors.push("No file has been opened");
                }
                else if (this.settings.isExludedFile(this.app.workspace.getActiveFile())) {
                    errors.push("This file has been excluded from the Map of Content.");
                }
                if (errors.length) {
                    new obsidian.Notice(errors[0]);
                    return;
                }
                this.settings.set({ CN_path: this.app.workspace.getActiveFile().path });
                this.db.update();
            }
        });
    }
    initLeaf() {
        if (this.app.workspace.getLeavesOfType(MOC_VIEW_TYPE).length) ;
        else {
            this.app.workspace.getRightLeaf(true).setViewState({
                type: MOC_VIEW_TYPE,
                active: true
            });
        }
    }
    rerender() {
        if (this.view) {
            this.view.rerender();
        }
    }
    onunload() {
        if (this.view) {
            this.view.onClose();
        }
        this.app.workspace.detachLeavesOfType(MOC_VIEW_TYPE);
    }
    CNexists() {
        let exists = !(this.app.vault.getAbstractFileByPath(this.settings.get("CN_path")) == null);
        return exists;
    }
    registerViewInstance(view) {
        this.view = view;
    }
    unregisterViewInstance(view) {
        this.view = undefined;
    }
}

module.exports = MOCPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL2NvbnN0YW50cy50cyIsInNyYy90eXBlcy50cyIsInNyYy91dGlscy50cyIsInNyYy9kYi50cyIsIm5vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXgubWpzIiwic3JjL3N2ZWx0ZS9Ob0xpbmtJbWFnZS5zdmVsdGUiLCJzcmMvc3ZlbHRlL0Rlc2NlbmRhbnRzLnN2ZWx0ZSIsInNyYy9zdmVsdGUvVXBkYXRlTm90aWNlLnN2ZWx0ZSIsInNyYy9zdmVsdGUvaGVscGVycy9leHBhbmRNYW5hZ2VyLnRzIiwic3JjL3N2ZWx0ZS9WaWV3LnN2ZWx0ZSIsInNyYy92aWV3LnRzIiwic3JjL3N2ZWx0ZS9zZXR0aW5ncy9FeGNsdWRlZEZvbGRlcnMuc3ZlbHRlIiwic3JjL3N2ZWx0ZS9zZXR0aW5ncy9FeGNsdWRlZEZpbGVuYW1lcy5zdmVsdGUiLCJzcmMvc3ZlbHRlL1NldHRpbmdzLnN2ZWx0ZSIsInNyYy9zZXR0aW5ncy50cyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIE1PQ1ZpZXcgZnJvbSBcIi4vdmlld1wiXHJcbmV4cG9ydCBjb25zdCBDRU5UUkFMX05PVEVfUEFUSF9ERUZBVUxUID0gXCJDZW50cmFsIE5vdGUubWRcIlxyXG5leHBvcnQgY29uc3QgTElOS0VEX1RPID0gXCIgPT4gXCJcclxuZXhwb3J0IGNvbnN0IExJTktFRF9GUk9NID0gXCIgPD0gXCJcclxuZXhwb3J0IGNvbnN0IExJTktFRF9DTiA9IFwiTm9uZVwiXHJcbmV4cG9ydCBjb25zdCBMSU5LRURfQk9USCA9IFwiIDw9PiBcIlxyXG5leHBvcnQgY29uc3QgTU9DX1ZJRVdfVFlQRSA9IFwibWFwLW9mLWNvbnRlbnRcIlxyXG5cclxuICIsIlxuZXhwb3J0IGNsYXNzIEZpbGVJdGVtIHtcbiAgICBwYXRoOiBzdHJpbmdcbiAgICBleHRlbnNpb246IHN0cmluZ1xuICAgIGxpbmtzX3RvOiBzdHJpbmdbXVxuICAgIGxpbmtlZF9mcm9tOiBzdHJpbmdbXVxuICAgIGRpc3RhbmNlX2Zyb21fQ046IG51bWJlclxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHBhdGg6IHN0cmluZyxcbiAgICAgICAgZXh0ZW5zaW9uOiBzdHJpbmcsXG4gICAgICAgIGxpbmtzX3RvOiBzdHJpbmdbXSxcbiAgICAgICAgbGlua2VkX2Zyb206IHN0cmluZ1tdLFxuICAgICAgICBkaXN0YW5jZV9mcm9tX0NOOiBudW1iZXJcblxuICAgICkge1xuICAgICAgICB0aGlzLnBhdGggPSBwYXRoXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gZXh0ZW5zaW9uXG4gICAgICAgIHRoaXMubGlua3NfdG8gPSBsaW5rc190b1xuICAgICAgICB0aGlzLmxpbmtlZF9mcm9tID0gbGlua2VkX2Zyb21cbiAgICAgICAgdGhpcy5kaXN0YW5jZV9mcm9tX0NOID0gZGlzdGFuY2VfZnJvbV9DTlxuICAgIH1cblxufVxuZXhwb3J0IGludGVyZmFjZSBEQiB7XG4gICAgW2luZGV4OiBzdHJpbmddOiBGaWxlSXRlbVxufVxuZXhwb3J0IGludGVyZmFjZSBQYXRoIHtcbiAgICBpdGVtczogW3N0cmluZywgYW55XVtdXG4gICAgYWxsX21lbWJlcnM6IHN0cmluZ1tdXG5cblxufVxuIiwiaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi9kYlwiXG5pbXBvcnQgdHlwZSB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG5leHBvcnQgY29uc3QgTG9nID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgIGxldCBwcmludF9sb2cgPSBmYWxzZVxuICAgIGlmIChwcmludF9sb2cpIGNvbnNvbGUubG9nKFwiW01hcCBvZiBDb250ZW50XSBcIiArIG1lc3NhZ2UpXG5cblxufVxuXG5leHBvcnQgY29uc3QgUmVtb3ZlRXh0ZW5zaW9uID0gKHBhdGg6IHN0cmluZywgZXh0ZW5zaW9uOiBzdHJpbmcgPSBcIi5tZFwiKSA9PiB7XG4gICAgaWYgKHBhdGguZW5kc1dpdGgoZXh0ZW5zaW9uKSkge1xuICAgICAgICByZXR1cm4gcGF0aC5zbGljZSgwLCAtZXh0ZW5zaW9uLmxlbmd0aClcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhcbn1cblxuLyoqQHJldHVybnMgVHJ1ZSBpZiBDVFJMIC8gTWV0YSBpcyBwcmVzc2VkICovXG5leHBvcnQgY29uc3QgSXNDdHJsUHJlc3NlZCA9IChlOiBNb3VzZUV2ZW50KTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTWFjaW50b3NoXCIpID8gZS5tZXRhS2V5IDogZS5jdHJsS2V5XG5cbn1cblxuLyoqICBSZXR1cm5zIG9ubHkgdGhlIG5hbWUgb2YgdGhlIGFjdHVhbCBmaWxlICAqL1xuZXhwb3J0IGNvbnN0IEZpbGVOYW1lRnJvbVBhdGggPSAocGF0aDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gcGF0aC5zcGxpdChcIi9cIikubGFzdCgpXG59XG5cbi8qKiAgcmV0dXJuIHRoZSBmdWxsIHBhdGggaWYgdGhlcmUgYXJlIHR3byBvciBtb3JlIG5vdGVzIHdpdGggdGhlIHNhbWUgZmlsZW5hbWUgYW5kIGV4dGVuc2lvbiwgZWxzZSBvbmx5IHRoZSBmaWxlbmFtZSAgKi9cbmV4cG9ydCBjb25zdCBHZXREaXNwbGF5TmFtZSA9IChwYXRoOiBzdHJpbmcsIGRiOiBEQk1hbmFnZXIpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBmaWxlX25hbWUgPSBGaWxlTmFtZUZyb21QYXRoKHBhdGgpXG4gICAgbGV0IGRpc3BsYXlfbmFtZSA9IG51bGxcblxuICAgIGlmIChkYi5kdXBsaWNhdGVfZmlsZV9zdGF0dXMuZ2V0KGZpbGVfbmFtZSkpIHtcbiAgICAgICAgZGlzcGxheV9uYW1lID0gUmVtb3ZlRXh0ZW5zaW9uKHBhdGgpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheV9uYW1lID0gUmVtb3ZlRXh0ZW5zaW9uKGZpbGVfbmFtZSlcbiAgICB9XG4gICAgcmV0dXJuIGRpc3BsYXlfbmFtZVxufVxuXG5cbmV4cG9ydCBjb25zdCBOYXZpZ2F0ZVRvRmlsZSA9IGFzeW5jIChcbiAgICBhcHA6IEFwcCxcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgZXZlbnQ6IE1vdXNlRXZlbnRcbikgPT4ge1xuXG4gICAgbGV0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXRoLCBcIi9cIik7XG5cbiAgICBpZiAoIWZpbGUpIHJldHVybjtcbiAgICBjb25zdCBsZWFmID0gSXNDdHJsUHJlc3NlZChldmVudClcbiAgICAgICAgPyBhcHAud29ya3NwYWNlLnNwbGl0QWN0aXZlTGVhZigpXG4gICAgICAgIDogYXBwLndvcmtzcGFjZS5nZXRVbnBpbm5lZExlYWYoKTtcbiAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCBcIi9cIilcbn07XG5cbi8qKiBHZXQgdGhlIHBhdGhzIG9mIGFsbCBmb2xkZXJzIGluIHRoZSB2YXVsdCwgZW1wdHkgb3Igbm90ICovXG5leHBvcnQgY29uc3QgR2V0QWxsRm9sZGVycyA9IChhcHA6IEFwcCk6IHN0cmluZ1tdID0+IHtcbiAgICBsZXQgdmF1bHRfZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgIGxldCBhbGxfZm9sZGVyX3BhdGhzID0gW11cbiAgICB2YXVsdF9maWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICAgIC8vIGN1dCBvZiBmaWxlbmFtZVxuICAgICAgICBsZXQgZm9sZGVyX3BhdGggPSBmaWxlLnBhdGguc2xpY2UoMCwgZmlsZS5wYXRoLmxlbmd0aCAtIChmaWxlLmJhc2VuYW1lLmxlbmd0aCArIGZpbGUuZXh0ZW5zaW9uLmxlbmd0aCArIDEpKVxuICAgICAgICAvLyBhZGQgcGF0aCB0byBjb2xsZWN0ZWQgcGF0aHNcbiAgICAgICAgaWYgKGZvbGRlcl9wYXRoLmxlbmd0aCAmJiAhYWxsX2ZvbGRlcl9wYXRocy5jb250YWlucyhmb2xkZXJfcGF0aCkpIHtcbiAgICAgICAgICAgIGFsbF9mb2xkZXJfcGF0aHMucHVzaChmb2xkZXJfcGF0aClcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBzdG9yZSBhbGwgcGFyZW50IGZvbGRlciBwYXRocyBhcyB1bmlxdWUgcGF0aHMgaWYgdGhleSBhcmVuJ3QgeWV0IGJlY2F1c2UgdGhleSBkb24ndCBpbmNsdWRlIGFueSBub3RlcyBkaXJlY3RseVxuICAgIGFsbF9mb2xkZXJfcGF0aHMuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgICBsZXQgYWxsX3N1Yl9wYXRocyA9IHBhdGguc3BsaXQoXCIvXCIpXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYWxsX3N1Yl9wYXRocy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwYXJ0aWFsX3BhdGggPSBhbGxfc3ViX3BhdGhzLnNsaWNlKDAsIGkpLmpvaW4oXCIvXCIpICsgXCIvXCJcbiAgICAgICAgICAgIGlmICghYWxsX2ZvbGRlcl9wYXRocy5jb250YWlucyhwYXJ0aWFsX3BhdGgpKSB7XG4gICAgICAgICAgICAgICAgYWxsX2ZvbGRlcl9wYXRocy5wdXNoKHBhcnRpYWxfcGF0aClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cblxuICAgIH0pXG5cblxuICAgIHJldHVybiBhbGxfZm9sZGVyX3BhdGhzXG59XG4iLCJpbXBvcnQgeyBMSU5LRURfQk9USCwgTElOS0VEX0NOIGFzIExJTktFRF9DTiwgTElOS0VEX1RPLCBMSU5LRURfRlJPTSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHR5cGUgeyBBcHAsIFZhdWx0LCBMaW5rQ2FjaGUsIEVtYmVkQ2FjaGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgRmlsZUl0ZW0sIERCLCBQYXRoIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IEZpbGVOYW1lRnJvbVBhdGggfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4vbWFpblwiXG5pbXBvcnQgeyBMb2cgIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB0eXBlIHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGNsYXNzIERCTWFuYWdlciB7XG4gICAgZGI6IERCXG4gICAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlclxuICAgIGRiX2VudHJpZXM6IGFueVtdXG4gICAgZGJfa2V5czogc3RyaW5nW11cbiAgICBhcHA6IEFwcFxuICAgIHBsdWdpbjogTU9DUGx1Z2luXG4gICAgdmF1bHQ6IFZhdWx0XG4gICAgYWxsX3BhdGhzOiBQYXRoW11cbiAgICBkZXNjZW5kYW50czogTWFwPHN0cmluZywgc3RyaW5nW10+XG4gICAgZHVwbGljYXRlX2ZpbGVfc3RhdHVzOiBNYXA8c3RyaW5nLCBib29sZWFuPlxuICAgIGRhdGFiYXNlX2NvbXBsZXRlOiBib29sZWFuXG4gICAgZGF0YWJhc2VfdXBkYXRpbmc6IGJvb2xlYW4gPSB0cnVlXG5cbiAgICBnZXRfcGF0aHNfcmFuOiBudW1iZXJcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogTU9DUGx1Z2luKSB7XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5nc1xuICAgICAgICB0aGlzLmFsbF9wYXRocyA9IFtdXG4gICAgICAgIHRoaXMuZGIgPSB7fVxuICAgICAgICB0aGlzLmRiX2VudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmRiKVxuICAgIH1cblxuICAgIGluaXQoKSB7XG5cbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGUoc2lsZW50OiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZV9jb21wbGV0ZSA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YWJhc2VfdXBkYXRpbmcgPSB0cnVlXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5DTmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0X3Rtc3AgPSBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVXBkYXRpbmcgdGhlIE1hcCBvZiBDb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIExvZyhcIlVwZGF0aW5nIHRoZSBNYXAgb2YgQ29udGVudC4uLlwiKVxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAwKSlcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURCKClcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMCkpXG5cbiAgICAgICAgICAgICAgICB0aGlzLmdldF9wYXRoc19yYW4gPSAwXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZXB0aEluZm9ybWF0aW9uKClcblxuICAgICAgICAgICAgICAgIHRoaXMuYWxsX3BhdGhzLmxlbmd0aCA9IDBcbiAgICAgICAgICAgICAgICBsZXQgcGF0aF9zb19mYXI6IFBhdGggPSB7IGFsbF9tZW1iZXJzOiBbdGhpcy5zZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpXSwgaXRlbXM6IFtbdGhpcy5zZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpLCBMSU5LRURfQ05dXSB9XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDApKVxuXG4gICAgICAgICAgICAgICAgdGhpcy5mb2xsb3dQYXRocyhwYXRoX3NvX2ZhcilcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMCkpXG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlc2NlbmRhbnRzKClcblxuICAgICAgICAgICAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVcGRhdGUgY29tcGxldGVcIilcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZW5kX3Rtc3AgPSBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgTG9nKFwiVXBkYXRlIGNvbXBsZXRlLCBUb29rIFwiICsgU3RyaW5nKChlbmRfdG1zcCAtIHN0YXJ0X3Rtc3ApIC8gMTAwMCkpXG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlX2NvbXBsZXRlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlX3VwZGF0aW5nID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlcmVuZGVyKClcbiAgICAgICAgfVxuXG5cbiAgICB9XG5cbiAgICBnZXROb3RlRnJvbVBhdGgocGF0aDogc3RyaW5nKTogRmlsZUl0ZW0ge1xuICAgICAgICBpZiAocGF0aCBpbiB0aGlzLmRiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYltwYXRoXVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKiogcmV0dXJuIGFsbCBwYXRocyB0aGF0IGluY2x1ZGUgYSBjZXJ0YWluIG5vdGUuIE9ubHkgcmV0dXJuIHRoZSBwYXRoIHVwIHRvIHRoYXQgbm90ZSovXG4gICAgZmluZFBhdGhzKHBhdGg6IHN0cmluZyk6IFBhdGhbXSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZF9wYXRoczogUGF0aFtdID0gW11cbiAgICAgICAgbGV0IGZpbHRlcmVkX3BhdGhzX2pzb24gPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZF9wYXRocylcbiAgICAgICAgdGhpcy5hbGxfcGF0aHMuZm9yRWFjaCgocDogUGF0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKHAuYWxsX21lbWJlcnMuaW5jbHVkZXMocGF0aCkpIHtcbiAgICAgICAgICAgICAgICBpZiAocC5hbGxfbWVtYmVycy5sYXN0KCkgPT0gcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9wYXRocy5wdXNoKHApXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBwLmFsbF9tZW1iZXJzLmluZGV4T2YocGF0aCkgKyAxXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaG9wcGVkX29mX3BhdGggPSBwLml0ZW1zLnNsaWNlKDAsIGluZGV4KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcmVkX3BhdGhzX2pzb24uaW5jbHVkZXMoSlNPTi5zdHJpbmdpZnkoY2hvcHBlZF9vZl9wYXRoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBhIHBhdGggZWxlbWVudCBjb250YWluaW5nIG9ubHkgdGhlIHBhcnRzIG9mIHRoZSBwYXRoIGluZm9ybWF0aW9uIHVwIHRvIHRoZSBub3RlIGluIHF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9wYXRocy5wdXNoKHsgYWxsX21lbWJlcnM6IHAuYWxsX21lbWJlcnMuc2xpY2UoMCwgaW5kZXgpLCBpdGVtczogcC5pdGVtcy5zbGljZSgwLCBpbmRleCkgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkX3BhdGhzX2pzb24gPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZF9wYXRocylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkX3BhdGhzXG5cbiAgICB9XG5cbiAgICBhbGxfbm90ZXMoKTogRmlsZUl0ZW1bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiX2VudHJpZXMubWFwKChba2V5LCB2YWx1ZV0pID0+IHZhbHVlKVxuICAgIH1cblxuICAgIHVwZGF0ZURCKCkge1xuICAgICAgICAvLyBzdGVwIDE6IHVwZGF0ZSB0aGUgcGx1Z2lucyBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhbGwgbm90ZXMgaW4gdGhlIHZhdWx0XG4gICAgICAgIExvZyhcIlVwZGF0aW5nIHRoZSBsaWJyYXJ5Li4uXCIpXG4gICAgICAgIC8vIGRlbGV0ZSBvbGQgc3RhdGUgXG4gICAgICAgIGZvciAobGV0IG5vdGUgaW4gdGhpcy5kYikgeyBkZWxldGUgdGhpcy5kYltub3RlXTsgfVxuICAgICAgICAvLyByZWFkIGFsbCBmaWxlc1xuICAgICAgICBsZXQgdmF1bHRfZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpXG4gICAgICAgIExvZyhcIlRvdGFsIG51bWJlciBvZiBmaWxlcyBpbiB2YXVsdDogXCIgKyBTdHJpbmcodmF1bHRfZmlsZXMubGVuZ3RoKSlcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBkYiBlbnRyaWVzIFxuICAgICAgICBsZXQgZW50cmllc19jcmVhdGVkID0gMCBcbiAgICAgICAgdmF1bHRfZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmlzRXhsdWRlZEZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBsb2dnaW5nXG4gICAgICAgICAgICAgICAgZW50cmllc19jcmVhdGVkICs9IDFcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllc19jcmVhdGVkICUgMTAwMCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIExvZyhcIkNyZWF0ZWQgbmV3IGRiIGVudHJpZXM6IFwiICsgU3RyaW5nKGVudHJpZXNfY3JlYXRlZCkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5kYltmaWxlLnBhdGhdID0gbmV3IEZpbGVJdGVtKGZpbGUucGF0aCwgZmlsZS5leHRlbnNpb24sIFtdLCBbXSwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmRiX2VudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmRiKVxuICAgICAgICB0aGlzLmRiX2tleXMgPSBPYmplY3Qua2V5cyh0aGlzLmRiKVxuXG4gICAgICAgIHRoaXMuZHVwbGljYXRlX2ZpbGVfc3RhdHVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG4gICAgICAgIGxldCBjaGVja2VkX2ZpbGVzID0gMFxuICAgICAgICB0aGlzLmFsbF9ub3RlcygpLmZvckVhY2goKG5vdGUpID0+IHtcbiAgICAgICAgICAgIGxldCBmaWxlX25hbWUgPSBGaWxlTmFtZUZyb21QYXRoKG5vdGUucGF0aClcblxuICAgICAgICAgICAgLy8gbG9nZ2luZ1xuICAgICAgICAgICAgY2hlY2tlZF9maWxlcyArPSAxXG4gICAgICAgICAgICBpZiAoY2hlY2tlZF9maWxlcyAlIDEwMDAgPT0gMCkge1xuICAgICAgICAgICAgICAgIExvZyhcImNoZWNrZWQgZm9yIGR1cGxpY2F0ZXM6IFwiICsgU3RyaW5nKGNoZWNrZWRfZmlsZXMpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZHVwbGljYXRlX2ZpbGVfc3RhdHVzLmhhcyhmaWxlX25hbWUpKSB7IC8vIElmIHRoZSBmaWxlIG5hbWUgaXMgZW5jb3VudGVyZWQgdHdpY2Ugb3IgbW9yZSwgc2V0IGl0J3MgZHVwbGljYXRlIHN0YXR1cyB0byB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5kdXBsaWNhdGVfZmlsZV9zdGF0dXMuc2V0KGZpbGVfbmFtZSwgdHJ1ZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXBsaWNhdGVfZmlsZV9zdGF0dXMuc2V0KGZpbGVfbmFtZSwgZmFsc2UpXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgZGJfZW50cmllcyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGJcbiAgICAgICAgdGhpcy5kYl9lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5kYilcblxuICAgICAgICAvLyBzdGVwIDI6IGFuYWx5emUgbGlua3MgXG4gICAgICAgIExvZyhcImFuYWx5emluZyBsaW5rc1wiKVxuICAgICAgICB0aGlzLmFsbF9ub3RlcygpLmZvckVhY2goKG5vdGU6IEZpbGVJdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAobm90ZS5leHRlbnNpb24gIT0gXCJtZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBpZiBpdCdzIG5vdCBhbiBtZCBmaWxlLiBPdGhlciBmaWxlIHR5cGVzIGNhbid0IGxpbmsgdG8gYW55dGhpbmdcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gIHNhdmUgYWxsIHRoZSBsaW5rcyB0aGlzIG5vdGUgbGlua3MgdG9cbiAgICAgICAgICAgIGxldCB0aGlzX2xpbmtzX3RvOiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICBsZXQgbGlua2NhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZShub3RlLnBhdGgpLmxpbmtzXG4gICAgICAgICAgICBsZXQgYWxsX2xpbmtzID0gW11cbiAgICAgICAgICAgIGlmIChsaW5rY2FjaGUpIHtcbiAgICAgICAgICAgICAgICBsaW5rY2FjaGUuZm9yRWFjaCgodmFsOiBMaW5rQ2FjaGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGxpbmsgaXMgdmFsaWQgXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5rX2Rlc3QgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHZhbC5saW5rLCBcIi9cIilcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIGlzIGl0IG5lY2Nlc3NhcnkgdG8gYXZvaWQgaW5jbHVkaW5nIGxpbmtzIG11bHRpcGxlIHRpbWVzPyBtYXliZSB0aGV5IGNhbid0IGV2ZW4gYmUgZHVwbGljYXRlIGluIHRoZSBsaW5rY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtfZGVzdCAmJiAhdGhpc19saW5rc190by5pbmNsdWRlcyhsaW5rX2Rlc3QucGF0aCkgJiYgdGhpcy5kYl9rZXlzLmNvbnRhaW5zKGxpbmtfZGVzdC5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc19saW5rc190by5wdXNoKGxpbmtfZGVzdC5wYXRoKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB0cmFuc2NsdXNpb25zID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZShub3RlLnBhdGgpLmVtYmVkc1xuICAgICAgICAgICAgaWYgKHRyYW5zY2x1c2lvbnMpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NsdXNpb25zLmZvckVhY2goKHZhbDogRW1iZWRDYWNoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgbGluayBpcyB2YWxpZCBcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtfZGVzdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodmFsLmxpbmssIFwiL1wiKVxuICAgICAgICAgICAgICAgICAgICBpZiAobGlua19kZXN0ICYmICF0aGlzX2xpbmtzX3RvLmluY2x1ZGVzKGxpbmtfZGVzdC5wYXRoKSAmJiB0aGlzLmRiX2tleXMuY29udGFpbnMobGlua19kZXN0LnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzX2xpbmtzX3RvLnB1c2gobGlua19kZXN0LnBhdGgpXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXNfbGlua3NfdG8ubGVuZ3RoKSByZXR1cm4gLy8gbm8gbGlua3NcblxuICAgICAgICAgICAgLy8gc2F2ZSBsaW5rc190byBpbmZvcm1hdGlvbiB0byBkYlxuICAgICAgICAgICAgdGhpcy5kYltub3RlLnBhdGhdLmxpbmtzX3RvID0gdGhpc19saW5rc190b1xuXG4gICAgICAgICAgICAvLyBhZGQgYSBcImxpbmtlZF9mcm9tXCIgcmVmZXJlbmNlIHRvIHRoZSBkYiBlbnRyeSBvZiBhbGwgbm90ZXMgdGhhdCBhcmUgbGlua2VkIHRvIGZyb20gdGhpcyBub3RlXG4gICAgICAgICAgICB0aGlzX2xpbmtzX3RvLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYltsaW5rXS5saW5rZWRfZnJvbS5pbmNsdWRlcyhub3RlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGJbbGlua10ubGlua2VkX2Zyb20ucHVzaChub3RlLnBhdGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogc3RhcnRpbmcgZnJvbSB0aGUgQ04sIGZvbGxvdyBhbGwgcGF0aHMgYW5kIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBvbiBob3cgbG9uZyB0aGUgc2hvcnRlc3QgcGF0aCB0byBlYWNoIG5vdGUgaXMqL1xuICAgIHVwZGF0ZURlcHRoSW5mb3JtYXRpb24oKSB7XG4gICAgICAgIExvZyhcIkFuYWx5emluZyBkaXN0YW5jZSBmcm9tIENlbnRyYWwgTm90ZS4gQ04gcGF0aDogXCIgKyB0aGlzLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIikpXG4gICAgICAgIGxldCBkZXB0aCA9IDAgLy8gZGlzdGFuY2UgZnJvbSB0aGUgQ04uIHN0YXJ0cyBhdCB6ZXJvIFxuICAgICAgICBsZXQgY2hlY2tlZF9saW5rczogc3RyaW5nW10gPSBbXSAgLy8gYWxsIHRoZSBub3RlcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHZpc2l0ZWQuIGRvbnQgdmlzaXQgdGhlbSBhZ2FpbiB0byBwcmV2ZW50IGVuZGxlc3MgbG9vcHNcbiAgICAgICAgbGV0IGRvX2NvbnRpbnVlID0gdHJ1ZVxuICAgICAgICAvLyBzdGFydCBhdCB0aGUgdGhlIENOXG4gICAgICAgIGxldCBsaW5rcyA9IFt0aGlzLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIildXG4gICAgICAgIHdoaWxlIChkb19jb250aW51ZSkge1xuICAgICAgICAgICAgbGV0IG5leHRfbGlua3M6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICAgIGxpbmtzLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGV4dHJhY3QgYWxsIGFjdGl2ZSBhbmQgcGFzc2l2ZSBjb25uZWN0aW9ucyAobGlua2VkIHRvIG9yIGZyb20pIGZvciB0aGUgbmV4dCBpdGVyYXRpb24gb2YgbGluay1mb2xsb3dpbmdcbiAgICAgICAgICAgICAgICBsZXQgbm90ZSA9IHRoaXMuZ2V0Tm90ZUZyb21QYXRoKGxpbmspXG4gICAgICAgICAgICAgICAgbm90ZS5saW5rc190by5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2VkX2xpbmtzLmNvbnRhaW5zKGxpbmspICYmICFuZXh0X2xpbmtzLmNvbnRhaW5zKGxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2xpbmtzLnB1c2gobGluaylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgbm90ZS5saW5rZWRfZnJvbS5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2VkX2xpbmtzLmNvbnRhaW5zKGxpbmspICYmICFuZXh0X2xpbmtzLmNvbnRhaW5zKGxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2xpbmtzLnB1c2gobGluaylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBpbmZvIG9uIGhvdyBmYXIgdGhlIG5vdGUgaXMgcmVtb3ZlZCBmcm9tIENOXG4gICAgICAgICAgICAgICAgaWYgKG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA9PSBudWxsIHx8IG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA+IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA9IGRlcHRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoZWNrZWRfbGlua3MucHVzaChsaW5rKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGxpbmtzID0gbmV4dF9saW5rcy5zbGljZSgpXG4gICAgICAgICAgICBpZiAobGlua3MubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBkb19jb250aW51ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZXB0aCArPSAxXG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cyBhbGwgcG9zc2libGUgcGF0aHMgZnJvbSB0aGUgQ04gdGhhdCBhcmVuJ3QgdW5yZWFzb25hYmx5IGxvbmcgb3IgY2lyY3VsYXIgYW5kIHN0b3JlcyB0aGVtXG4gICAgICogQHBhcmFtIHBhdGhfc29fZmFyIHRoZSBwYXRoIHRvIGJlIGV4dGVuZGVkIGluIHRoaXMgaXRlcmF0aW9uXG4gICAgICovXG4gICAgZm9sbG93UGF0aHMocGF0aF9zb19mYXI6IFBhdGgpIHtcbiAgICAgICAgLy8gbG9nZ2luZ1xuICAgICAgICB0aGlzLmdldF9wYXRoc19yYW4gKz0gMVxuICAgICAgICBpZiAodGhpcy5nZXRfcGF0aHNfcmFuICUgMTAwMDAgPT0gMCkge1xuICAgICAgICAgICAgTG9nKFwiZ2V0IHBhdGhzIHJhbiBcIiArIFN0cmluZyh0aGlzLmdldF9wYXRoc19yYW4pKVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5vdGUgPSB0aGlzLmRiW3BhdGhfc29fZmFyLmFsbF9tZW1iZXJzLmxhc3QoKV1cbiAgICAgICAgbGV0IGFsbF9tZW1iZXJzID0gcGF0aF9zb19mYXIuYWxsX21lbWJlcnNcbiAgICAgICAgbGV0IGl0ZW1zID0gcGF0aF9zb19mYXIuaXRlbXNcblxuICAgICAgICBsZXQgbmV3X3BhdGhzX3RvX2ZvbGxvdzogUGF0aFtdID0gW11cbiAgICAgICAgbGV0IG5vdGVfbGlua3NfdG8gPSBub3RlLmxpbmtzX3RvLnNsaWNlKClcbiAgICAgICAgbGV0IG5vdGVfbGlua2VkX2Zyb20gPSBub3RlLmxpbmtlZF9mcm9tLnNsaWNlKClcblxuICAgICAgICBub3RlX2xpbmtzX3RvLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgbGlua2VkIG5vdGUgYWxzbyBsaW5rcyB0byB0aGUgY3VycmVudCBub3RlXG4gICAgICAgICAgICBsZXQgbGlua2VkX3RvX29yX2JvdGhfd2F5cyA9IExJTktFRF9UT1xuICAgICAgICAgICAgaWYgKG5vdGVfbGlua2VkX2Zyb20uY29udGFpbnMobGluaykpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaXQgZnJvbSB0aGUgcGFzc2l2ZSBsaW5rcyB0byBiZSBmb2xsb3dlZCBsYXRlclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG5vdGVfbGlua2VkX2Zyb20uaW5kZXhPZihsaW5rLCAwKTtcbiAgICAgICAgICAgICAgICBub3RlX2xpbmtlZF9mcm9tLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgbGlua2VkX3RvX29yX2JvdGhfd2F5cyA9IExJTktFRF9CT1RIXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXdfcGF0aDogUGF0aCA9IHsgYWxsX21lbWJlcnM6IGFsbF9tZW1iZXJzLmNvbmNhdChsaW5rKSwgaXRlbXM6IGl0ZW1zLmNvbmNhdChbW2xpbmssIGxpbmtlZF90b19vcl9ib3RoX3dheXNdXSkgfVxuICAgICAgICAgICAgbmV3X3BhdGhzX3RvX2ZvbGxvdy5wdXNoKG5ld19wYXRoKVxuICAgICAgICB9KVxuXG4gICAgICAgIG5vdGVfbGlua2VkX2Zyb20uZm9yRWFjaCgobGluazogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV3X3BhdGg6IFBhdGggPSB7IGFsbF9tZW1iZXJzOiBhbGxfbWVtYmVycy5jb25jYXQobGluayksIGl0ZW1zOiBpdGVtcy5jb25jYXQoW1tsaW5rLCBMSU5LRURfRlJPTV1dKSB9XG4gICAgICAgICAgICBuZXdfcGF0aHNfdG9fZm9sbG93LnB1c2gobmV3X3BhdGgpXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBjYWxsZWRfaXRzZWxmOiBib29sZWFuID0gZmFsc2UgLy8gd2hldGhlciB0aGUgZnVuY3Rpb24gY2FsbGVkIGl0c2VsZlxuXG4gICAgICAgIC8vIGZ1bmN0aW9uIGNhbGxzIGl0c2VsZiB0byBleHBsb3JlIGV2ZXJ5IG5ldyBwYXRoICBcblxuICAgICAgICBuZXdfcGF0aHNfdG9fZm9sbG93LmZvckVhY2goKHBhdGg6IFBhdGgpID0+IHtcbiAgICAgICAgICAgIC8vIHRoZSBwYXRoIHdpdGhvdXQgdGhlIG5leHQgbm90ZSB0aGF0IGlzIHRvIGJlIGV4cGxvcmVkXG4gICAgICAgICAgICBsZXQgYWxsX2l0ZW1zX3NvX2ZhciA9IHBhdGguYWxsX21lbWJlcnMuc2xpY2UoMCwgLTEpXG4gICAgICAgICAgICBsZXQgbGFzdF9pdGVtX3BhdGggPSBwYXRoLmFsbF9tZW1iZXJzLmxhc3QoKVxuICAgICAgICAgICAgbGV0IGxhc3RfaXRlbSA9IHRoaXMuZ2V0Tm90ZUZyb21QYXRoKGxhc3RfaXRlbV9wYXRoKVxuXG4gICAgICAgICAgICAvLyBzdG9wIGlmIHRoaXMgbm90ZSBpcyBhbHJlYWR5IHBhcnQgb2YgdGhlIGV4cGxvcmVkIHBhdGhcbiAgICAgICAgICAgIGlmIChhbGxfaXRlbXNfc29fZmFyLmluY2x1ZGVzKGxhc3RfaXRlbV9wYXRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzdG9wIGlmIHRoZSBwYXRoIG1lYW5kZXJzIHRvbyBtdWNoIFxuICAgICAgICAgICAgaWYgKChwYXRoLmFsbF9tZW1iZXJzLmxlbmd0aCAtIGxhc3RfaXRlbS5kaXN0YW5jZV9mcm9tX0NOKSA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mb2xsb3dQYXRocyhwYXRoKVxuICAgICAgICAgICAgY2FsbGVkX2l0c2VsZiA9IHRydWVcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIWNhbGxlZF9pdHNlbGYpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgYWRkIHRoZSBwYXRoIGlmIGl0IGRvZXMndCBsZWFkIGFueXdoZXJlIGVsc2UuIE5vIG5lZWQgdG8gaGF2ZSBwYXRocyB0aGF0IGFyZSBwYXJ0cyBvZiBvdGhlciBwYXRoc1xuICAgICAgICAgICAgdGhpcy5hbGxfcGF0aHMucHVzaChwYXRoX3NvX2ZhcilcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqIGZvciBldmVyeSBub3RlLCBzdG9yZSBhbGwgbm90ZXMgdGhhdCBjb21lIHJpZ2h0IGFmdGVyIGl0IGluIGFueSBwYXRoLiB0aGlzIGlzIGZvciBnZW5lcmF0aW5nIHRoZSBNYXAgT2YgQ29udGVudCBsYXRlciBvbiAqL1xuICAgIHVwZGF0ZURlc2NlbmRhbnRzKCkge1xuXG4gICAgICAgIC8vIGRlbGV0ZSBvbGQgSW5mb3JtYXRpb25cbiAgICAgICAgdGhpcy5kZXNjZW5kYW50cyA9IG5ldyBNYXAoKVxuXG4gICAgICAgIGxldCBkZXNjZW5kYW50c19yYW4gPSAwXG4gICAgICAgIHRoaXMuYWxsX3BhdGhzLmZvckVhY2goKHA6IFBhdGgpID0+IHtcblxuICAgICAgICAgICAgcC5hbGxfbWVtYmVycy5mb3JFYWNoKChub3RlX3BhdGg6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuXG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGl0J3Mgbm90IHRoZSBsYXN0IG1lbWJlciBvZiB0aGUgcGF0aFxuICAgICAgICAgICAgICAgIGlmICghKGluZGV4ID09IHAuYWxsX21lbWJlcnMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGVudHJ5IGluIGRlc2NlbmRhbnRzIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlc2NlbmRhbnRzLmhhcyhub3RlX3BhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NlbmRhbnRzLnNldChub3RlX3BhdGgsIFtdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudHNfcmFuICs9IDFcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NlbmRhbnRzX3JhbiAlIDEwMDAgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9nKFwiZGVzY2VuZGFudHMgcmFuIFwiICsgU3RyaW5nKGRlc2NlbmRhbnRzX3JhbikpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRfcGF0aF9tZW1iZXIgPSBwLmFsbF9tZW1iZXJzW2luZGV4ICsgMV1cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG5vdGUgYXMgZGVzY2VuZGFudCBpZiBpdCBpc24ndCBhbHJlYWR5IHN0b3JlZCBpbiBhcnJheVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGVzY2VuZGFudHMuZ2V0KG5vdGVfcGF0aCkuaW5jbHVkZXMobmV4dF9wYXRoX21lbWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzY2VuZGFudHMuc2V0KG5vdGVfcGF0aCwgdGhpcy5kZXNjZW5kYW50cy5nZXQobm90ZV9wYXRoKS5jb25jYXQobmV4dF9wYXRoX21lbWJlcikpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKVxuICAgICAgICB9KVxuXG4gICAgfVxuICAgIGdldExpbmtzRnJvbU5vdGUocGF0aDogc3RyaW5nLCBjb250YWluZWRfaW5fZGI6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGxpbmtjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUocGF0aCkubGlua3NcbiAgICAgICAgbGV0IGFsbF9saW5rczogc3RyaW5nW10gPSBbXVxuICAgICAgICBpZiAobGlua2NhY2hlKSB7XG4gICAgICAgICAgICBsaW5rY2FjaGUuZm9yRWFjaCgodmFsOiBMaW5rQ2FjaGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgbGluayBpcyB2YWxpZCBcbiAgICAgICAgICAgICAgICBsZXQgbGlua19kZXN0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdCh2YWwubGluaywgXCIvXCIpXG4gICAgICAgICAgICAgICAgLy9UT0RPIGlzIGl0IG5lY2Nlc3NhcnkgdG8gYXZvaWQgaW5jbHVkaW5nIGxpbmtzIG11bHRpcGxlIHRpbWVzPyBtYXliZSB0aGV5IGNhbid0IGV2ZW4gYmUgZHVwbGljYXRlIGluIHRoZSBsaW5rY2FjaGVcbiAgICAgICAgICAgICAgICBpZiAobGlua19kZXN0ICYmICFhbGxfbGlua3MuaW5jbHVkZXMobGlua19kZXN0LnBhdGgpICYmICghY29udGFpbmVkX2luX2RiIHx8IHRoaXMuZGJfa2V5cy5jb250YWlucyhsaW5rX2Rlc3QucGF0aCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbF9saW5rcy5wdXNoKGxpbmtfZGVzdC5wYXRoKVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxfbGlua3NcbiAgICB9XG5cblxuXG5cbn0iLCJmdW5jdGlvbiBub29wKCkgeyB9XG5jb25zdCBpZGVudGl0eSA9IHggPT4geDtcbmZ1bmN0aW9uIGFzc2lnbih0YXIsIHNyYykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBmb3IgKGNvbnN0IGsgaW4gc3JjKVxuICAgICAgICB0YXJba10gPSBzcmNba107XG4gICAgcmV0dXJuIHRhcjtcbn1cbmZ1bmN0aW9uIGlzX3Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGFkZF9sb2NhdGlvbihlbGVtZW50LCBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIpIHtcbiAgICBlbGVtZW50Ll9fc3ZlbHRlX21ldGEgPSB7XG4gICAgICAgIGxvYzogeyBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIgfVxuICAgIH07XG59XG5mdW5jdGlvbiBydW4oZm4pIHtcbiAgICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cbmZ1bmN0aW9uIHJ1bl9hbGwoZm5zKSB7XG4gICAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYiB8fCAoKGEgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnKSB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKGVsZW1lbnRfc3JjLCB1cmwpIHtcbiAgICBpZiAoIXNyY191cmxfZXF1YWxfYW5jaG9yKSB7XG4gICAgICAgIHNyY191cmxfZXF1YWxfYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIH1cbiAgICBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiBlbGVtZW50X3NyYyA9PT0gc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZjtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiBpc19lbXB0eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmIChzdG9yZSAhPSBudWxsICYmIHR5cGVvZiBzdG9yZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtuYW1lfScgaXMgbm90IGEgc3RvcmUgd2l0aCBhICdzdWJzY3JpYmUnIG1ldGhvZGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzdG9yZSwgLi4uY2FsbGJhY2tzKSB7XG4gICAgaWYgKHN0b3JlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKC4uLmNhbGxiYWNrcyk7XG4gICAgcmV0dXJuIHVuc3ViLnVuc3Vic2NyaWJlID8gKCkgPT4gdW5zdWIudW5zdWJzY3JpYmUoKSA6IHVuc3ViO1xufVxuZnVuY3Rpb24gZ2V0X3N0b3JlX3ZhbHVlKHN0b3JlKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHN1YnNjcmliZShzdG9yZSwgXyA9PiB2YWx1ZSA9IF8pKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29tcG9uZW50X3N1YnNjcmliZShjb21wb25lbnQsIHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gY3JlYXRlX3Nsb3QoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY3R4ID0gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25bMF0oc2xvdF9jdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uWzFdICYmIGZuXG4gICAgICAgID8gYXNzaWduKCQkc2NvcGUuY3R4LnNsaWNlKCksIGRlZmluaXRpb25bMV0oZm4oY3R4KSkpXG4gICAgICAgIDogJCRzY29wZS5jdHg7XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jaGFuZ2VzKGRlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uWzJdICYmIGZuKSB7XG4gICAgICAgIGNvbnN0IGxldHMgPSBkZWZpbml0aW9uWzJdKGZuKGRpcnR5KSk7XG4gICAgICAgIGlmICgkJHNjb3BlLmRpcnR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGV0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgoJCRzY29wZS5kaXJ0eS5sZW5ndGgsIGxldHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRbaV0gPSAkJHNjb3BlLmRpcnR5W2ldIHwgbGV0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICQkc2NvcGUuZGlydHkgfCBsZXRzO1xuICAgIH1cbiAgICByZXR1cm4gJCRzY29wZS5kaXJ0eTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGlmIChzbG90X2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jb250ZXh0ID0gZ2V0X3Nsb3RfY29udGV4dChzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG4gICAgICAgIHNsb3QucChzbG90X2NvbnRleHQsIHNsb3RfY2hhbmdlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pO1xufVxuZnVuY3Rpb24gZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlKCQkc2NvcGUpIHtcbiAgICBpZiAoJCRzY29wZS5jdHgubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgY29uc3QgZGlydHkgPSBbXTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gJCRzY29wZS5jdHgubGVuZ3RoIC8gMzI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5W2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBleGNsdWRlX2ludGVybmFsX3Byb3BzKHByb3BzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoa1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdWx0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfcmVzdF9wcm9wcyhwcm9wcywga2V5cykge1xuICAgIGNvbnN0IHJlc3QgPSB7fTtcbiAgICBrZXlzID0gbmV3IFNldChrZXlzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmICgha2V5cy5oYXMoaykgJiYga1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9zbG90cyhzbG90cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChyYW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG51bGxfdG9fZW1wdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfc3RvcmVfdmFsdWUoc3RvcmUsIHJldCwgdmFsdWUpIHtcbiAgICBzdG9yZS5zZXQodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59XG5jb25zdCBoYXNfcHJvcCA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuZnVuY3Rpb24gYWN0aW9uX2Rlc3Ryb3llcihhY3Rpb25fcmVzdWx0KSB7XG4gICAgcmV0dXJuIGFjdGlvbl9yZXN1bHQgJiYgaXNfZnVuY3Rpb24oYWN0aW9uX3Jlc3VsdC5kZXN0cm95KSA/IGFjdGlvbl9yZXN1bHQuZGVzdHJveSA6IG5vb3A7XG59XG5cbmNvbnN0IGlzX2NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xubGV0IG5vdyA9IGlzX2NsaWVudFxuICAgID8gKCkgPT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gICAgOiAoKSA9PiBEYXRlLm5vdygpO1xubGV0IHJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgbm93ID0gZm47XG59XG5mdW5jdGlvbiBzZXRfcmFmKGZuKSB7XG4gICAgcmFmID0gZm47XG59XG5cbmNvbnN0IHRhc2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gcnVuX3Rhc2tzKG5vdykge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGlmICghdGFzay5jKG5vdykpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2suZigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhc2tzLnNpemUgIT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IG5ldyBQcm9taXNlKGZ1bGZpbGwgPT4ge1xuICAgICAgICAgICAgdGFza3MuYWRkKHRhc2sgPSB7IGM6IGNhbGxiYWNrLCBmOiBmdWxmaWxsIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgYWJvcnQoKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUcmFjayB3aGljaCBub2RlcyBhcmUgY2xhaW1lZCBkdXJpbmcgaHlkcmF0aW9uLiBVbmNsYWltZWQgbm9kZXMgY2FuIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbi8vIGF0IHRoZSBlbmQgb2YgaHlkcmF0aW9uIHdpdGhvdXQgdG91Y2hpbmcgdGhlIHJlbWFpbmluZyBub2Rlcy5cbmxldCBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0X2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kX2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwcGVyX2JvdW5kKGxvdywgaGlnaCwga2V5LCB2YWx1ZSkge1xuICAgIC8vIFJldHVybiBmaXJzdCBpbmRleCBvZiB2YWx1ZSBsYXJnZXIgdGhhbiBpbnB1dCB2YWx1ZSBpbiB0aGUgcmFuZ2UgW2xvdywgaGlnaClcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICBjb25zdCBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBpZiAoa2V5KG1pZCkgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG59XG5mdW5jdGlvbiBpbml0X2h5ZHJhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5oeWRyYXRlX2luaXQpXG4gICAgICAgIHJldHVybjtcbiAgICB0YXJnZXQuaHlkcmF0ZV9pbml0ID0gdHJ1ZTtcbiAgICAvLyBXZSBrbm93IHRoYXQgYWxsIGNoaWxkcmVuIGhhdmUgY2xhaW1fb3JkZXIgdmFsdWVzIHNpbmNlIHRoZSB1bmNsYWltZWQgaGF2ZSBiZWVuIGRldGFjaGVkIGlmIHRhcmdldCBpcyBub3QgPGhlYWQ+XG4gICAgbGV0IGNoaWxkcmVuID0gdGFyZ2V0LmNoaWxkTm9kZXM7XG4gICAgLy8gSWYgdGFyZ2V0IGlzIDxoZWFkPiwgdGhlcmUgbWF5IGJlIGNoaWxkcmVuIHdpdGhvdXQgY2xhaW1fb3JkZXJcbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnSEVBRCcpIHtcbiAgICAgICAgY29uc3QgbXlDaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbXlDaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuID0gbXlDaGlsZHJlbjtcbiAgICB9XG4gICAgLypcbiAgICAqIFJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkuXG4gICAgKiBXZSBjYW4gcmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseSBieSBmaW5kaW5nIHRoZSBsb25nZXN0IHN1YnNlcXVlbmNlIG9mXG4gICAgKiBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IGNsYWltZWQgaW4gb3JkZXIgYW5kIG9ubHkgbW92aW5nIHRoZSByZXN0LiBUaGUgbG9uZ2VzdFxuICAgICogc3Vic2VxdWVuY2Ugc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgdGhhdCBhcmUgY2xhaW1lZCBpbiBvcmRlciBjYW4gYmUgZm91bmQgYnlcbiAgICAqIGNvbXB1dGluZyB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIC5jbGFpbV9vcmRlciB2YWx1ZXMuXG4gICAgKlxuICAgICogVGhpcyBhbGdvcml0aG0gaXMgb3B0aW1hbCBpbiBnZW5lcmF0aW5nIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVvcmRlciBvcGVyYXRpb25zXG4gICAgKiBwb3NzaWJsZS5cbiAgICAqXG4gICAgKiBQcm9vZjpcbiAgICAqIFdlIGtub3cgdGhhdCwgZ2l2ZW4gYSBzZXQgb2YgcmVvcmRlcmluZyBvcGVyYXRpb25zLCB0aGUgbm9kZXMgdGhhdCBkbyBub3QgbW92ZVxuICAgICogYWx3YXlzIGZvcm0gYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSwgc2luY2UgdGhleSBkbyBub3QgbW92ZSBhbW9uZyBlYWNoIG90aGVyXG4gICAgKiBtZWFuaW5nIHRoYXQgdGhleSBtdXN0IGJlIGFscmVhZHkgb3JkZXJlZCBhbW9uZyBlYWNoIG90aGVyLiBUaHVzLCB0aGUgbWF4aW1hbFxuICAgICogc2V0IG9mIG5vZGVzIHRoYXQgZG8gbm90IG1vdmUgZm9ybSBhIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZS5cbiAgICAqL1xuICAgIC8vIENvbXB1dGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgLy8gbTogc3Vic2VxdWVuY2UgbGVuZ3RoIGogPT4gaW5kZXggayBvZiBzbWFsbGVzdCB2YWx1ZSB0aGF0IGVuZHMgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBsZW5ndGggalxuICAgIGNvbnN0IG0gPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICAvLyBQcmVkZWNlc3NvciBpbmRpY2VzICsgMVxuICAgIGNvbnN0IHAgPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGgpO1xuICAgIG1bMF0gPSAtMTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV0uY2xhaW1fb3JkZXI7XG4gICAgICAgIC8vIEZpbmQgdGhlIGxhcmdlc3Qgc3Vic2VxdWVuY2UgbGVuZ3RoIHN1Y2ggdGhhdCBpdCBlbmRzIGluIGEgdmFsdWUgbGVzcyB0aGFuIG91ciBjdXJyZW50IHZhbHVlXG4gICAgICAgIC8vIHVwcGVyX2JvdW5kIHJldHVybnMgZmlyc3QgZ3JlYXRlciB2YWx1ZSwgc28gd2Ugc3VidHJhY3Qgb25lXG4gICAgICAgIC8vIHdpdGggZmFzdCBwYXRoIGZvciB3aGVuIHdlIGFyZSBvbiB0aGUgY3VycmVudCBsb25nZXN0IHN1YnNlcXVlbmNlXG4gICAgICAgIGNvbnN0IHNlcUxlbiA9ICgobG9uZ2VzdCA+IDAgJiYgY2hpbGRyZW5bbVtsb25nZXN0XV0uY2xhaW1fb3JkZXIgPD0gY3VycmVudCkgPyBsb25nZXN0ICsgMSA6IHVwcGVyX2JvdW5kKDEsIGxvbmdlc3QsIGlkeCA9PiBjaGlsZHJlblttW2lkeF1dLmNsYWltX29yZGVyLCBjdXJyZW50KSkgLSAxO1xuICAgICAgICBwW2ldID0gbVtzZXFMZW5dICsgMTtcbiAgICAgICAgY29uc3QgbmV3TGVuID0gc2VxTGVuICsgMTtcbiAgICAgICAgLy8gV2UgY2FuIGd1YXJhbnRlZSB0aGF0IGN1cnJlbnQgaXMgdGhlIHNtYWxsZXN0IHZhbHVlLiBPdGhlcndpc2UsIHdlIHdvdWxkIGhhdmUgZ2VuZXJhdGVkIGEgbG9uZ2VyIHNlcXVlbmNlLlxuICAgICAgICBtW25ld0xlbl0gPSBpO1xuICAgICAgICBsb25nZXN0ID0gTWF0aC5tYXgobmV3TGVuLCBsb25nZXN0KTtcbiAgICB9XG4gICAgLy8gVGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBub2RlcyAoaW5pdGlhbGx5IHJldmVyc2VkKVxuICAgIGNvbnN0IGxpcyA9IFtdO1xuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBub2Rlcywgbm9kZXMgdGhhdCB3aWxsIGJlIG1vdmVkXG4gICAgY29uc3QgdG9Nb3ZlID0gW107XG4gICAgbGV0IGxhc3QgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGN1ciA9IG1bbG9uZ2VzdF0gKyAxOyBjdXIgIT0gMDsgY3VyID0gcFtjdXIgLSAxXSkge1xuICAgICAgICBsaXMucHVzaChjaGlsZHJlbltjdXIgLSAxXSk7XG4gICAgICAgIGZvciAoOyBsYXN0ID49IGN1cjsgbGFzdC0tKSB7XG4gICAgICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICBmb3IgKDsgbGFzdCA+PSAwOyBsYXN0LS0pIHtcbiAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgIH1cbiAgICBsaXMucmV2ZXJzZSgpO1xuICAgIC8vIFdlIHNvcnQgdGhlIG5vZGVzIGJlaW5nIG1vdmVkIHRvIGd1YXJhbnRlZSB0aGF0IHRoZWlyIGluc2VydGlvbiBvcmRlciBtYXRjaGVzIHRoZSBjbGFpbSBvcmRlclxuICAgIHRvTW92ZS5zb3J0KChhLCBiKSA9PiBhLmNsYWltX29yZGVyIC0gYi5jbGFpbV9vcmRlcik7XG4gICAgLy8gRmluYWxseSwgd2UgbW92ZSB0aGUgbm9kZXNcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGogPCBsaXMubGVuZ3RoICYmIHRvTW92ZVtpXS5jbGFpbV9vcmRlciA+PSBsaXNbal0uY2xhaW1fb3JkZXIpIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSBqIDwgbGlzLmxlbmd0aCA/IGxpc1tqXSA6IG51bGw7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodG9Nb3ZlW2ldLCBhbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzKHRhcmdldCwgc3R5bGVfc2hlZXRfaWQsIHN0eWxlcykge1xuICAgIGNvbnN0IGFwcGVuZF9zdHlsZXNfdG8gPSBnZXRfcm9vdF9mb3Jfc3R5bGUodGFyZ2V0KTtcbiAgICBpZiAoIWFwcGVuZF9zdHlsZXNfdG8uZ2V0RWxlbWVudEJ5SWQoc3R5bGVfc2hlZXRfaWQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBzdHlsZV9zaGVldF9pZDtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgICAgIGFwcGVuZF9zdHlsZXNoZWV0KGFwcGVuZF9zdHlsZXNfdG8sIHN0eWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSkge1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIGNvbnN0IHJvb3QgPSBub2RlLmdldFJvb3ROb2RlID8gbm9kZS5nZXRSb290Tm9kZSgpIDogbm9kZS5vd25lckRvY3VtZW50O1xuICAgIGlmIChyb290Lmhvc3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZV9lbGVtZW50ID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICBhcHBlbmRfc3R5bGVzaGVldChnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSksIHN0eWxlX2VsZW1lbnQpO1xuICAgIHJldHVybiBzdHlsZV9lbGVtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQobm9kZSwgc3R5bGUpIHtcbiAgICBhcHBlbmQobm9kZS5oZWFkIHx8IG5vZGUsIHN0eWxlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZykge1xuICAgICAgICBpbml0X2h5ZHJhdGUodGFyZ2V0KTtcbiAgICAgICAgaWYgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9PT0gdW5kZWZpbmVkKSB8fCAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQucGFyZW50RWxlbWVudCAhPT0gdGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2tpcCBub2RlcyBvZiB1bmRlZmluZWQgb3JkZXJpbmdcbiAgICAgICAgd2hpbGUgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLmNsYWltX29yZGVyID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlICE9PSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCkge1xuICAgICAgICAgICAgLy8gV2Ugb25seSBpbnNlcnQgaWYgdGhlIG9yZGVyaW5nIG9mIHRoaXMgbm9kZSBzaG91bGQgYmUgbW9kaWZpZWQgb3IgdGhlIHBhcmVudCBub2RlIGlzIG5vdCB0YXJnZXRcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQgfHwgbm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nICYmICFhbmNob3IpIHtcbiAgICAgICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9IGFuY2hvcikge1xuICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2gobm9kZSkge1xuICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfZWFjaChpdGVyYXRpb25zLCBkZXRhY2hpbmcpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGl0ZXJhdGlvbnNbaV0pXG4gICAgICAgICAgICBpdGVyYXRpb25zW2ldLmQoZGV0YWNoaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnRfaXMobmFtZSwgaXMpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lLCB7IGlzIH0pO1xufVxuZnVuY3Rpb24gb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcyhvYmosIGV4Y2x1ZGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNfcHJvcChvYmosIGspXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAmJiBleGNsdWRlLmluZGV4T2YoaykgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0YXJnZXRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIHN2Z19lbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIG5hbWUpO1xufVxuZnVuY3Rpb24gdGV4dChkYXRhKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpO1xufVxuZnVuY3Rpb24gc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRleHQoJyAnKTtcbn1cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICAgIHJldHVybiB0ZXh0KCcnKTtcbn1cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwcmV2ZW50X2RlZmF1bHQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzdG9wX3Byb3BhZ2F0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNlbGYoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcylcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cnVzdGVkKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC5pc1RydXN0ZWQpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgZWxzZSBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSAhPT0gdmFsdWUpXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0X2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG5vZGUuX19wcm90b19fKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdfX3ZhbHVlJykge1xuICAgICAgICAgICAgbm9kZS52YWx1ZSA9IG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yc1trZXldICYmIGRlc2NyaXB0b3JzW2tleV0uc2V0KSB7XG4gICAgICAgICAgICBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdmdfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGlmIChwcm9wIGluIG5vZGUpIHtcbiAgICAgICAgbm9kZVtwcm9wXSA9IHR5cGVvZiBub2RlW3Byb3BdID09PSAnYm9vbGVhbicgJiYgdmFsdWUgPT09ICcnID8gdHJ1ZSA6IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXR0cihub2RlLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24geGxpbmtfYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUoZ3JvdXAsIF9fdmFsdWUsIGNoZWNrZWQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChncm91cFtpXS5jaGVja2VkKVxuICAgICAgICAgICAgdmFsdWUuYWRkKGdyb3VwW2ldLl9fdmFsdWUpO1xuICAgIH1cbiAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgdmFsdWUuZGVsZXRlKF9fdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB0b19udW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6ICt2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRpbWVfcmFuZ2VzX3RvX2FycmF5KHJhbmdlcykge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyYXkucHVzaCh7IHN0YXJ0OiByYW5nZXMuc3RhcnQoaSksIGVuZDogcmFuZ2VzLmVuZChpKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBpbml0X2NsYWltX2luZm8obm9kZXMpIHtcbiAgICBpZiAobm9kZXMuY2xhaW1faW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8gPSB7IGxhc3RfaW5kZXg6IDAsIHRvdGFsX2NsYWltZWQ6IDAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGFpbV9ub2RlKG5vZGVzLCBwcmVkaWNhdGUsIHByb2Nlc3NOb2RlLCBjcmVhdGVOb2RlLCBkb250VXBkYXRlTGFzdEluZGV4ID0gZmFsc2UpIHtcbiAgICAvLyBUcnkgdG8gZmluZCBub2RlcyBpbiBhbiBvcmRlciBzdWNoIHRoYXQgd2UgbGVuZ3RoZW4gdGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgcmVzdWx0Tm9kZSA9ICgoKSA9PiB7XG4gICAgICAgIC8vIFdlIGZpcnN0IHRyeSB0byBmaW5kIGFuIGVsZW1lbnQgYWZ0ZXIgdGhlIHByZXZpb3VzIG9uZVxuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4OyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHRyeSB0byBmaW5kIG9uZSBiZWZvcmVcbiAgICAgICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIHNvIHRoYXQgd2UgZG9uJ3QgZ28gdG9vIGZhciBiYWNrXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2Ugd2Ugc3BsaWNlZCBiZWZvcmUgdGhlIGxhc3RfaW5kZXgsIHdlIGRlY3JlYXNlIGl0XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGFueSBtYXRjaGluZyBub2RlLCB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgIHJldHVybiBjcmVhdGVOb2RlKCk7XG4gICAgfSkoKTtcbiAgICByZXN1bHROb2RlLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIHJldHVybiByZXN1bHROb2RlO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcywgc3ZnKSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVOYW1lID09PSBuYW1lLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG5vZGUuYXR0cmlidXRlc1tqXTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZW1vdmUucHVzaChhdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlLmZvckVhY2godiA9PiBub2RlLnJlbW92ZUF0dHJpYnV0ZSh2KSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSwgKCkgPT4gc3ZnID8gc3ZnX2VsZW1lbnQobmFtZSkgOiBlbGVtZW50KG5hbWUpKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3RleHQobm9kZXMsIGRhdGEpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDMsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSAnJyArIGRhdGE7XG4gICAgICAgIGlmIChub2RlLmRhdGEuc3RhcnRzV2l0aChkYXRhU3RyKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YS5sZW5ndGggIT09IGRhdGFTdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3BsaXRUZXh0KGRhdGFTdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IGRhdGFTdHI7XG4gICAgICAgIH1cbiAgICB9LCAoKSA9PiB0ZXh0KGRhdGEpLCB0cnVlIC8vIFRleHQgbm9kZXMgc2hvdWxkIG5vdCB1cGRhdGUgbGFzdCBpbmRleCBzaW5jZSBpdCBpcyBsaWtlbHkgbm90IHdvcnRoIGl0IHRvIGVsaW1pbmF0ZSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGFjdHVhbCBlbGVtZW50c1xuICAgICk7XG59XG5mdW5jdGlvbiBjbGFpbV9zcGFjZShub2Rlcykge1xuICAgIHJldHVybiBjbGFpbV90ZXh0KG5vZGVzLCAnICcpO1xufVxuZnVuY3Rpb24gZmluZF9jb21tZW50KG5vZGVzLCB0ZXh0LCBzdGFydCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogY29tbWVudCBub2RlICovICYmIG5vZGUudGV4dENvbnRlbnQudHJpbSgpID09PSB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gY2xhaW1faHRtbF90YWcobm9kZXMpIHtcbiAgICAvLyBmaW5kIGh0bWwgb3BlbmluZyB0YWdcbiAgICBjb25zdCBzdGFydF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX1NUQVJUJywgMCk7XG4gICAgY29uc3QgZW5kX2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfRU5EJywgc3RhcnRfaW5kZXgpO1xuICAgIGlmIChzdGFydF9pbmRleCA9PT0gZW5kX2luZGV4KSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbFRhZ0h5ZHJhdGlvbigpO1xuICAgIH1cbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IGh0bWxfdGFnX25vZGVzID0gbm9kZXMuc3BsaWNlKHN0YXJ0X2luZGV4LCBlbmRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb24oc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIGlmIChvcHRpb24uX192YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbi8vIHVuZm9ydHVuYXRlbHkgdGhpcyBjYW4ndCBiZSBhIGNvbnN0YW50IGFzIHRoYXQgd291bGRuJ3QgYmUgdHJlZS1zaGFrZWFibGVcbi8vIHNvIHdlIGNhY2hlIHRoZSByZXN1bHQgaW5zdGVhZFxubGV0IGNyb3Nzb3JpZ2luO1xuZnVuY3Rpb24gaXNfY3Jvc3NvcmlnaW4oKSB7XG4gICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3Jvc3NvcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdm9pZCB3aW5kb3cucGFyZW50LmRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjcm9zc29yaWdpbjtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKGNvbXB1dGVkX3N0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG4gICAgY29uc3QgaWZyYW1lID0gZWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAnICtcbiAgICAgICAgJ292ZXJmbG93OiBoaWRkZW47IGJvcmRlcjogMDsgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBpZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICBjb25zdCBjcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luKCk7XG4gICAgbGV0IHVuc3Vic2NyaWJlO1xuICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5cIjtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4od2luZG93LCAnbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpXG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKGlmcmFtZS5jb250ZW50V2luZG93LCAncmVzaXplJywgZm4pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmQobm9kZSwgaWZyYW1lKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodW5zdWJzY3JpYmUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGV0YWNoKGlmcmFtZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIGJ1YmJsZXMgPSBmYWxzZSkge1xuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBidWJibGVzLCBmYWxzZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5X3NlbGVjdG9yX2FsbChzZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG59XG5jbGFzcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICB9XG4gICAgbShodG1sLCB0YXJnZXQsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmUpIHtcbiAgICAgICAgICAgIHRoaXMuZSA9IGVsZW1lbnQodGFyZ2V0Lm5vZGVOYW1lKTtcbiAgICAgICAgICAgIHRoaXMudCA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuYyhodG1sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmkoYW5jaG9yKTtcbiAgICB9XG4gICAgaChodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydCh0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwKGh0bWwpIHtcbiAgICAgICAgdGhpcy5kKCk7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICAgICAgdGhpcy5pKHRoaXMuYSk7XG4gICAgfVxuICAgIGQoKSB7XG4gICAgICAgIHRoaXMubi5mb3JFYWNoKGRldGFjaCk7XG4gICAgfVxufVxuY2xhc3MgSHRtbFRhZ0h5ZHJhdGlvbiBleHRlbmRzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGNsYWltZWRfbm9kZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICAgICAgdGhpcy5sID0gY2xhaW1lZF9ub2RlcztcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmwpIHtcbiAgICAgICAgICAgIHRoaXMubiA9IHRoaXMubDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydF9oeWRyYXRpb24odGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVfdG9fb2JqZWN0KGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFthdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzKGVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICByZXN1bHRbbm9kZS5zbG90IHx8ICdkZWZhdWx0J10gPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IGFjdGl2ZV9kb2NzID0gbmV3IFNldCgpO1xubGV0IGFjdGl2ZSA9IDA7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9zdHJpbmctaGFzaC9ibG9iL21hc3Rlci9pbmRleC5qc1xuZnVuY3Rpb24gaGFzaChzdHIpIHtcbiAgICBsZXQgaGFzaCA9IDUzODE7XG4gICAgbGV0IGkgPSBzdHIubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBoYXNoID4+PiAwO1xufVxuZnVuY3Rpb24gY3JlYXRlX3J1bGUobm9kZSwgYSwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNlLCBmbiwgdWlkID0gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSAxNi42NjYgLyBkdXJhdGlvbjtcbiAgICBsZXQga2V5ZnJhbWVzID0gJ3tcXG4nO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDw9IDE7IHAgKz0gc3RlcCkge1xuICAgICAgICBjb25zdCB0ID0gYSArIChiIC0gYSkgKiBlYXNlKHApO1xuICAgICAgICBrZXlmcmFtZXMgKz0gcCAqIDEwMCArIGAleyR7Zm4odCwgMSAtIHQpfX1cXG5gO1xuICAgIH1cbiAgICBjb25zdCBydWxlID0ga2V5ZnJhbWVzICsgYDEwMCUgeyR7Zm4oYiwgMSAtIGIpfX1cXG59YDtcbiAgICBjb25zdCBuYW1lID0gYF9fc3ZlbHRlXyR7aGFzaChydWxlKX1fJHt1aWR9YDtcbiAgICBjb25zdCBkb2MgPSBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSk7XG4gICAgYWN0aXZlX2RvY3MuYWRkKGRvYyk7XG4gICAgY29uc3Qgc3R5bGVzaGVldCA9IGRvYy5fX3N2ZWx0ZV9zdHlsZXNoZWV0IHx8IChkb2MuX19zdmVsdGVfc3R5bGVzaGVldCA9IGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpLnNoZWV0KTtcbiAgICBjb25zdCBjdXJyZW50X3J1bGVzID0gZG9jLl9fc3ZlbHRlX3J1bGVzIHx8IChkb2MuX19zdmVsdGVfcnVsZXMgPSB7fSk7XG4gICAgaWYgKCFjdXJyZW50X3J1bGVzW25hbWVdKSB7XG4gICAgICAgIGN1cnJlbnRfcnVsZXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtuYW1lfSAke3J1bGV9YCwgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBhbmltYXRpb24gPSBub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJztcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbiA/IGAke2FuaW1hdGlvbn0sIGAgOiAnJ30ke25hbWV9ICR7ZHVyYXRpb259bXMgbGluZWFyICR7ZGVsYXl9bXMgMSBib3RoYDtcbiAgICBhY3RpdmUgKz0gMTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBwcmV2aW91cyA9IChub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJykuc3BsaXQoJywgJyk7XG4gICAgY29uc3QgbmV4dCA9IHByZXZpb3VzLmZpbHRlcihuYW1lXG4gICAgICAgID8gYW5pbSA9PiBhbmltLmluZGV4T2YobmFtZSkgPCAwIC8vIHJlbW92ZSBzcGVjaWZpYyBhbmltYXRpb25cbiAgICAgICAgOiBhbmltID0+IGFuaW0uaW5kZXhPZignX19zdmVsdGUnKSA9PT0gLTEgLy8gcmVtb3ZlIGFsbCBTdmVsdGUgYW5pbWF0aW9uc1xuICAgICk7XG4gICAgY29uc3QgZGVsZXRlZCA9IHByZXZpb3VzLmxlbmd0aCAtIG5leHQubGVuZ3RoO1xuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gbmV4dC5qb2luKCcsICcpO1xuICAgICAgICBhY3RpdmUgLT0gZGVsZXRlZDtcbiAgICAgICAgaWYgKCFhY3RpdmUpXG4gICAgICAgICAgICBjbGVhcl9ydWxlcygpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFyX3J1bGVzKCkge1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGFjdGl2ZV9kb2NzLmZvckVhY2goZG9jID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlc2hlZXQgPSBkb2MuX19zdmVsdGVfc3R5bGVzaGVldDtcbiAgICAgICAgICAgIGxldCBpID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuZGVsZXRlUnVsZShpKTtcbiAgICAgICAgICAgIGRvYy5fX3N2ZWx0ZV9ydWxlcyA9IHt9O1xuICAgICAgICB9KTtcbiAgICAgICAgYWN0aXZlX2RvY3MuY2xlYXIoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlX2FuaW1hdGlvbihub2RlLCBmcm9tLCBmbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFmcm9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB0byA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGZyb20ubGVmdCA9PT0gdG8ubGVmdCAmJiBmcm9tLnJpZ2h0ID09PSB0by5yaWdodCAmJiBmcm9tLnRvcCA9PT0gdG8udG9wICYmIGZyb20uYm90dG9tID09PSB0by5ib3R0b20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogc2hvdWxkIHRoaXMgYmUgc2VwYXJhdGVkIGZyb20gZGVzdHJ1Y3R1cmluZz8gT3Igc3RhcnQvZW5kIGFkZGVkIHRvIHB1YmxpYyBhcGkgYW5kIGRvY3VtZW50YXRpb24/XG4gICAgc3RhcnQ6IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86XG4gICAgZW5kID0gc3RhcnRfdGltZSArIGR1cmF0aW9uLCB0aWNrID0gbm9vcCwgY3NzIH0gPSBmbihub2RlLCB7IGZyb20sIHRvIH0sIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IG5hbWU7XG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5KSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgbmFtZSk7XG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9vcChub3cgPT4ge1xuICAgICAgICBpZiAoIXN0YXJ0ZWQgJiYgbm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkICYmIG5vdyA+PSBlbmQpIHtcbiAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBzdGFydF90aW1lO1xuICAgICAgICAgICAgY29uc3QgdCA9IDAgKyAxICogZWFzaW5nKHAgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGFydCgpO1xuICAgIHRpY2soMCwgMSk7XG4gICAgcmV0dXJuIHN0b3A7XG59XG5mdW5jdGlvbiBmaXhfcG9zaXRpb24obm9kZSkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScgJiYgc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzdHlsZTtcbiAgICAgICAgY29uc3QgYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZF90cmFuc2Zvcm0obm9kZSwgYSkge1xuICAgIGNvbnN0IGIgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChhLmxlZnQgIT09IGIubGVmdCB8fCBhLnRvcCAhPT0gYi50b3ApIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzdHlsZS50cmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gdHJhbnNsYXRlKCR7YS5sZWZ0IC0gYi5sZWZ0fXB4LCAke2EudG9wIC0gYi50b3B9cHgpYDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50X2NvbXBvbmVudDtcbmZ1bmN0aW9uIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBjdXJyZW50X2NvbXBvbmVudCA9IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGdldF9jdXJyZW50X2NvbXBvbmVudCgpIHtcbiAgICBpZiAoIWN1cnJlbnRfY29tcG9uZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bmN0aW9uIGNhbGxlZCBvdXRzaWRlIGNvbXBvbmVudCBpbml0aWFsaXphdGlvbicpO1xuICAgIHJldHVybiBjdXJyZW50X2NvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGJlZm9yZVVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmJlZm9yZV91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbk1vdW50KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZnRlclVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmFmdGVyX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uRGVzdHJveShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX2Rlc3Ryb3kucHVzaChmbik7XG59XG5mdW5jdGlvbiBjcmVhdGVFdmVudERpc3BhdGNoZXIoKSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgcmV0dXJuICh0eXBlLCBkZXRhaWwpID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1t0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgLy8gVE9ETyBhcmUgdGhlcmUgc2l0dWF0aW9ucyB3aGVyZSBldmVudHMgY291bGQgYmUgZGlzcGF0Y2hlZFxuICAgICAgICAgICAgLy8gaW4gYSBzZXJ2ZXIgKG5vbi1ET00pIGVudmlyb25tZW50P1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwoY29tcG9uZW50LCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuc2V0KGtleSwgY29udGV4dCk7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmdldChrZXkpO1xufVxuZnVuY3Rpb24gZ2V0QWxsQ29udGV4dHMoKSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQ7XG59XG5mdW5jdGlvbiBoYXNDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmhhcyhrZXkpO1xufVxuLy8gVE9ETyBmaWd1cmUgb3V0IGlmIHdlIHN0aWxsIHdhbnQgdG8gc3VwcG9ydFxuLy8gc2hvcnRoYW5kIGV2ZW50cywgb3IgaWYgd2Ugd2FudCB0byBpbXBsZW1lbnRcbi8vIGEgcmVhbCBidWJibGluZyBtZWNoYW5pc21cbmZ1bmN0aW9uIGJ1YmJsZShjb21wb25lbnQsIGV2ZW50KSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiBmbi5jYWxsKHRoaXMsIGV2ZW50KSk7XG4gICAgfVxufVxuXG5jb25zdCBkaXJ0eV9jb21wb25lbnRzID0gW107XG5jb25zdCBpbnRyb3MgPSB7IGVuYWJsZWQ6IGZhbHNlIH07XG5jb25zdCBiaW5kaW5nX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVuZGVyX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgZmx1c2hfY2FsbGJhY2tzID0gW107XG5jb25zdCByZXNvbHZlZF9wcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5sZXQgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gc2NoZWR1bGVfdXBkYXRlKCkge1xuICAgIGlmICghdXBkYXRlX3NjaGVkdWxlZCkge1xuICAgICAgICB1cGRhdGVfc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZWRfcHJvbWlzZS50aGVuKGZsdXNoKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0aWNrKCkge1xuICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgIHJldHVybiByZXNvbHZlZF9wcm9taXNlO1xufVxuZnVuY3Rpb24gYWRkX3JlbmRlcl9jYWxsYmFjayhmbikge1xuICAgIHJlbmRlcl9jYWxsYmFja3MucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZGRfZmx1c2hfY2FsbGJhY2soZm4pIHtcbiAgICBmbHVzaF9jYWxsYmFja3MucHVzaChmbik7XG59XG5sZXQgZmx1c2hpbmcgPSBmYWxzZTtcbmNvbnN0IHNlZW5fY2FsbGJhY2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgaWYgKGZsdXNoaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBkaXJ0eV9jb21wb25lbnRzW2ldO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoY29tcG9uZW50LiQkKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgd2hpbGUgKGJpbmRpbmdfY2FsbGJhY2tzLmxlbmd0aClcbiAgICAgICAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgIC8vIHRoZW4sIG9uY2UgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgY2FsbFxuICAgICAgICAvLyBhZnRlclVwZGF0ZSBmdW5jdGlvbnMuIFRoaXMgbWF5IGNhdXNlXG4gICAgICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcy4uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB3aGlsZSAoZmx1c2hfY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgICB9XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIGZsdXNoaW5nID0gZmFsc2U7XG4gICAgc2Vlbl9jYWxsYmFja3MuY2xlYXIoKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZSgkJCkge1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAkJC51cGRhdGUoKTtcbiAgICAgICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAgICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAgICAgJCQuZGlydHkgPSBbLTFdO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5wKCQkLmN0eCwgZGlydHkpO1xuICAgICAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgICB9XG59XG5cbmxldCBwcm9taXNlO1xuZnVuY3Rpb24gd2FpdCgpIHtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKG5vZGUsIGRpcmVjdGlvbiwga2luZCkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQoYCR7ZGlyZWN0aW9uID8gJ2ludHJvJyA6ICdvdXRybyd9JHtraW5kfWApKTtcbn1cbmNvbnN0IG91dHJvaW5nID0gbmV3IFNldCgpO1xubGV0IG91dHJvcztcbmZ1bmN0aW9uIGdyb3VwX291dHJvcygpIHtcbiAgICBvdXRyb3MgPSB7XG4gICAgICAgIHI6IDAsXG4gICAgICAgIGM6IFtdLFxuICAgICAgICBwOiBvdXRyb3MgLy8gcGFyZW50IGdyb3VwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoZWNrX291dHJvcygpIHtcbiAgICBpZiAoIW91dHJvcy5yKSB7XG4gICAgICAgIHJ1bl9hbGwob3V0cm9zLmMpO1xuICAgIH1cbiAgICBvdXRyb3MgPSBvdXRyb3MucDtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25faW4oYmxvY2ssIGxvY2FsKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLmkpIHtcbiAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgYmxvY2suaShsb2NhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9vdXQoYmxvY2ssIGxvY2FsLCBkZXRhY2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICAgICAgaWYgKG91dHJvaW5nLmhhcyhibG9jaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG91dHJvaW5nLmFkZChibG9jayk7XG4gICAgICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmQoMSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrLm8obG9jYWwpO1xuICAgIH1cbn1cbmNvbnN0IG51bGxfdHJhbnNpdGlvbiA9IHsgZHVyYXRpb246IDAgfTtcbmZ1bmN0aW9uIGNyZWF0ZV9pbl90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzLCB1aWQrKyk7XG4gICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgaWYgKHRhc2spXG4gICAgICAgICAgICB0YXNrLmFib3J0KCk7XG4gICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIHRydWUsICdzdGFydCcpKTtcbiAgICAgICAgdGFzayA9IGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCB0cnVlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQoKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbihnbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX291dF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGNvbnN0IGdyb3VwID0gb3V0cm9zO1xuICAgIGdyb3VwLnIgKz0gMTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMSwgMCwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ3N0YXJ0JykpO1xuICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEtLWdyb3VwLnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXN1bHQgaW4gYGVuZCgpYCBiZWluZyBjYWxsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBkb24ndCBuZWVkIHRvIGNsZWFuIHVwIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwoZ3JvdXAuYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSAtIHQsIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICBnbygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdvKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGVuZChyZXNldCkge1xuICAgICAgICAgICAgaWYgKHJlc2V0ICYmIGNvbmZpZy50aWNrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnRpY2soMSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMsIGludHJvKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHQgPSBpbnRybyA/IDAgOiAxO1xuICAgIGxldCBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgIGxldCBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgIGxldCBhbmltYXRpb25fbmFtZSA9IG51bGw7XG4gICAgZnVuY3Rpb24gY2xlYXJfYW5pbWF0aW9uKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluaXQocHJvZ3JhbSwgZHVyYXRpb24pIHtcbiAgICAgICAgY29uc3QgZCA9IChwcm9ncmFtLmIgLSB0KTtcbiAgICAgICAgZHVyYXRpb24gKj0gTWF0aC5hYnMoZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhOiB0LFxuICAgICAgICAgICAgYjogcHJvZ3JhbS5iLFxuICAgICAgICAgICAgZCxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgc3RhcnQ6IHByb2dyYW0uc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHByb2dyYW0uc3RhcnQgKyBkdXJhdGlvbixcbiAgICAgICAgICAgIGdyb3VwOiBwcm9ncmFtLmdyb3VwXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKGIpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBub3coKSArIGRlbGF5LFxuICAgICAgICAgICAgYlxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWIpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBwcm9ncmFtLmdyb3VwID0gb3V0cm9zO1xuICAgICAgICAgICAgb3V0cm9zLnIgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtIHx8IHBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYW4gaW50cm8sIGFuZCB0aGVyZSdzIGEgZGVsYXksIHdlIG5lZWQgdG8gZG9cbiAgICAgICAgICAgIC8vIGFuIGluaXRpYWwgdGljayBhbmQvb3IgYXBwbHkgQ1NTIGFuaW1hdGlvbiBpbW1lZGlhdGVseVxuICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYilcbiAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGIsICdzdGFydCcpKTtcbiAgICAgICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZ19wcm9ncmFtICYmIG5vdyA+IHBlbmRpbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHBlbmRpbmdfcHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ3N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBydW5uaW5nX3Byb2dyYW0uYiwgcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uLCAwLCBlYXNpbmcsIGNvbmZpZy5jc3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrKHQgPSBydW5uaW5nX3Byb2dyYW0uYiwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgZG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0uYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRybyDigJQgd2UgY2FuIHRpZHkgdXAgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRybyDigJQgbmVlZHMgdG8gYmUgY29vcmRpbmF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChydW5uaW5nX3Byb2dyYW0uZ3JvdXAuYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gbm93IC0gcnVubmluZ19wcm9ncmFtLnN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHJ1bm5pbmdfcHJvZ3JhbS5hICsgcnVubmluZ19wcm9ncmFtLmQgKiBlYXNpbmcocCAvIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gISEocnVubmluZ19wcm9ncmFtIHx8IHBlbmRpbmdfcHJvZ3JhbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBydW4oYikge1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZV9wcm9taXNlKHByb21pc2UsIGluZm8pIHtcbiAgICBjb25zdCB0b2tlbiA9IGluZm8udG9rZW4gPSB7fTtcbiAgICBmdW5jdGlvbiB1cGRhdGUodHlwZSwgaW5kZXgsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGluZm8udG9rZW4gIT09IHRva2VuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbmZvLnJlc29sdmVkID0gdmFsdWU7XG4gICAgICAgIGxldCBjaGlsZF9jdHggPSBpbmZvLmN0eDtcbiAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjaGlsZF9jdHggPSBjaGlsZF9jdHguc2xpY2UoKTtcbiAgICAgICAgICAgIGNoaWxkX2N0eFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlICYmIChpbmZvLmN1cnJlbnQgPSB0eXBlKShjaGlsZF9jdHgpO1xuICAgICAgICBsZXQgbmVlZHNfZmx1c2ggPSBmYWxzZTtcbiAgICAgICAgaWYgKGluZm8uYmxvY2spIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrcykge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzLmZvckVhY2goKGJsb2NrLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpbmRleCAmJiBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrc1tpXSA9PT0gYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9ja3NbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2suZCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICAgICAgYmxvY2subShpbmZvLm1vdW50KCksIGluZm8uYW5jaG9yKTtcbiAgICAgICAgICAgIG5lZWRzX2ZsdXNoID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLmJsb2NrID0gYmxvY2s7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrcylcbiAgICAgICAgICAgIGluZm8uYmxvY2tzW2luZGV4XSA9IGJsb2NrO1xuICAgICAgICBpZiAobmVlZHNfZmx1c2gpIHtcbiAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzX3Byb21pc2UocHJvbWlzZSkpIHtcbiAgICAgICAgY29uc3QgY3VycmVudF9jb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCB2YWx1ZSk7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5jYXRjaCwgMiwgaW5mby5lcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICAgICAgaWYgKCFpbmZvLmhhc0NhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBpZiB3ZSBwcmV2aW91c2x5IGhhZCBhIHRoZW4vY2F0Y2ggYmxvY2ssIGRlc3Ryb3kgaXRcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby5wZW5kaW5nKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5wZW5kaW5nLCAwKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHByb21pc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaChpbmZvLCBjdHgsIGRpcnR5KSB7XG4gICAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gICAgY29uc3QgeyByZXNvbHZlZCB9ID0gaW5mbztcbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8udmFsdWVdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8uY2F0Y2gpIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8uZXJyb3JdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGluZm8uYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbn1cblxuY29uc3QgZ2xvYmFscyA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gd2luZG93XG4gICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBnbG9iYWxUaGlzXG4gICAgICAgIDogZ2xvYmFsKTtcblxuZnVuY3Rpb24gZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZCgxKTtcbiAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG59XG5mdW5jdGlvbiBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZml4X2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9rZXllZF9lYWNoKG9sZF9ibG9ja3MsIGRpcnR5LCBnZXRfa2V5LCBkeW5hbWljLCBjdHgsIGxpc3QsIGxvb2t1cCwgbm9kZSwgZGVzdHJveSwgY3JlYXRlX2VhY2hfYmxvY2ssIG5leHQsIGdldF9jb250ZXh0KSB7XG4gICAgbGV0IG8gPSBvbGRfYmxvY2tzLmxlbmd0aDtcbiAgICBsZXQgbiA9IGxpc3QubGVuZ3RoO1xuICAgIGxldCBpID0gbztcbiAgICBjb25zdCBvbGRfaW5kZXhlcyA9IHt9O1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIG9sZF9pbmRleGVzW29sZF9ibG9ja3NbaV0ua2V5XSA9IGk7XG4gICAgY29uc3QgbmV3X2Jsb2NrcyA9IFtdO1xuICAgIGNvbnN0IG5ld19sb29rdXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZGVsdGFzID0gbmV3IE1hcCgpO1xuICAgIGkgPSBuO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgY2hpbGRfY3R4ID0gZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0X2tleShjaGlsZF9jdHgpO1xuICAgICAgICBsZXQgYmxvY2sgPSBsb29rdXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghYmxvY2spIHtcbiAgICAgICAgICAgIGJsb2NrID0gY3JlYXRlX2VhY2hfYmxvY2soa2V5LCBjaGlsZF9jdHgpO1xuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGR5bmFtaWMpIHtcbiAgICAgICAgICAgIGJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3X2xvb2t1cC5zZXQoa2V5LCBuZXdfYmxvY2tzW2ldID0gYmxvY2spO1xuICAgICAgICBpZiAoa2V5IGluIG9sZF9pbmRleGVzKVxuICAgICAgICAgICAgZGVsdGFzLnNldChrZXksIE1hdGguYWJzKGkgLSBvbGRfaW5kZXhlc1trZXldKSk7XG4gICAgfVxuICAgIGNvbnN0IHdpbGxfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBkaWRfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBpbnNlcnQoYmxvY2spIHtcbiAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgIGJsb2NrLm0obm9kZSwgbmV4dCk7XG4gICAgICAgIGxvb2t1cC5zZXQoYmxvY2sua2V5LCBibG9jayk7XG4gICAgICAgIG5leHQgPSBibG9jay5maXJzdDtcbiAgICAgICAgbi0tO1xuICAgIH1cbiAgICB3aGlsZSAobyAmJiBuKSB7XG4gICAgICAgIGNvbnN0IG5ld19ibG9jayA9IG5ld19ibG9ja3NbbiAtIDFdO1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW28gLSAxXTtcbiAgICAgICAgY29uc3QgbmV3X2tleSA9IG5ld19ibG9jay5rZXk7XG4gICAgICAgIGNvbnN0IG9sZF9rZXkgPSBvbGRfYmxvY2sua2V5O1xuICAgICAgICBpZiAobmV3X2Jsb2NrID09PSBvbGRfYmxvY2spIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIG5leHQgPSBuZXdfYmxvY2suZmlyc3Q7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgICAgICBuLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkIGJsb2NrXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbG9va3VwLmhhcyhuZXdfa2V5KSB8fCB3aWxsX21vdmUuaGFzKG5ld19rZXkpKSB7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaWRfbW92ZS5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWx0YXMuZ2V0KG5ld19rZXkpID4gZGVsdGFzLmdldChvbGRfa2V5KSkge1xuICAgICAgICAgICAgZGlkX21vdmUuYWRkKG5ld19rZXkpO1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aWxsX21vdmUuYWRkKG9sZF9rZXkpO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdoaWxlIChvLS0pIHtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvXTtcbiAgICAgICAgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfYmxvY2sua2V5KSlcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgIH1cbiAgICB3aGlsZSAobilcbiAgICAgICAgaW5zZXJ0KG5ld19ibG9ja3NbbiAtIDFdKTtcbiAgICByZXR1cm4gbmV3X2Jsb2Nrcztcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfa2V5cyhjdHgsIGxpc3QsIGdldF9jb250ZXh0LCBnZXRfa2V5KSB7XG4gICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0X2tleShnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpKTtcbiAgICAgICAgaWYgKGtleXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGhhdmUgZHVwbGljYXRlIGtleXMgaW4gYSBrZXllZCBlYWNoJyk7XG4gICAgICAgIH1cbiAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldF9zcHJlYWRfdXBkYXRlKGxldmVscywgdXBkYXRlcykge1xuICAgIGNvbnN0IHVwZGF0ZSA9IHt9O1xuICAgIGNvbnN0IHRvX251bGxfb3V0ID0ge307XG4gICAgY29uc3QgYWNjb3VudGVkX2ZvciA9IHsgJCRzY29wZTogMSB9O1xuICAgIGxldCBpID0gbGV2ZWxzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IG8gPSBsZXZlbHNbaV07XG4gICAgICAgIGNvbnN0IG4gPSB1cGRhdGVzW2ldO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuKSlcbiAgICAgICAgICAgICAgICAgICAgdG9fbnVsbF9vdXRba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhY2NvdW50ZWRfZm9yW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlW2tleV0gPSBuW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV2ZWxzW2ldID0gbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIHRvX251bGxfb3V0KSB7XG4gICAgICAgIGlmICghKGtleSBpbiB1cGRhdGUpKVxuICAgICAgICAgICAgdXBkYXRlW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGU7XG59XG5mdW5jdGlvbiBnZXRfc3ByZWFkX29iamVjdChzcHJlYWRfcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNwcmVhZF9wcm9wcyA9PT0gJ29iamVjdCcgJiYgc3ByZWFkX3Byb3BzICE9PSBudWxsID8gc3ByZWFkX3Byb3BzIDoge307XG59XG5cbi8vIHNvdXJjZTogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvaW5kaWNlcy5odG1sXG5jb25zdCBib29sZWFuX2F0dHJpYnV0ZXMgPSBuZXcgU2V0KFtcbiAgICAnYWxsb3dmdWxsc2NyZWVuJyxcbiAgICAnYWxsb3dwYXltZW50cmVxdWVzdCcsXG4gICAgJ2FzeW5jJyxcbiAgICAnYXV0b2ZvY3VzJyxcbiAgICAnYXV0b3BsYXknLFxuICAgICdjaGVja2VkJyxcbiAgICAnY29udHJvbHMnLFxuICAgICdkZWZhdWx0JyxcbiAgICAnZGVmZXInLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Zvcm1ub3ZhbGlkYXRlJyxcbiAgICAnaGlkZGVuJyxcbiAgICAnaXNtYXAnLFxuICAgICdsb29wJyxcbiAgICAnbXVsdGlwbGUnLFxuICAgICdtdXRlZCcsXG4gICAgJ25vbW9kdWxlJyxcbiAgICAnbm92YWxpZGF0ZScsXG4gICAgJ29wZW4nLFxuICAgICdwbGF5c2lubGluZScsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVxdWlyZWQnLFxuICAgICdyZXZlcnNlZCcsXG4gICAgJ3NlbGVjdGVkJ1xuXSk7XG5cbmNvbnN0IGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyID0gL1tcXHMnXCI+Lz1cXHV7RkREMH0tXFx1e0ZERUZ9XFx1e0ZGRkV9XFx1e0ZGRkZ9XFx1ezFGRkZFfVxcdXsxRkZGRn1cXHV7MkZGRkV9XFx1ezJGRkZGfVxcdXszRkZGRX1cXHV7M0ZGRkZ9XFx1ezRGRkZFfVxcdXs0RkZGRn1cXHV7NUZGRkV9XFx1ezVGRkZGfVxcdXs2RkZGRX1cXHV7NkZGRkZ9XFx1ezdGRkZFfVxcdXs3RkZGRn1cXHV7OEZGRkV9XFx1ezhGRkZGfVxcdXs5RkZGRX1cXHV7OUZGRkZ9XFx1e0FGRkZFfVxcdXtBRkZGRn1cXHV7QkZGRkV9XFx1e0JGRkZGfVxcdXtDRkZGRX1cXHV7Q0ZGRkZ9XFx1e0RGRkZFfVxcdXtERkZGRn1cXHV7RUZGRkV9XFx1e0VGRkZGfVxcdXtGRkZGRX1cXHV7RkZGRkZ9XFx1ezEwRkZGRX1cXHV7MTBGRkZGfV0vdTtcbi8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2F0dHJpYnV0ZXMtMlxuLy8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI25vbmNoYXJhY3RlclxuZnVuY3Rpb24gc3ByZWFkKGFyZ3MsIGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLmFyZ3MpO1xuICAgIGlmIChjbGFzc2VzX3RvX2FkZCkge1xuICAgICAgICBpZiAoYXR0cmlidXRlcy5jbGFzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzID0gY2xhc3Nlc190b19hZGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzICs9ICcgJyArIGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdHIgPSAnJztcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIudGVzdChuYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpXG4gICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgZWxzZSBpZiAoYm9vbGVhbl9hdHRyaWJ1dGVzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9IGAgJHtuYW1lfT1cIiR7dmFsdWV9XCJgO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cbmNvbnN0IGVzY2FwZWQgPSB7XG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmIzM5OycsXG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnXG59O1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwpIHtcbiAgICByZXR1cm4gU3RyaW5nKGh0bWwpLnJlcGxhY2UoL1tcIicmPD5dL2csIG1hdGNoID0+IGVzY2FwZWRbbWF0Y2hdKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IGVzY2FwZSh2YWx1ZSkgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9vYmplY3Qob2JqKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZShvYmpba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBlYWNoKGl0ZW1zLCBmbikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN0ciArPSBmbihpdGVtc1tpXSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBtaXNzaW5nX2NvbXBvbmVudCA9IHtcbiAgICAkJHJlbmRlcjogKCkgPT4gJydcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZV9jb21wb25lbnQoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC4kJHJlbmRlcikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N2ZWx0ZTpjb21wb25lbnQnKVxuICAgICAgICAgICAgbmFtZSArPSAnIHRoaXM9ey4uLn0nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwke25hbWV9PiBpcyBub3QgYSB2YWxpZCBTU1IgY29tcG9uZW50LiBZb3UgbWF5IG5lZWQgdG8gcmV2aWV3IHlvdXIgYnVpbGQgY29uZmlnIHRvIGVuc3VyZSB0aGF0IGRlcGVuZGVuY2llcyBhcmUgY29tcGlsZWQsIHJhdGhlciB0aGFuIGltcG9ydGVkIGFzIHByZS1jb21waWxlZCBtb2R1bGVzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogY29udGV4dCB8fCBbXSksXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGRpc2NhcmRlZFxuICAgICAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoeyAkJCB9KTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGZuKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cyk7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogKHByb3BzID0ge30sIHsgJCRzbG90cyA9IHt9LCBjb250ZXh0ID0gbmV3IE1hcCgpIH0gPSB7fSkgPT4ge1xuICAgICAgICAgICAgb25fZGVzdHJveSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0aXRsZTogJycsIGhlYWQ6ICcnLCBjc3M6IG5ldyBTZXQoKSB9O1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9ICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIHt9LCAkJHNsb3RzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJ1bl9hbGwob25fZGVzdHJveSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGh0bWwsXG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IEFycmF5LmZyb20ocmVzdWx0LmNzcykubWFwKGNzcyA9PiBjc3MuY29kZSkuam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbnVsbCAvLyBUT0RPXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWFkOiByZXN1bHQudGl0bGUgKyByZXN1bHQuaGVhZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJCRyZW5kZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkX2F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChib29sZWFuICYmICF2YWx1ZSkpXG4gICAgICAgIHJldHVybiAnJztcbiAgICByZXR1cm4gYCAke25hbWV9JHt2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogYD0ke3R5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBKU09OLnN0cmluZ2lmeShlc2NhcGUodmFsdWUpKSA6IGBcIiR7dmFsdWV9XCJgfWB9YDtcbn1cbmZ1bmN0aW9uIGFkZF9jbGFzc2VzKGNsYXNzZXMpIHtcbiAgICByZXR1cm4gY2xhc3NlcyA/IGAgY2xhc3M9XCIke2NsYXNzZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgb25fbW91bnQsIG9uX2Rlc3Ryb3ksIGFmdGVyX3VwZGF0ZSB9ID0gY29tcG9uZW50LiQkO1xuICAgIGZyYWdtZW50ICYmIGZyYWdtZW50Lm0odGFyZ2V0LCBhbmNob3IpO1xuICAgIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgICAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IG9wdGlvbnMuY29udGV4dCB8fCBbXSksXG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpLFxuICAgICAgICBkaXJ0eSxcbiAgICAgICAgc2tpcF9ib3VuZDogZmFsc2UsXG4gICAgICAgIHJvb3Q6IG9wdGlvbnMudGFyZ2V0IHx8IHBhcmVudF9jb21wb25lbnQuJCQucm9vdFxuICAgIH07XG4gICAgYXBwZW5kX3N0eWxlcyAmJiBhcHBlbmRfc3R5bGVzKCQkLnJvb3QpO1xuICAgIGxldCByZWFkeSA9IGZhbHNlO1xuICAgICQkLmN0eCA9IGluc3RhbmNlXG4gICAgICAgID8gaW5zdGFuY2UoY29tcG9uZW50LCBvcHRpb25zLnByb3BzIHx8IHt9LCAoaSwgcmV0LCAuLi5yZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJlc3QubGVuZ3RoID8gcmVzdFswXSA6IHJldDtcbiAgICAgICAgICAgIGlmICgkJC5jdHggJiYgbm90X2VxdWFsKCQkLmN0eFtpXSwgJCQuY3R4W2ldID0gdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkJC5za2lwX2JvdW5kICYmICQkLmJvdW5kW2ldKVxuICAgICAgICAgICAgICAgICAgICAkJC5ib3VuZFtpXSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWR5KVxuICAgICAgICAgICAgICAgICAgICBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9KVxuICAgICAgICA6IFtdO1xuICAgICQkLnVwZGF0ZSgpO1xuICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgIC8vIGBmYWxzZWAgYXMgYSBzcGVjaWFsIGNhc2Ugb2Ygbm8gRE9NIGNvbXBvbmVudFxuICAgICQkLmZyYWdtZW50ID0gY3JlYXRlX2ZyYWdtZW50ID8gY3JlYXRlX2ZyYWdtZW50KCQkLmN0eCkgOiBmYWxzZTtcbiAgICBpZiAob3B0aW9ucy50YXJnZXQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuaHlkcmF0ZSkge1xuICAgICAgICAgICAgc3RhcnRfaHlkcmF0aW5nKCk7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IGNoaWxkcmVuKG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5sKG5vZGVzKTtcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZGV0YWNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW50cm8pXG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGNvbXBvbmVudC4kJC5mcmFnbWVudCk7XG4gICAgICAgIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLmFuY2hvciwgb3B0aW9ucy5jdXN0b21FbGVtZW50KTtcbiAgICAgICAgZW5kX2h5ZHJhdGluZygpO1xuICAgICAgICBmbHVzaCgpO1xuICAgIH1cbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQocGFyZW50X2NvbXBvbmVudCk7XG59XG5sZXQgU3ZlbHRlRWxlbWVudDtcbmlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBTdmVsdGVFbGVtZW50ID0gY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgY29uc3QgeyBvbl9tb3VudCB9ID0gdGhpcy4kJDtcbiAgICAgICAgICAgIHRoaXMuJCQub25fZGlzY29ubmVjdCA9IG9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy4kJC5zbG90dGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuJCQuc2xvdHRlZFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ciwgX29sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpc1thdHRyXSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgcnVuX2FsbCh0aGlzLiQkLm9uX2Rpc2Nvbm5lY3QpO1xuICAgICAgICB9XG4gICAgICAgICRkZXN0cm95KCkge1xuICAgICAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgICAgICB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIC8vIFRPRE8gc2hvdWxkIHRoaXMgZGVsZWdhdGUgdG8gYWRkRXZlbnRMaXN0ZW5lcj9cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cy4gVXNlZCB3aGVuIGRldj1mYWxzZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgIH1cbiAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hfZGV2KHR5cGUsIGRldGFpbCkge1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KHR5cGUsIE9iamVjdC5hc3NpZ24oeyB2ZXJzaW9uOiAnMy40Mi4xJyB9LCBkZXRhaWwpLCB0cnVlKSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2Rldihub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmUnLCB7IG5vZGUgfSk7XG4gICAgZGV0YWNoKG5vZGUpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2JldHdlZW5fZGV2KGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nICYmIGJlZm9yZS5uZXh0U2libGluZyAhPT0gYWZ0ZXIpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9iZWZvcmVfZGV2KGFmdGVyKSB7XG4gICAgd2hpbGUgKGFmdGVyLnByZXZpb3VzU2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGFmdGVyLnByZXZpb3VzU2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2FmdGVyX2RldihiZWZvcmUpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5fZGV2KG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zLCBoYXNfcHJldmVudF9kZWZhdWx0LCBoYXNfc3RvcF9wcm9wYWdhdGlvbikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnMgPT09IHRydWUgPyBbJ2NhcHR1cmUnXSA6IG9wdGlvbnMgPyBBcnJheS5mcm9tKE9iamVjdC5rZXlzKG9wdGlvbnMpKSA6IFtdO1xuICAgIGlmIChoYXNfcHJldmVudF9kZWZhdWx0KVxuICAgICAgICBtb2RpZmllcnMucHVzaCgncHJldmVudERlZmF1bHQnKTtcbiAgICBpZiAoaGFzX3N0b3BfcHJvcGFnYXRpb24pXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdzdG9wUHJvcGFnYXRpb24nKTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUFkZEV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgY29uc3QgZGlzcG9zZSA9IGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHJfZGV2KG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlIH0pO1xuICAgIGVsc2VcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBwcm9wX2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0UHJvcGVydHknLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGRhdGFzZXRfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGUuZGF0YXNldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGFzZXQnLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhX2Rldih0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGEnLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmICEoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIGFyZykpIHtcbiAgICAgICAgbGV0IG1zZyA9ICd7I2VhY2h9IG9ubHkgaXRlcmF0ZXMgb3ZlciBhcnJheS1saWtlIG9iamVjdHMuJztcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgYXJnICYmIFN5bWJvbC5pdGVyYXRvciBpbiBhcmcpIHtcbiAgICAgICAgICAgIG1zZyArPSAnIFlvdSBjYW4gdXNlIGEgc3ByZWFkIHRvIGNvbnZlcnQgdGhpcyBpdGVyYWJsZSBpbnRvIGFuIGFycmF5Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfc2xvdHMobmFtZSwgc2xvdCwga2V5cykge1xuICAgIGZvciAoY29uc3Qgc2xvdF9rZXkgb2YgT2JqZWN0LmtleXMoc2xvdCkpIHtcbiAgICAgICAgaWYgKCF+a2V5cy5pbmRleE9mKHNsb3Rfa2V5KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGA8JHtuYW1lfT4gcmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBzbG90IFwiJHtzbG90X2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMgd2l0aCBzb21lIG1pbm9yIGRldi1lbmhhbmNlbWVudHMuIFVzZWQgd2hlbiBkZXY9dHJ1ZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50RGV2IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAoIW9wdGlvbnMudGFyZ2V0ICYmICFvcHRpb25zLiQkaW5saW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3RhcmdldCcgaXMgYSByZXF1aXJlZCBvcHRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbXBvbmVudCB3YXMgYWxyZWFkeSBkZXN0cm95ZWQnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIH07XG4gICAgfVxuICAgICRjYXB0dXJlX3N0YXRlKCkgeyB9XG4gICAgJGluamVjdF9zdGF0ZSgpIHsgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIHRvIGNyZWF0ZSBzdHJvbmdseSB0eXBlZCBTdmVsdGUgY29tcG9uZW50cy5cbiAqIFRoaXMgb25seSBleGlzdHMgZm9yIHR5cGluZyBwdXJwb3NlcyBhbmQgc2hvdWxkIGJlIHVzZWQgaW4gYC5kLnRzYCBmaWxlcy5cbiAqXG4gKiAjIyMgRXhhbXBsZTpcbiAqXG4gKiBZb3UgaGF2ZSBjb21wb25lbnQgbGlicmFyeSBvbiBucG0gY2FsbGVkIGBjb21wb25lbnQtbGlicmFyeWAsIGZyb20gd2hpY2hcbiAqIHlvdSBleHBvcnQgYSBjb21wb25lbnQgY2FsbGVkIGBNeUNvbXBvbmVudGAuIEZvciBTdmVsdGUrVHlwZVNjcmlwdCB1c2VycyxcbiAqIHlvdSB3YW50IHRvIHByb3ZpZGUgdHlwaW5ncy4gVGhlcmVmb3JlIHlvdSBjcmVhdGUgYSBgaW5kZXguZC50c2A6XG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU3ZlbHRlQ29tcG9uZW50VHlwZWQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnRUeXBlZDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogYGBgXG4gKiBUeXBpbmcgdGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgSURFcyBsaWtlIFZTIENvZGUgd2l0aCB0aGUgU3ZlbHRlIGV4dGVuc2lvblxuICogdG8gcHJvdmlkZSBpbnRlbGxpc2Vuc2UgYW5kIHRvIHVzZSB0aGUgY29tcG9uZW50IGxpa2UgdGhpcyBpbiBhIFN2ZWx0ZSBmaWxlXG4gKiB3aXRoIFR5cGVTY3JpcHQ6XG4gKiBgYGBzdmVsdGVcbiAqIDxzY3JpcHQgbGFuZz1cInRzXCI+XG4gKiBcdGltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSBcImNvbXBvbmVudC1saWJyYXJ5XCI7XG4gKiA8L3NjcmlwdD5cbiAqIDxNeUNvbXBvbmVudCBmb289eydiYXInfSAvPlxuICogYGBgXG4gKlxuICogIyMjIyBXaHkgbm90IG1ha2UgdGhpcyBwYXJ0IG9mIGBTdmVsdGVDb21wb25lbnQoRGV2KWA/XG4gKiBCZWNhdXNlXG4gKiBgYGB0c1xuICogY2xhc3MgQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGNvbnN0IGNvbXBvbmVudDogdHlwZW9mIFN2ZWx0ZUNvbXBvbmVudCA9IEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50O1xuICogYGBgXG4gKiB3aWxsIHRocm93IGEgdHlwZSBlcnJvciwgc28gd2UgbmVlZCB0byBzZXBhcmF0ZSB0aGUgbW9yZSBzdHJpY3RseSB0eXBlZCBjbGFzcy5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50VHlwZWQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnREZXYge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9vcF9ndWFyZCh0aW1lb3V0KSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiB0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZmluaXRlIGxvb3AgZGV0ZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEh0bWxUYWcsIEh0bWxUYWdIeWRyYXRpb24sIFN2ZWx0ZUNvbXBvbmVudCwgU3ZlbHRlQ29tcG9uZW50RGV2LCBTdmVsdGVDb21wb25lbnRUeXBlZCwgU3ZlbHRlRWxlbWVudCwgYWN0aW9uX2Rlc3Ryb3llciwgYWRkX2F0dHJpYnV0ZSwgYWRkX2NsYXNzZXMsIGFkZF9mbHVzaF9jYWxsYmFjaywgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfcmVzaXplX2xpc3RlbmVyLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldCwgYXBwZW5kX2h5ZHJhdGlvbiwgYXBwZW5kX2h5ZHJhdGlvbl9kZXYsIGFwcGVuZF9zdHlsZXMsIGFzc2lnbiwgYXR0ciwgYXR0cl9kZXYsIGF0dHJpYnV0ZV90b19vYmplY3QsIGJlZm9yZVVwZGF0ZSwgYmluZCwgYmluZGluZ19jYWxsYmFja3MsIGJsYW5rX29iamVjdCwgYnViYmxlLCBjaGVja19vdXRyb3MsIGNoaWxkcmVuLCBjbGFpbV9jb21wb25lbnQsIGNsYWltX2VsZW1lbnQsIGNsYWltX2h0bWxfdGFnLCBjbGFpbV9zcGFjZSwgY2xhaW1fdGV4dCwgY2xlYXJfbG9vcHMsIGNvbXBvbmVudF9zdWJzY3JpYmUsIGNvbXB1dGVfcmVzdF9wcm9wcywgY29tcHV0ZV9zbG90cywgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBjcmVhdGVfYW5pbWF0aW9uLCBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uLCBjcmVhdGVfY29tcG9uZW50LCBjcmVhdGVfaW5fdHJhbnNpdGlvbiwgY3JlYXRlX291dF90cmFuc2l0aW9uLCBjcmVhdGVfc2xvdCwgY3JlYXRlX3Nzcl9jb21wb25lbnQsIGN1cnJlbnRfY29tcG9uZW50LCBjdXN0b21fZXZlbnQsIGRhdGFzZXRfZGV2LCBkZWJ1ZywgZGVzdHJveV9ibG9jaywgZGVzdHJveV9jb21wb25lbnQsIGRlc3Ryb3lfZWFjaCwgZGV0YWNoLCBkZXRhY2hfYWZ0ZXJfZGV2LCBkZXRhY2hfYmVmb3JlX2RldiwgZGV0YWNoX2JldHdlZW5fZGV2LCBkZXRhY2hfZGV2LCBkaXJ0eV9jb21wb25lbnRzLCBkaXNwYXRjaF9kZXYsIGVhY2gsIGVsZW1lbnQsIGVsZW1lbnRfaXMsIGVtcHR5LCBlbmRfaHlkcmF0aW5nLCBlc2NhcGUsIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUsIGVzY2FwZV9vYmplY3QsIGVzY2FwZWQsIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMsIGZpeF9hbmRfZGVzdHJveV9ibG9jaywgZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jaywgZml4X3Bvc2l0aW9uLCBmbHVzaCwgZ2V0QWxsQ29udGV4dHMsIGdldENvbnRleHQsIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSwgZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUsIGdldF9jdXJyZW50X2NvbXBvbmVudCwgZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cywgZ2V0X3Jvb3RfZm9yX3N0eWxlLCBnZXRfc2xvdF9jaGFuZ2VzLCBnZXRfc3ByZWFkX29iamVjdCwgZ2V0X3NwcmVhZF91cGRhdGUsIGdldF9zdG9yZV92YWx1ZSwgZ2xvYmFscywgZ3JvdXBfb3V0cm9zLCBoYW5kbGVfcHJvbWlzZSwgaGFzQ29udGV4dCwgaGFzX3Byb3AsIGlkZW50aXR5LCBpbml0LCBpbnNlcnQsIGluc2VydF9kZXYsIGluc2VydF9oeWRyYXRpb24sIGluc2VydF9oeWRyYXRpb25fZGV2LCBpbnRyb3MsIGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLCBpc19jbGllbnQsIGlzX2Nyb3Nzb3JpZ2luLCBpc19lbXB0eSwgaXNfZnVuY3Rpb24sIGlzX3Byb21pc2UsIGxpc3RlbiwgbGlzdGVuX2RldiwgbG9vcCwgbG9vcF9ndWFyZCwgbWlzc2luZ19jb21wb25lbnQsIG1vdW50X2NvbXBvbmVudCwgbm9vcCwgbm90X2VxdWFsLCBub3csIG51bGxfdG9fZW1wdHksIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMsIG9uRGVzdHJveSwgb25Nb3VudCwgb25jZSwgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIHByZXZlbnRfZGVmYXVsdCwgcHJvcF9kZXYsIHF1ZXJ5X3NlbGVjdG9yX2FsbCwgcmFmLCBydW4sIHJ1bl9hbGwsIHNhZmVfbm90X2VxdWFsLCBzY2hlZHVsZV91cGRhdGUsIHNlbGVjdF9tdWx0aXBsZV92YWx1ZSwgc2VsZWN0X29wdGlvbiwgc2VsZWN0X29wdGlvbnMsIHNlbGVjdF92YWx1ZSwgc2VsZiwgc2V0Q29udGV4dCwgc2V0X2F0dHJpYnV0ZXMsIHNldF9jdXJyZW50X2NvbXBvbmVudCwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEsIHNldF9kYXRhLCBzZXRfZGF0YV9kZXYsIHNldF9pbnB1dF90eXBlLCBzZXRfaW5wdXRfdmFsdWUsIHNldF9ub3csIHNldF9yYWYsIHNldF9zdG9yZV92YWx1ZSwgc2V0X3N0eWxlLCBzZXRfc3ZnX2F0dHJpYnV0ZXMsIHNwYWNlLCBzcHJlYWQsIHNyY191cmxfZXF1YWwsIHN0YXJ0X2h5ZHJhdGluZywgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdHJ1c3RlZCwgdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaCwgdXBkYXRlX2tleWVkX2VhY2gsIHVwZGF0ZV9zbG90LCB1cGRhdGVfc2xvdF9iYXNlLCB2YWxpZGF0ZV9jb21wb25lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB4bGlua19hdHRyIH07XG4iLCIgXG48ZGl2IGlkPVwiYnJva2VuLWxpbmstY29udGFpbmVyXCI+XG4gICAgPCEtLSBmcm9tIGh0dHBzOi8vd3d3LnN2Z3JlcG8uY29tL3N2Zy80NTM4L2xpbmsgLS0+XG4gICAgPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgaWQ9XCJMYXllcl8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCJcblx0IHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyO1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG48Zz5cblx0PHBhdGggc3R5bGU9XCJmaWxsOiNCMzQwNEE7XCIgZD1cIk0zODMuMTEyLDIyMy4zNDJjLTMuMTYyLDAtNi4zNDctMS4wMzQtOS4wMDgtMy4xNjJjLTYuMjI3LTQuOTgxLTcuMjM4LTE0LjA2Ny0yLjI1Ny0yMC4yOTRcblx0XHRsMjMuMDk4LTI4Ljg3N2M0Ljk4Mi02LjIyNiwxNC4wNjctNy4yMzgsMjAuMjk0LTIuMjU3YzYuMjI3LDQuOTgxLDcuMjM4LDE0LjA2NywyLjI1NywyMC4yOTRsLTIzLjA5OCwyOC44Nzdcblx0XHRDMzkxLjU0NSwyMjEuNDg3LDM4Ny4zNDgsMjIzLjM0MiwzODMuMTEyLDIyMy4zNDJ6XCIvPlxuXHQ8cGF0aCBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIiBkPVwiTTQzNS4wOTUsMjcwLjQzOWgtMzcuNTM3Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40Mzhcblx0XHRoMzcuNTM3YzcuOTczLDAsMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40MzhDNDQ5LjUzMywyNjMuOTczLDQ0My4wNjksMjcwLjQzOSw0MzUuMDk1LDI3MC40Mzl6XCIvPlxuXHQ8cGF0aCBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIiBkPVwiTTQwNi4yMjksMzQ2LjQxYy00LjIzNywwLTguNDMzLTEuODU0LTExLjI4NS01LjQybC0yMy4wOTgtMjguODc3XG5cdFx0Yy00Ljk4LTYuMjI3LTMuOTctMTUuMzExLDIuMjU3LTIwLjI5NGM2LjIyOC00Ljk4LDE1LjMxMy0zLjk2OSwyMC4yOTQsMi4yNTdsMjMuMDk4LDI4Ljg3N2M0Ljk4LDYuMjI3LDMuOTcsMTUuMzExLTIuMjU3LDIwLjI5NFxuXHRcdEM0MTIuNTc2LDM0NS4zNzYsNDA5LjM5MywzNDYuNDEsNDA2LjIyOSwzNDYuNDF6XCIvPlxuXHQ8cGF0aCBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIiBkPVwiTTEyOC44ODcsMjIzLjM0MmMtNC4yMzcsMC04LjQzMy0xLjg1NC0xMS4yODUtNS40MmwtMjMuMDk4LTI4Ljg3N1xuXHRcdGMtNC45OC02LjIyNy0zLjk3LTE1LjMxMSwyLjI1Ny0yMC4yOTRjNi4yMjgtNC45ODEsMTUuMzExLTMuOTcsMjAuMjk0LDIuMjU3bDIzLjA5OCwyOC44NzdjNC45OCw2LjIyNywzLjk3LDE1LjMxMS0yLjI1NywyMC4yOTRcblx0XHRDMTM1LjIzMiwyMjIuMzEsMTMyLjA0OSwyMjMuMzQyLDEyOC44ODcsMjIzLjM0MnpcIi8+XG5cdDxwYXRoIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiIGQ9XCJNMTE0LjQ0LDI3MC40MzlINzYuOTA0Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40Mzhcblx0XHRoMzcuNTM3YzcuOTczLDAsMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40MzhDMTI4Ljg3OCwyNjMuOTczLDEyMi40MTMsMjcwLjQzOSwxMTQuNDQsMjcwLjQzOXpcIi8+XG5cdDxwYXRoIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiIGQ9XCJNMTA1Ljc2OSwzNDYuNDFjLTMuMTYyLDAtNi4zNDctMS4wMzQtOS4wMDgtMy4xNjJjLTYuMjI3LTQuOTgxLTcuMjM4LTE0LjA2Ny0yLjI1Ny0yMC4yOTRcblx0XHRsMjMuMDk4LTI4Ljg3N2M0Ljk4Mi02LjIyNiwxNC4wNjctNy4yMzYsMjAuMjk0LTIuMjU3YzYuMjI3LDQuOTgxLDcuMjM4LDE0LjA2NywyLjI1NywyMC4yOTRsLTIzLjA5OCwyOC44Nzdcblx0XHRDMTE0LjIwMiwzNDQuNTUzLDExMC4wMDQsMzQ2LjQxLDEwNS43NjksMzQ2LjQxelwiLz5cblx0PHBhdGggc3R5bGU9XCJmaWxsOiNCMzQwNEE7XCIgZD1cIk00NzEuMTIzLDE3Ni4zMmMtNy45NzMsMC0xNC40MzgtNi40NjUtMTQuNDM4LTE0LjQzOHYtNTMuODI2YzAtMjkuMDgyLTIzLjY2MS01Mi43NDEtNTIuNzQxLTUyLjc0MVxuXHRcdGgtMjQuOTQ5Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4czYuNDY1LTE0LjQzOCwxNC40MzgtMTQuNDM4aDI0Ljk0OWM0NS4wMDQsMCw4MS42MTcsMzYuNjEzLDgxLjYxNyw4MS42MTd2NTMuODI2XG5cdFx0QzQ4NS41NjEsMTY5Ljg1NSw0NzkuMDk2LDE3Ni4zMiw0NzEuMTIzLDE3Ni4zMnpcIi8+XG5cdDxwYXRoIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiIGQ9XCJNNDAuODc3LDE3Ni4zMmMtNy45NzMsMC0xNC40MzgtNi40NjUtMTQuNDM4LTE0LjQzOHYtNTMuODI2YzAtNDUuMDA0LDM2LjYxMy04MS42MTcsODEuNjE3LTgxLjYxN1xuXHRcdGgyNC45NDhjNy45NzMsMCwxNC40MzgsNi40NjUsMTQuNDM4LDE0LjQzOHMtNi40NjUsMTQuNDM4LTE0LjQzOCwxNC40MzhoLTI0Ljk0OGMtMjkuMDgyLDAtNTIuNzQxLDIzLjY2MS01Mi43NDEsNTIuNzQxdjUzLjgyNlxuXHRcdEM1NS4zMTUsMTY5Ljg1NSw0OC44NSwxNzYuMzIsNDAuODc3LDE3Ni4zMnpcIi8+XG5cdDxwYXRoIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiIGQ9XCJNNDAzLjk0Myw0ODUuNTYxaC0yNC45NDhjLTcuOTczLDAtMTQuNDM4LTYuNDY1LTE0LjQzOC0xNC40MzhjMC03Ljk3Myw2LjQ2NS0xNC40MzgsMTQuNDM4LTE0LjQzOFxuXHRcdGgyNC45NDhjMjkuMDgyLDAsNTIuNzQxLTIzLjY2MSw1Mi43NDEtNTIuNzQxdi01My44MjZjMC03Ljk3Myw2LjQ2NS0xNC40MzgsMTQuNDM4LTE0LjQzOGM3Ljk3MywwLDE0LjQzOCw2LjQ2NSwxNC40MzgsMTQuNDM4XG5cdFx0djUzLjgyNkM0ODUuNTYxLDQ0OC45NDcsNDQ4Ljk0Nyw0ODUuNTYxLDQwMy45NDMsNDg1LjU2MXpcIi8+XG5cdDxwYXRoIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiIGQ9XCJNMTMzLjAwNSw0ODUuNTYxaC0yNC45NDhjLTQ1LjAwNCwwLTgxLjYxNy0zNi42MTMtODEuNjE3LTgxLjYxN3YtNTMuODI2XG5cdFx0YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40MzhzMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40Mzh2NTMuODI2YzAsMjkuMDgyLDIzLjY2MSw1Mi43NDEsNTIuNzQxLDUyLjc0MWgyNC45NDhcblx0XHRjNy45NzMsMCwxNC40MzgsNi40NjUsMTQuNDM4LDE0LjQzOEMxNDcuNDQyLDQ3OS4wOTYsMTQwLjk3OSw0ODUuNTYxLDEzMy4wMDUsNDg1LjU2MXpcIi8+XG48L2c+XG48cGF0aCBzdHlsZT1cImZpbGw6I0VCQUZBRTtcIiBkPVwiTTIwMi4wMzksMjA4LjQ5YzEyLjg5NCwwLDIzLjM0OS0xMC40NTMsMjMuMzQ5LTIzLjM0OVY5MS43NDhjMC0xNi41OTMsMTQuMDE5LTMwLjYxMiwzMC42MTItMzAuNjEyXG5cdGMxNi41OTMsMCwzMC42MTIsMTQuMDE5LDMwLjYxMiwzMC42MTJ2OTMuMzk1YzAsMTIuODk0LDEwLjQ1MywyMy4zNDksMjMuMzQ5LDIzLjM0OWwwLDBjMTIuODk0LDAsMjMuMzQ5LTEwLjQ1MywyMy4zNDktMjMuMzQ5XG5cdFY5MS43NDhjMC00Mi41MjEtMzQuNzg5LTc3LjMxLTc3LjMxLTc3LjMxbDAsMGMtNDIuNTIxLDAtNzcuMzEsMzQuNzg5LTc3LjMxLDc3LjMxdjkzLjM5NVxuXHRDMTc4LjY5LDE5OC4wMzcsMTg5LjE0MywyMDguNDksMjAyLjAzOSwyMDguNDlMMjAyLjAzOSwyMDguNDl6XCIvPlxuPHBhdGggc3R5bGU9XCJmaWxsOiNCMTQwNEE7XCIgZD1cIk0zMDkuOTYxLDIyMi45MjhjLTIwLjgzNywwLTM3Ljc4Ny0xNi45NS0zNy43ODctMzcuNzg3VjkxLjc0OGMwLTguNjE2LTcuNTU4LTE2LjE3NS0xNi4xNzUtMTYuMTc1XG5cdGMtOC42MTYsMC0xNi4xNzUsNy41NTgtMTYuMTc1LDE2LjE3NXY5My4zOTVjMCwyMC44MzctMTYuOTUsMzcuNzg3LTM3Ljc4NywzNy43ODdzLTM3Ljc4Ny0xNi45NS0zNy43ODctMzcuNzg3VjkxLjc0OFxuXHRDMTY0LjI1Miw0MS4xNTgsMjA1LjQwOSwwLDI1NiwwczkxLjc0OCw0MS4xNTgsOTEuNzQ4LDkxLjc0OHY5My4zOTVDMzQ3Ljc0NiwyMDUuOTc4LDMzMC43OTYsMjIyLjkyOCwzMDkuOTYxLDIyMi45Mjh6IE0yNTYsNDYuNjk4XG5cdGMyNC40MiwwLDQ1LjA1LDIwLjYzLDQ1LjA1LDQ1LjA1djkzLjM5NWMwLDQuOTEzLDMuOTk4LDguOTExLDguOTExLDguOTExczguOTExLTMuOTk4LDguOTExLTguOTExVjkxLjc0OFxuXHRjMC0zNC42NjgtMjguMjA0LTYyLjg3Mi02Mi44NzItNjIuODcyYy0zNC42NjgsMC02Mi44NzIsMjguMjA0LTYyLjg3Miw2Mi44NzJ2OTMuMzk1YzAsNC45MTMsMy45OTgsOC45MTEsOC45MTEsOC45MTFcblx0czguOTExLTMuOTk4LDguOTExLTguOTExVjkxLjc0OEMyMTAuOTQ4LDY3LjMyOCwyMzEuNTc4LDQ2LjY5OCwyNTYsNDYuNjk4elwiLz5cbjxwYXRoIHN0eWxlPVwiZmlsbDojRUJBRkFFO1wiIGQ9XCJNMzA5Ljk2LDMwMy41MWMtMTIuODk0LDAtMjMuMzQ5LDEwLjQ1My0yMy4zNDksMjMuMzQ5djkzLjM5NWMwLDE2LjU5My0xNC4wMTksMzAuNjEyLTMwLjYxMiwzMC42MTJcblx0Yy0xNi41OTMsMC0zMC42MTItMTQuMDE5LTMwLjYxMi0zMC42MTJ2LTkzLjM5NWMwLTEyLjg5NC0xMC40NTMtMjMuMzQ5LTIzLjM0OS0yMy4zNDlsMCwwYy0xMi44OTQsMC0yMy4zNDksMTAuNDUzLTIzLjM0OSwyMy4zNDlcblx0djkzLjM5NWMwLDQyLjUyMSwzNC43ODksNzcuMzEsNzcuMzEsNzcuMzFsMCwwYzQyLjUyMSwwLDc3LjMxLTM0Ljc4OSw3Ny4zMS03Ny4zMXYtOTMuMzk1XG5cdEMzMzMuMzA5LDMxMy45NjMsMzIyLjg1NiwzMDMuNTEsMzA5Ljk2LDMwMy41MUwzMDkuOTYsMzAzLjUxelwiLz5cbjxwYXRoIHN0eWxlPVwiZmlsbDojQjE0MDRBO1wiIGQ9XCJNMjU2LDUxMmMtNTAuNTksMC05MS43NDgtNDEuMTU4LTkxLjc0OC05MS43NDh2LTkzLjM5NWMwLTIwLjgzNywxNi45NS0zNy43ODcsMzcuNzg3LTM3Ljc4N1xuXHRzMzcuNzg3LDE2Ljk1LDM3Ljc4NywzNy43ODd2OTMuMzk1YzAsOC42MTYsNy41NTgsMTYuMTc1LDE2LjE3NSwxNi4xNzVjOC42MTYsMCwxNi4xNzUtNy41NTgsMTYuMTc1LTE2LjE3NXYtOTMuMzk1XG5cdGMwLTIwLjgzNywxNi45NS0zNy43ODcsMzcuNzg3LTM3Ljc4N3MzNy43ODcsMTYuOTUsMzcuNzg3LDM3Ljc4N3Y5My4zOTVDMzQ3Ljc0Niw0NzAuODQyLDMwNi41OSw1MTIsMjU2LDUxMnogTTIwMi4wMzksMzE3Ljk0N1xuXHRjLTQuOTEzLDAtOC45MTEsMy45OTgtOC45MTEsOC45MTF2OTMuMzk1YzAsMzQuNjY4LDI4LjIwNCw2Mi44NzIsNjIuODcyLDYyLjg3MmMzNC42NjgsMCw2Mi44NzItMjguMjA0LDYyLjg3Mi02Mi44NzJ2LTkzLjM5NVxuXHRjMC00LjkxMy0zLjk5OC04LjkxMS04LjkxMS04LjkxMXMtOC45MTEsMy45OTgtOC45MTEsOC45MTF2OTMuMzk1YzAsMjQuNDItMjAuNjMsNDUuMDUtNDUuMDUsNDUuMDVzLTQ1LjA1LTIwLjYzLTQ1LjA1LTQ1LjA1XG5cdHYtOTMuMzk1QzIxMC45NDgsMzIxLjk0NCwyMDYuOTUyLDMxNy45NDcsMjAyLjAzOSwzMTcuOTQ3elwiLz48L3N2Zz5cbjwvZGl2PiBcbjxzdHlsZT5cblxuZGl2I2Jyb2tlbi1saW5rLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgYm90dG9tOiA1JTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMjUlO1xuICAgICAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgICBzdmcgIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG9wYWNpdHk6IDYwJTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgIH1cbjwvc3R5bGU+IiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vZGJcIjtcbiAgaW1wb3J0IHsgR2V0RGlzcGxheU5hbWUsIE5hdmlnYXRlVG9GaWxlIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG4gIGltcG9ydCB0eXBlIHsgZXhwYW5kTWFuYWdlciB9IGZyb20gXCIuL2hlbHBlcnMvZXhwYW5kTWFuYWdlclwiO1xuXG4gIGV4cG9ydCBsZXQgbm90ZV9wYXRoOiBzdHJpbmc7XG4gIGV4cG9ydCBsZXQgZGI6IERCTWFuYWdlcjtcbiAgZXhwb3J0IGxldCBpbmRlbnRhdGlvbjogbnVtYmVyO1xuICBleHBvcnQgbGV0IHZpZXc6IGFueTtcbiAgZXhwb3J0IGxldCBhcHA6IEFwcDtcbiAgZXhwb3J0IGxldCBleHBhbmRNYW46IGV4cGFuZE1hbmFnZXI7XG5cbiAgZXhwYW5kTWFuLmxvZ0luZGVudChpbmRlbnRhdGlvbik7XG4gIGxldCBkYXJrX21vZGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhcInRoZW1lLWRhcmtcIilcbiAgICA/IFwiZGFyay1tb2RlXCJcbiAgICA6IFwibGlnaHQtbW9kZVwiO1xuXG4gIGxldCBleHBhbmRlZDtcblxuICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgaWYgKGRiLmRlc2NlbmRhbnRzLmhhcyhub3RlX3BhdGgpKSB7XG4gICAgY2hpbGRyZW4gPSBkYi5kZXNjZW5kYW50cy5nZXQobm90ZV9wYXRoKS5zbGljZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRFeHBhbmRlZChuZXdfbWF4X2luZGVudDogbnVtYmVyKSB7XG4gICAgaWYoaW5kZW50YXRpb249PTApe1xuICAgICAgZXhwYW5kZWQ9dHJ1ZVxuICAgIH1cbiAgICBlbHNlIGlmICghdmlldy5wbHVnaW4uc2V0dGluZ3MuaXNFeHBhbmRlZChub3RlX3BhdGgpKSB7XG4gICAgICBleHBhbmRlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHBhbmRlZCA9IHRydWUgPyBpbmRlbnRhdGlvbiA8IG5ld19tYXhfaW5kZW50IDogZmFsc2U7XG4gICAgfVxuICB9XG4gIHJlc2V0RXhwYW5kZWQoZXhwYW5kTWFuLmluaXRpYWxfbWF4X2luZGVudCk7XG5cbiAgZXhwYW5kTWFuLnJlZ2lzdGVyUmVkcmF3RGVzY2VuZGFudENhbGxiYWNrKHJlc2V0RXhwYW5kZWQpO1xuPC9zY3JpcHQ+XG5cbjwhLS0gZXhwYW5kIHN2Zy0tPlxuPHN2ZyBkaXNwbGF5PVwibm9uZVwiPlxuICA8c3ltYm9sXG4gICAgaWQ9XCJleHBhbmQtYXJyb3ctc3ZnXCJcbiAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICA+PHBhdGggZD1cIk0yMiAxMmwtMjAgMTIgNS0xMi01LTEyelwiIC8+XG4gIDwvc3ltYm9sPjwvc3ZnXG4+XG48IS0tc3RhcnQgZGVzY2VuZGFudHMgdmlldy0tPlxueyNpZiBpbmRlbnRhdGlvbiA9PSAwICYmIGNoaWxkcmVuLmxlbmd0aCA9PSAwfVxuICBObyBkZXNjZW5kYW50c1xuezplbHNlfVxuICA8bGkgY2xhc3M9XCJjb250YWluZXIge2RhcmtfbW9kZX1cIj5cbiAgICA8cD5cbiAgICAgIHsjaWYgaW5kZW50YXRpb24gPT0gMH1cbiAgICAgICAge0dldERpc3BsYXlOYW1lKG5vdGVfcGF0aCwgZGIpfVxuICAgICAgezplbHNlfXsjaWYgY2hpbGRyZW4ubGVuZ3RoID4gMH1cbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgY2xhc3M9XCJleHBhbmQtYXJyb3dcIlxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgZXhwYW5kZWQgPSAhZXhwYW5kZWQ7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwia25vd24gcGF0aDogXCIsIG5vdGVfcGF0aCk7XG4gICAgICAgICAgICAgIHZpZXcucGx1Z2luLnNldHRpbmdzLnNldEV4cGFuZGVkKG5vdGVfcGF0aCwgZXhwYW5kZWQpO1xuICAgICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcbiAgICAgICAgICAgICAgICBleHBhbmRNYW4ub25NYW51YWxFeHBhbmQoKTtcbiAgICAgICAgICAgICAgICBleHBhbmRNYW4ubG9nSW5kZW50KGluZGVudGF0aW9uICsgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PGRpdiBjbGFzcz1cImV4cGFuZF9idXR0b25cIj5cbiAgICAgICAgICAgICAgeyNpZiBleHBhbmRlZH1cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwic3ZnIGV4cGFuZGVkXCI+XG4gICAgICAgICAgICAgICAgICA8dXNlIGhyZWY9XCIjZXhwYW5kLWFycm93LXN2Z1wiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIHs6ZWxzZX08c3ZnIGNsYXNzPVwic3ZnXCI+XG4gICAgICAgICAgICAgICAgICA8dXNlIGhyZWY9XCIjZXhwYW5kLWFycm93LXN2Z1wiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICA8L2Rpdj48L3NwYW5cbiAgICAgICAgICA+ey9pZn1cbiAgICAgICAgPGFcbiAgICAgICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgICAgIHRpdGxlPXtub3RlX3BhdGh9XG4gICAgICAgICAgb246Y2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgTmF2aWdhdGVUb0ZpbGUoYXBwLCBub3RlX3BhdGgsIGV2ZW50KTtcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge0dldERpc3BsYXlOYW1lKG5vdGVfcGF0aCwgZGIpfTwvYVxuICAgICAgICA+XG4gICAgICB7L2lmfVxuICAgIDwvcD5cbiAgICA8dWw+XG4gICAgICB7I2lmIGNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgZXhwYW5kZWR9XG4gICAgICAgIHsjZWFjaCBjaGlsZHJlbiBhcyBjaGlsZH1cbiAgICAgICAgICA8c3ZlbHRlOnNlbGZcbiAgICAgICAgICAgIHtkYn1cbiAgICAgICAgICAgIHthcHB9XG4gICAgICAgICAgICBub3RlX3BhdGg9e2NoaWxkfVxuICAgICAgICAgICAgaW5kZW50YXRpb249e2luZGVudGF0aW9uICsgMX1cbiAgICAgICAgICAgIHt2aWV3fVxuICAgICAgICAgICAge2V4cGFuZE1hbn1cbiAgICAgICAgICAvPlxuICAgICAgICB7L2VhY2h9XG4gICAgICB7L2lmfVxuICAgIDwvdWw+XG4gIDwvbGk+XG57L2lmfVxuXG48c3R5bGU+XG4gIGEubGluayB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbiAgdWwge1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICBsaSB7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDtcbiAgfVxuXG4gIHVsIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDFlbTtcbiAgfVxuXG4gIGxpIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDFlbTtcbiAgICBib3JkZXI6IDVweCBzb2xpZCBkYXJrZ3JheTtcbiAgICBib3JkZXItd2lkdGg6IDAgMCAxcHggMXB4O1xuICB9XG4gIGxpLmRhcmstbW9kZSB7XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gICAgYm9yZGVyOiA1cHggc29saWQgZ3JheTtcbiAgICBib3JkZXItd2lkdGg6IDAgMCAxcHggMXB4O1xuICB9XG4gIGxpLmNvbnRhaW5lciB7XG4gICAgYm9yZGVyLWJvdHRvbTogMHB4O1xuICB9XG5cbiAgbGkgcCB7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB0b3A6IDBlbTtcbiAgfVxuXG4gIGxpIHVsIHtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgZGFya2dyYXk7XG4gICAgbWFyZ2luLWxlZnQ6IC0xZW07XG4gICAgcGFkZGluZy1sZWZ0OiAyZW07XG4gIH1cblxuICBsaS5kYXJrLW1vZGUgdWwge1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCBncmF5O1xuICB9XG5cbiAgdWwgbGk6bGFzdC1jaGlsZCB1bCB7XG4gICAgYm9yZGVyLWxlZnQ6IG5vbmU7XG4gICAgbWFyZ2luLWxlZnQ6IC0xN3B4O1xuICB9XG5cbiAgLmV4cGFuZC1hcnJvdyB7XG4gICAgY29sb3I6IGRhcmtncmV5O1xuICB9XG5cbiAgLmV4cGFuZC1hcnJvdzpob3ZlciB7XG4gICAgY29sb3I6IGdyYXk7XG4gIH1cblxuICBkaXYuZXhwYW5kX2J1dHRvbiB7XG4gICAgZGlzcGxheTogaW5saW5lO1xuICB9XG5cbiAgZGl2LmV4cGFuZF9idXR0b24gc3ZnLnN2ZyB7XG4gICAgd2lkdGg6IDE0cHg7XG4gICAgaGVpZ2h0OiAxNHB4O1xuICAgIG1hcmdpbi10b3A6IDVweDtcbiAgfVxuXG4gIGxpLmxpZ2h0LW1vZGUgZGl2LmV4cGFuZF9idXR0b24gc3ZnLnN2ZyB7XG4gICAgZmlsbDogZGFya2dyZXk7XG4gIH1cbiAgbGkubGlnaHQtbW9kZSBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnOmhvdmVyIHtcbiAgICBmaWxsOiBncmF5O1xuICB9XG5cbiAgbGkuZGFyay1tb2RlIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcge1xuICAgIGZpbGw6IGdyYXk7XG4gIH1cbiAgbGkuZGFyay1tb2RlIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmc6aG92ZXIge1xuICAgIGZpbGw6IGxpZ2h0Z3JheTtcbiAgfVxuXG4gIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcuZXhwYW5kZWQge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTtcbiAgfVxuPC9zdHlsZT5cbiIsIjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gICAgaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgICBpbXBvcnQgdHlwZSB7IERCTWFuYWdlciB9IGZyb20gXCIuLi9kYlwiO1xuICAgIGltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuICAgIGltcG9ydCB7IExvZyB9IGZyb20gXCIuLi91dGlsc1wiO1xuICAgIGltcG9ydCB7IG9uTW91bnQgfSBmcm9tIFwic3ZlbHRlXCI7XG5cbiAgICBleHBvcnQgbGV0IGFwcDogQXBwO1xuICAgIGV4cG9ydCBsZXQgdmlldzogYW55O1xuICAgIGV4cG9ydCBsZXQgcGx1Z2luOiBNT0NQbHVnaW47XG4gICAgbGV0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuXG4gICAgXG4gICAgbGV0IGRhcmtfbW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKVxuICAgICAgICA/IFwiZGFyay1tb2RlXCJcbiAgICAgICAgOiBcImxpZ2h0LW1vZGVcIjtcblxuICAgICAgICBcbjwvc2NyaXB0PlxuXG48ZGl2IGlkPVwiYWxsLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgaWQ9XCJtYWluX21vY19kaXZcIiBjbGFzcz17ZGFya19tb2RlfVxuICAgID5cbiAgICAgICAgPGgzIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXJcIj5UaGlzIHBsdWdpbiBoYXMgYmVlbiB1cGRhdGVkPC9oMz5cblxuICAgICAgICBUaGUgbGF0ZXN0IGNoYW5nZXMgYXJlOlxuICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgWW91IGNhbiBwaW4gYSBmaWxlIHRvIG5hdmlnYXRlIGl0J3MgbGlua3Mgd2hpbGVcbiAgICAgICAgICAgICAgICBrZWVwaW5nIGl0J3MgTWFwIG9mIENvbnRlbnQgb3Blbi4gSnVzdCBjbGljayBvbiB0aGUgbGl0dGxlIHBpblxuICAgICAgICAgICAgICAgIGluIHRoZSB0b3AgbGVmdCBjb3JuZXIuXG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgVGhlIHBsdWdpbiBjYW4gcmVtZW1iZXIgd2hldGhlciB0byBzaG93IG9yIGhpZGUgYSBmaWxlJ3NcbiAgICAgICAgICAgICAgICBkZXNjZW5kYW50cyBpbiB0aGUgdHJlZSB2aWV3LiBUaGlzIG11c3QgYmUgZW5hYmxlZCBpbiB0aGVcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIFNlZSA8YVxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9Sb2Jpbi1IYXVwdC0xL09ic2lkaWFuLU1hcC1vZi1Db250ZW50L3JlbGVhc2VzXCJcbiAgICAgICAgICAgID5oZXJlPC9hXG4gICAgICAgID5cbiAgICAgICAgZm9yIGEgY29tcGxldGUgaGlzdG9yeSBvZiBhbGwgY2hhbmdlcy48YnIgLz48YnIgLz5cbiAgICAgICAgWW91IGNhbiBzdXBwb3J0IHRoZSBkZXZlbG9wbWVudCBvZiB0aGlzIHBsdWdpbiBieSBkb25hdGluZyBvblxuICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly93d3cucGF0cmVvbi5jb20vUm9iaW5IYXVwdFwiPlBhdHJlb248L2E+LFxuICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9rby1maS5jb20vcm9iaW5oYXVwdFwiPktvLUZpPC9hPlxuICAgICAgICBvclxuICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9wYXlwYWxtZS9yb2JpbmhhdXB0XCI+UGF5UGFsPC9hPi4gVGhhbmtcbiAgICAgICAgeW91IVxuXG4gICAgICAgIDxiciAvPjxiciAvPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnNldCh7IGRvX3Nob3dfdXBkYXRlX25vdGljZTogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgdmlldy5yZXJlbmRlcigpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHN0eWxlPVwiZGlzcGxheTpibG9jazttYXJnaW46YXV0bztcIj5DbG9zZTwvYnV0dG9uXG4gICAgICAgID5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgZGl2I2FsbC1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgfVxuXG4gICAgZGl2I21haW5fbW9jX2RpdiB7XG4gICAgICAgIHBhZGRpbmc6IGluaXRpYWw7XG4gICAgICAgIHdpZHRoOiBpbml0aWFsO1xuICAgICAgICBoZWlnaHQ6IGluaXRpYWw7XG4gICAgICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgZmxleDogMTtcbiAgICB9XG5cbiAgICBkaXYjbWFpbl9tb2NfZGl2LmRhcmstbW9kZSB7XG4gICAgICAgIGNvbG9yOiAjZGNkZGRlO1xuICAgIH1cbjwvc3R5bGU+XG4iLCJpbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbmltcG9ydCB7XG4gICAgR2V0RGlzcGxheU5hbWUsXG4gICAgSXNDdHJsUHJlc3NlZCxcbiAgICBOYXZpZ2F0ZVRvRmlsZSxcbiAgICBMb2csXG59IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gXCJzdmVsdGVcIjtcblxuZXhwb3J0IGNsYXNzIGV4cGFuZE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgICAgIExvZyhcImV4cGFuZE1hbmFnZXIgY3JlYXRlZFwiIClcbiAgICB9XG5cbiAgICBpbml0aWFsX21heF9pbmRlbnQgPSAzO1xuICAgIHJlZHJhd0NhbGxiYWNrcyA9IFtdO1xuICAgIG1hbnVhbGx5X2V4cGFuZGVkID0gZmFsc2U7XG5cbiAgICBleHBhbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hbnVhbGx5X2V4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlcmVuZGVyRGVzY2VuZGFudHModGhpcy5pbml0aWFsX21heF9pbmRlbnQpO1xuICAgICAgICAgICAgdGhpcy5tYW51YWxseV9leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXJlbmRlckRlc2NlbmRhbnRzKHRoaXMuaW5pdGlhbF9tYXhfaW5kZW50ICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb250cmFjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbF9tYXhfaW5kZW50ID4gMSkge1xuICAgICAgICAgICAgdGhpcy5yZXJlbmRlckRlc2NlbmRhbnRzKHRoaXMuaW5pdGlhbF9tYXhfaW5kZW50IC0gMSk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxfbWF4X2luZGVudCAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVyZW5kZXJEZXNjZW5kYW50cyhuZXdfbWF4X2luZGVudCkge1xuICAgICAgICBMb2coXCJyZWRyYXdpbmcsIG5ldyBtYXhfaW5kZW50IFwiICsgU3RyaW5nKG5ld19tYXhfaW5kZW50KSApO1xuICAgICAgICBmb3IgKGxldCBmdW5jIG9mIHRoaXMucmVkcmF3Q2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBmdW5jKG5ld19tYXhfaW5kZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlclJlZHJhd0Rlc2NlbmRhbnRDYWxsYmFjayhyZWRyYXc6IEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMucmVkcmF3Q2FsbGJhY2tzLnB1c2gocmVkcmF3KTtcbiAgICB9XG5cbiAgICBsb2dJbmRlbnQoaW5kZW50OiBudW1iZXIpIHtcbiAgICAgICAgTG9nKFwiaW5kZW50YXRpb24gcmVnaXN0ZXJlZDogXCIgKyBTdHJpbmcoaW5kZW50KSApO1xuICAgICAgICBpZiAoaW5kZW50ID4gdGhpcy5pbml0aWFsX21heF9pbmRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbF9tYXhfaW5kZW50ID0gaW5kZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uTWFudWFsRXhwYW5kKCkge1xuICAgICAgICB0aGlzLm1hbnVhbGx5X2V4cGFuZGVkID0gdHJ1ZTtcbiAgICB9XG5cbn0iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuICAgIGltcG9ydCB7IExJTktFRF9CT1RILCBMSU5LRURfVE8sIExJTktFRF9GUk9NIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuICAgIGltcG9ydCB0eXBlIE1PQ1ZpZXcgZnJvbSBcIi4uL3ZpZXdcIjtcbiAgICBpbXBvcnQge1xuICAgICAgICBHZXREaXNwbGF5TmFtZSxcbiAgICAgICAgSXNDdHJsUHJlc3NlZCxcbiAgICAgICAgTmF2aWdhdGVUb0ZpbGUsXG4gICAgICAgIExvZyxcbiAgICB9IGZyb20gXCIuLi91dGlsc1wiO1xuICAgIGltcG9ydCBOb0xpbmtJbWFnZSBmcm9tIFwiLi9Ob0xpbmtJbWFnZS5zdmVsdGVcIjtcbiAgICBpbXBvcnQgRGVzY2VuZGFudHMgZnJvbSBcIi4vRGVzY2VuZGFudHMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFVwZGF0ZU5vdGljZSBmcm9tIFwiLi9VcGRhdGVOb3RpY2Uuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IHsgZXhwYW5kTWFuYWdlciB9IGZyb20gXCIuL2hlbHBlcnMvZXhwYW5kTWFuYWdlclwiO1xuXG4gICAgZXhwb3J0IGxldCB2aWV3OiBNT0NWaWV3O1xuICAgIGV4cG9ydCBsZXQgcGF0aHM6IFtzdHJpbmcsIHN0cmluZ11bXVtdO1xuICAgIGV4cG9ydCBsZXQgZXJyb3JzOiBzdHJpbmdbXTtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW47XG4gICAgbGV0IGFwcCA9IHBsdWdpbi5hcHA7XG4gICAgbGV0IGRiID0gcGx1Z2luLmRiO1xuICAgIGxldCBjbl9wYXRoID0gcGx1Z2luLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIik7XG4gICAgbGV0IGV4cGFuZE1hbiA9IG5ldyBleHBhbmRNYW5hZ2VyKCk7XG4gICAgbGV0IHNjcm9sbF91cF9kaXY7XG4gICAgbGV0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICAgIGxldCBtYWluX2RpdjtcbiAgICBsZXQgc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUgPSBmYWxzZTtcbiAgICBsZXQgaXNfcGlubmVkID0gZmFsc2U7XG48L3NjcmlwdD5cblxuPGRpdlxuICAgIGlkPVwiYWxsLWNvbnRhaW5lclwiXG4gICAgY2xhc3M9e2RvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKVxuICAgICAgICA/IFwiZGFyay1tb2RlXCJcbiAgICAgICAgOiBcImxpZ2h0LW1vZGVcIn1cbj5cbiAgICA8ZGl2IGlkPVwidG9wLWJhclwiPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBpZD1cInBpbi1maWxlXCJcbiAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uIGlzLXBpbm5lZFwiXG4gICAgICAgICAgICBjbGFzczppcy1waW5uZWQ9e2lzX3Bpbm5lZH1cbiAgICAgICAgICAgIHRpdGxlPXtpc19waW5uZWQgPyBcIlVucGluIHRoaXMgZmlsZVwiIDogXCJQaW4gdGhpcyBmaWxlXCJ9XG4gICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHZpZXcuaXNfcGlubmVkID0gIXZpZXcuaXNfcGlubmVkO1xuICAgICAgICAgICAgICAgIGlzX3Bpbm5lZCA9ICFpc19waW5uZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuaXNfcGlubmVkKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgIGlkPVwibm90LXBpbm5lZFwiXG4gICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICBkPVwiTTE4IDZjMCAyLjk3Mi0yLjE2NCA1LjQzMy01IDUuOTF2OC4wOWgtMnYtOC4wODljLTIuODM2LS40NzctNS0yLjkzOC01LTUuOTExIDAtMy4zMTQgMi42ODctNiA2LTZzNiAyLjY4NyA2IDZ6bS0yIDBjMC0yLjIwNi0xLjc5NC00LTQtNHMtNCAxLjc5NC00IDQgMS43OTQgNCA0IDQgNC0xLjc5NCA0LTR6bS01LjYxOCAyLjA5OGMyLjMzOSAxLjg0IDUuNTYzLS43MjIgMy44NTgtMy41MzkuMzEzIDIuMjM3LTEuOTU2IDQuMDMtMy44NTggMy41Mzl6bTQuNjE4IDguMTk1djIuMDUybC40MzguMTA3YzEuNzA2LjQ5MyAyLjQ5NiAxLjAyNyAyLjUwNyAxLjU0Ny0uMDExLjUyLS44MDEgMS4wNTQtMi41MDcgMS41NDctMi4wOTcuNjA2LTQuNzg2LjYwNC02Ljg3NC4wMDEtMS42OTUtLjQ4OS0yLjUxNS0xLjAyMS0yLjUxNS0xLjU0N3MuODItMS4wNTggMi41MTYtMS41NDhsLjQzNi0uMTA2di0yLjA1MmMtMi45MzIuNTkzLTUuMDAxIDIuMDI4LTUuMDAxIDMuNzA2IDAgMi4yMDkgMy41ODEgNCA4IDRzOC0xLjc5MSA4LTRjMC0xLjY3OC0yLjA2OS0zLjExMy01LTMuNzA3elwiICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3N2Zz48c3ZnXG4gICAgICAgICAgICAgICAgaWQ9XCJwaW5uZWRcIlxuICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMjRcIlxuICAgICAgICAgICAgICAgIGhlaWdodD1cIjI0XCJcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICA+PHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0gMTIsMiBDIDguNjg3LDIgNiw0LjY4NyA2LDggYyAwLDIuOTcyIDIuMTY0LDUuNDMzIDUsNS45MSBWIDIwIGggMiB2IC02LjA4OSBjIDIuODM2LC0wLjQ3NyA1LC0yLjkzOCA1LC01LjkxIEMgMTgsNC42ODcgMTUuMzEzLDIgMTIsMiBaIE0gMTEuMjkzLDYuNTA4IEMgMTAuNzQ0LDcuMTU4IDkuODcsNy4zMDggOS4zNCw2Ljg0MSA4LjgxLDYuMzc0IDguODI0LDUuNDY5IDkuMzc0LDQuODE5IDkuOTIyLDQuMTY5IDEwLjc5Niw0LjAyIDExLjMyNiw0LjQ4NiBjIDAuNTMsMC40NjcgMC41MTUsMS4zNzIgLTAuMDMzLDIuMDIyIHogTSAyMCwyMCBjIDAsMi4yMDkgLTMuNTgxLDQgLTgsNCAtNC40MTksMCAtOCwtMS43OTEgLTgsLTQgMCwtMS42NzggMi4wNjksLTMuMTEzIDUsLTMuNzA3IHYgMi4wNTIgTCA4LjU2NCwxOC40NTEgQyA2Ljg2OSwxOC45NDIgNi4wNDgsMTkuNDc0IDYuMDQ4LDIwIGMgMCwwLjUyNiAwLjgyLDEuMDU4IDIuNTE2LDEuNTQ4IDIuMDg4LDAuNjAzIDQuNzc3LDAuNjA1IDYuODc0LC0xMGUtNCBDIDE3LjE0NCwyMS4wNTQgMTcuOTM0LDIwLjUyIDE3Ljk0NSwyMCAxNy45MzQsMTkuNDggMTcuMTQ0LDE4Ljk0NiAxNS40MzgsMTguNDUzIEwgMTUsMTguMzQ2IHYgLTIuMDUyIGMgMi45MzEsMC41OTMgNSwyLjAyOCA1LDMuNzA2IHpcIlxuICAgICAgICAgICAgICAgIC8+PC9zdmdcbiAgICAgICAgICAgID5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9XCJ0b3AtYmFyLWZsZXhcIj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBpZD1cInVwZGF0ZS1tb2NcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlVwZGF0ZSB0aGUgTWFwIG9mIENvbnRlbnRcIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRiLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0yMyAxMmMwIDEuMDQyLS4xNTQgMi4wNDUtLjQyNSAzaC0yLjEwMWMuMzM1LS45NC41MjYtMS45NDcuNTI2LTMgMC00Ljk2Mi00LjAzNy05LTktOS0xLjcwNiAwLTMuMjk2LjQ4NC00LjY1NSAxLjMxNGwxLjg1OCAyLjY4NmgtNi45OTRsMi4xNTItNyAxLjg0OSAyLjY3M2MxLjY4NC0xLjA0OSAzLjY1OS0xLjY3MyA1Ljc5LTEuNjczIDYuMDc0IDAgMTEgNC45MjUgMTEgMTF6bS02LjM1NCA3LjY5MmMtMS4zNTcuODI2LTIuOTQ0IDEuMzA4LTQuNjQ2IDEuMzA4LTQuOTYyIDAtOS00LjAzOC05LTkgMC0xLjA1My4xOTEtMi4wNi41MjUtM2gtMi4xYy0uMjcxLjk1NS0uNDI1IDEuOTU4LS40MjUgMyAwIDYuMDc1IDQuOTI1IDExIDExIDExIDIuMTI3IDAgNC4wOTktLjYyMSA1Ljc4LTEuNjY3bDEuODUzIDIuNjY3IDIuMTUyLTYuOTg5aC02Ljk5NGwxLjg1NSAyLjY4MXpcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgaWQ9XCJtaW51cy1leHBhbmRcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlNob3cgZmV3ZXIgZGVzY2VuZGFudHNcIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZE1hbi5jb250cmFjdCgpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xMiAyYzUuNTE0IDAgMTAgNC40ODYgMTAgMTBzLTQuNDg2IDEwLTEwIDEwLTEwLTQuNDg2LTEwLTEwIDQuNDg2LTEwIDEwLTEwem0wLTJjLTYuNjI3IDAtMTIgNS4zNzMtMTIgMTJzNS4zNzMgMTIgMTIgMTIgMTItNS4zNzMgMTItMTItNS4zNzMtMTItMTItMTJ6bTYgMTNoLTEydi0yaDEydjJ6XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGlkPVwicGx1cy1leHBhbmRcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlNob3cgbW9yZSBkZXNjZW5kYW50c1wiXG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kTWFuLmV4cGFuZCgpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTEyIDJjNS41MTQgMCAxMCA0LjQ4NiAxMCAxMHMtNC40ODYgMTAtMTAgMTAtMTAtNC40ODYtMTAtMTAgNC40ODYtMTAgMTAtMTB6bTAtMmMtNi42MjcgMC0xMiA1LjM3My0xMiAxMnM1LjM3MyAxMiAxMiAxMiAxMi01LjM3MyAxMi0xMi01LjM3My0xMi0xMi0xMnptNiAxM2gtNXY1aC0ydi01aC01di0yaDV2LTVoMnY1aDV2MnpcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBiaW5kOnRoaXM9e3Njcm9sbF91cF9kaXZ9XG4gICAgICAgICAgICBpZD1cInNjcm9sbF91cFwiXG4gICAgICAgICAgICB0aXRsZT1cIlNjcm9sbCB0byB0b3BcIlxuICAgICAgICAgICAgY2xhc3M9XCJhY3Rpb25cIlxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBtYWluX2Rpdi5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICA+PHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0xNSA1LjgyOWw2LjE3MSA2LjE3MS02LjE3MSA2LjE3MXYtMy4xNzFoLTEzdi02aDEzdi0zLjE3MXptLTItNC44Mjl2NmgtMTN2MTBoMTN2NmwxMS0xMS0xMS0xMXpcIlxuICAgICAgICAgICAgICAgIC8+PC9zdmdcbiAgICAgICAgICAgID5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgICBpZD1cIm1haW5fbW9jX2RpdlwiXG4gICAgICAgIGJpbmQ6dGhpcz17bWFpbl9kaXZ9XG4gICAgICAgIG9uOnNjcm9sbD17KGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5zY3JvbGxUb3AgPiAzMCAmJiAhc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfdXBfZGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9oaWRlIHRoZSBhcnJvdyBpZiB1c2VyIHNjcm9sbHMgYmFjayB0byB0aGUgdG9wXG4gICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5zY3JvbGxUb3AgPD0gMzAgJiZcbiAgICAgICAgICAgICAgICBzY3JvbGxfdXBfZGl2X2FscmVhZHlfdmlzaWJsZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX3VwX2Rpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICA+XG4gICAgICAgIHsjaWYgc2V0dGluZ3MuZ2V0KFwiZG9fc2hvd191cGRhdGVfbm90aWNlXCIpfVxuICAgICAgICAgICAgPFVwZGF0ZU5vdGljZSB7YXBwfSB7dmlld30ge3BsdWdpbn0gLz5cbiAgICAgICAgezplbHNlIGlmIGVycm9ycy5sZW5ndGh9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3JzXCI+XG4gICAgICAgICAgICAgICAge0BodG1sIGVycm9yc1swXX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICB7OmVsc2UgaWYgcGF0aHMubGVuZ3RoID09IDB9XG4gICAgICAgICAgICBUaGlzIGZpbGUgZG9lc24ndCBoYXZlIGFueSBjb25uZWN0aW9ucyB0byA8YVxuICAgICAgICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgICAgICAgdGl0bGU9e2NuX3BhdGh9XG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eyhldmVudCkgPT4gTmF2aWdhdGVUb0ZpbGUoYXBwLCBjbl9wYXRoLCBldmVudCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge0dldERpc3BsYXlOYW1lKGNuX3BhdGgsIGRiKX08L2FcbiAgICAgICAgICAgID4uPGJyIC8+PGJyIC8+IExpbmsgaXQgdG8gYSBmaWxlIHRoYXQgaXMgcGFydCBvZiB5b3VyIE1hcCBvZlxuICAgICAgICAgICAgQ29udGVudC4gVGhlblxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRiLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH19PnVwZGF0ZTwvYVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgeW91ciBNYXAgb2YgQ29udGVudCBhbmQgd2F0Y2ggaXQgZ3JvdyE8YnIgLz5cbiAgICAgICAgICAgIDxOb0xpbmtJbWFnZSAvPlxuICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICB7I2VhY2ggcGF0aHMgYXMgcGF0aH1cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGF0aFwiPlxuICAgICAgICAgICAgICAgICAgICB7I2VhY2ggcGF0aC5yZXZlcnNlKCkgYXMgcGF0aGl0ZW0sIGl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGkgPT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB0aXRsZT17cGF0aGl0ZW1bMF19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7R2V0RGlzcGxheU5hbWUocGF0aGl0ZW1bMF0sIGRiKX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3BhdGhpdGVtWzBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGV2ZW50KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmF2aWdhdGVUb0ZpbGUoYXBwLCBwYXRoaXRlbVswXSwgZXZlbnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0dldERpc3BsYXlOYW1lKHBhdGhpdGVtWzBdLCBkYil9PC9hXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cblxuICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBwYXRoaXRlbVsxXSA9PSBMSU5LRURfRlJPTX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicGF0aC1hcnJvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDE1LjA1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiIE0gMjEuODgzLDggMTQuMzU2LDE0LjIzNSAxNSwxNSAyNCw3LjQ3OSAxNSwwIDE0LjM1NSwwLjc2NCAyMS44ODQsNyBIIDAgdiAxIHpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlIGlmIHBhdGhpdGVtWzFdID09IExJTktFRF9UT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicGF0aC1hcnJvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDE1LjA1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTSAyLjExNyw3IDkuNjQ0LDAuNzY1IDksMCAwLDcuNTIxIDksMTUgOS42NDUsMTQuMjM2IDIuMTE2LDggSCAyNCBWIDcgWlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2UgaWYgcGF0aGl0ZW1bMV0gPT0gTElOS0VEX0JPVEh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInBhdGgtYXJyb3dcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0gOSAwIEwgMCA3LjUyMTQ4NDQgTCA5IDE1IEwgOS42NDQ1MzEyIDE0LjIzNjMyOCBMIDIuMTE1MjM0NCA4IEwgMjEuODgyODEyIDggTCAxNC4zNTU0NjkgMTQuMjM0Mzc1IEwgMTUgMTUgTCAyNCA3LjQ3ODUxNTYgTCAxNSAwIEwgMTQuMzU1NDY5IDAuNzYzNjcxODggTCAyMS44ODQ3NjYgNyBMIDIuMTE3MTg3NSA3IEwgOS42NDQ1MzEyIDAuNzY1NjI1IEwgOSAwIHogXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgIHsvZWFjaH1cblxuICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPERlc2NlbmRhbnRzXG4gICAgICAgICAgICAgICAgICAgIHtkYn1cbiAgICAgICAgICAgICAgICAgICAge2FwcH1cbiAgICAgICAgICAgICAgICAgICAge3ZpZXd9XG4gICAgICAgICAgICAgICAgICAgIG5vdGVfcGF0aD17dmlldy5vcGVuX2ZpbGVfcGF0aH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZW50YXRpb249ezB9XG4gICAgICAgICAgICAgICAgICAgIHtleHBhbmRNYW59XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuPHN0eWxlPlxuICAgIGRpdiNhbGwtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgIH1cbiAgICBkaXYjdG9wLWJhciB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDMwcHg7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyO1xuICAgICAgICBncmlkLWdhcDogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgIH1cblxuICAgIGRpdiN0b3AtYmFyIGRpdiNwaW4tZmlsZSBzdmcjcGlubmVkIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgZGl2I3RvcC1iYXIgZGl2I3Bpbi1maWxlLmlzLXBpbm5lZCBzdmcjcGlubmVkIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuXG4gICAgZGl2I3RvcC1iYXIgZGl2I3Bpbi1maWxlLmlzLXBpbm5lZCBzdmcjbm90LXBpbm5lZCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuXG4gICAgZGl2I3RvcC1iYXItZmxleCB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDMwcHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgICBkaXYjdG9wLWJhciBkaXYuYWN0aW9uIHtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgbWFyZ2luOiA1cHg7XG4gICAgfVxuICAgIGRpdiN0b3AtYmFyIGRpdi5hY3Rpb24gc3ZnIHtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgZmlsbDogZGFya2dyZXk7XG4gICAgfVxuICAgIGRpdiN0b3AtYmFyIGRpdi5hY3Rpb246aG92ZXIgc3ZnIHtcbiAgICAgICAgZmlsbDogZ3JleTtcbiAgICB9XG4gICAgZGl2LmRhcmstbW9kZSBkaXYjdG9wLWJhciBkaXYuYWN0aW9uIHN2ZyB7XG4gICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGZpbGw6IGdyZXk7XG4gICAgfVxuICAgIGRpdi5kYXJrLW1vZGUgZGl2I3RvcC1iYXIgZGl2LmFjdGlvbjpob3ZlciBzdmcge1xuICAgICAgICBmaWxsOiBkYXJrZ3JleTtcbiAgICB9XG4gICAgZGl2I21haW5fbW9jX2RpdiB7XG4gICAgICAgIHBhZGRpbmc6IGluaXRpYWw7XG4gICAgICAgIHdpZHRoOiBpbml0aWFsO1xuICAgICAgICBoZWlnaHQ6IGluaXRpYWw7XG4gICAgICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgZmxleDogMTtcbiAgICB9XG5cbiAgICBkaXYuZGFyay1tb2RlIHtcbiAgICAgICAgY29sb3I6ICNkY2RkZGU7XG4gICAgfVxuXG4gICAgZGl2I3Njcm9sbF91cCB7XG4gICAgICAgIGp1c3RpZnktc2VsZjogZmxleC1lbmQ7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuXG4gICAgZGl2I3Njcm9sbF91cCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgY29sb3I6IGRhcmtncmV5O1xuICAgIH1cblxuICAgIGRpdiNzY3JvbGxfdXAgc3ZnIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgIH1cblxuICAgIGRpdi5saWdodC1tb2RlIGRpdiNzY3JvbGxfdXAgc3ZnIHtcbiAgICAgICAgZmlsbDogZGFya2dyYXk7XG4gICAgfVxuICAgIGRpdi5saWdodC1tb2RlIGRpdiNzY3JvbGxfdXA6aG92ZXIgc3ZnIHtcbiAgICAgICAgZmlsbDogZ3JheTtcbiAgICB9XG5cbiAgICBkaXYuZGFyay1tb2RlIGRpdiNzY3JvbGxfdXAgc3ZnIHtcbiAgICAgICAgZmlsbDogZ3JheTtcbiAgICB9XG4gICAgZGl2LmRhcmstbW9kZSBkaXYjc2Nyb2xsX3VwOmhvdmVyIHN2ZyB7XG4gICAgICAgIGZpbGw6IGRhcmtncmF5O1xuICAgIH1cbiAgICBhLmxpbmsge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIHVsIHtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAwO1xuICAgIH1cblxuICAgIHN2Zy5wYXRoLWFycm93IHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAycHg7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZTtcbiAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICAgIGhlaWdodDogMC43ZW07XG4gICAgfVxuICAgIGRpdi5kYXJrLW1vZGUgc3ZnLnBhdGgtYXJyb3cge1xuICAgICAgICBmaWxsOiBsaWdodGdyYXk7XG4gICAgfVxuICAgIC5lcnJvcnMge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICB3aWR0aDogaW5pdGlhbDtcbiAgICAgICAgaGVpZ2h0OiBpbml0aWFsO1xuICAgICAgICBwb3NpdGlvbjogaW5pdGlhbDtcbiAgICAgICAgb3ZlcmZsb3cteTogaW5pdGlhbDtcbiAgICAgICAgb3ZlcmZsb3ctd3JhcDogaW5pdGlhbDtcbiAgICB9XG48L3N0eWxlPlxuIiwiaW1wb3J0ICdzdmVsdGUnXG5cbmltcG9ydCB7IEl0ZW1WaWV3LCBMaW5rQ2FjaGUsIE5vdGljZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbidcblxuXG5pbXBvcnQgeyBMb2cgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IE1PQ19WSUVXX1RZUEUgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tICcuL21haW4nXG5pbXBvcnQgdHlwZSB7IFBhdGggfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tICcuL2RiJ1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9zdmVsdGUvVmlldy5zdmVsdGUnXG5pbXBvcnQgdHlwZSB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vc2V0dGluZ3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNT0NWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBkYjogREJNYW5hZ2VyXG4gIF9hcHA6IFZpZXdcbiAgcGx1Z2luOiBNT0NQbHVnaW5cbiAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlclxuICBvcGVuX2ZpbGVfcGF0aDogc3RyaW5nXG4gIG1heF9pbmRlbnQ6IG51bWJlciA9IDVcbiAgaXNfcGlubmVkID0gZmFsc2VcbiAgbW9uaXRvcmluZ19ub3RlOiBzdHJpbmdcbiAgbW9uaXRvcmluZ19ub3RlX2xpbmtzOiBzdHJpbmdbXVxuXG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNT0NQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKVxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgdGhpcy5kYiA9IHRoaXMucGx1Z2luLmRiXG4gICAgdGhpcy5zZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5nc1xuICAgIHRoaXMuYXBwID0gdGhpcy5wbHVnaW4uYXBwXG5cbiAgICAvLyByZWdpc3RlciB3aXRoIHRoZSBtYWluIGNsYXNzXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJWaWV3SW5zdGFuY2UodGhpcylcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4gdGhpcy5pbml0KCkpXG5cbiAgICAvLyByZXJlbmRlciBvbiBjc3MgY2hhbmdlIHRvIGFkYXB0IHRvIGRhcmsvbGlnaHQgbW9kZSBjaGFuZ2VzXG4gICAgLy8gVE9ETyBwYXNzIGNvbW1hbmQgdG8gc3ZlbHRlLCBub3QgcmVjcmVhdGUgaXRcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiY3NzLWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcmVuZGVyKClcbiAgICB9KVxuXG4gIH1cblxuICBpbml0KCkge1xuICAgIC8vIHVwZGF0ZSB0aGUgcGF0aCB2aWV3IGV2ZXJ5IHRpbWUgYSBmaWxlIGlzIG9wZW5lZFxuICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6IFRGaWxlKSA9PiB7IGlmICghdGhpcy5pc19waW5uZWQpIHsgdGhpcy5tb25pdG9yTm90ZSgpOyB0aGlzLnJlcmVuZGVyKCkgfSB9KSlcbiAgICB0aGlzLm1vbml0b3JOb3RlKClcbiAgICB0aGlzLnJlcmVuZGVyKClcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcblxuICB9XG5cblxuICAvKiogcmVsb2FkIHBhdGhzIGFuZCByZWNyZWF0ZSB0aGUgc3ZlbHRlIGluc3RhbmNlICovXG4gIHJlcmVuZGVyKCk6IHZvaWQge1xuICAgIExvZyhcIlJlcmVuZGVyIGNhbGxlZCBvbiB2aWV3XCIpXG5cbiAgICAvLyBkZXN0cm95IG9sZCBwYXRodmlldy9lcnJvcnZpZXcgaW5zdGFuY2VcbiAgICAvLyBzZXQgc3ltYm9sIHRvIHVuZGVmaW5lZCB0byBhdm9pZCBcIlRoaXMgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkXCIgbWVzc2FnZVxuICAgIGlmICh0aGlzLl9hcHApIHtcbiAgICAgIHRoaXMuX2FwcC4kZGVzdHJveSgpXG4gICAgICB0aGlzLl9hcHAgPSB1bmRlZmluZWRcbiAgICB9XG5cblxuXG4gICAgbGV0IGVycm9ycyA9IFtdXG5cbiAgICBpZiAodGhpcy5kYi5kYXRhYmFzZV91cGRhdGluZykge1xuICAgICAgZXJyb3JzLnB1c2goXCJVcGRhdGluZy4uLlwiKVxuICAgIH1cblxuICAgIGVsc2UgaWYgKCF0aGlzLmRiLmRhdGFiYXNlX2NvbXBsZXRlKSB7XG4gICAgICBlcnJvcnMucHVzaChgWW91ciBNYXAgb2YgQ29udGVudCBjb3VsZG4ndCBiZSBjcmVhdGVkLjxicj48YnI+IE1ha2Ugc3VyZSB5b3VyIENlbnRyYWwgTm90ZSBwYXRoICcke3RoaXMuc2V0dGluZ3MuZ2V0KFwiQ05fcGF0aFwiKX0nIGlzIGNvcnJlY3QuIFlvdSBjYW4gY2hhbmdlIHRoaXMgcGF0aCBpbiB0aGUgc2V0dGluZ3MgdGFiLmApXG4gICAgfVxuXG4gICAgZWxzZSBpZiAodGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSA9PSBudWxsKSB7XG4gICAgICBlcnJvcnMucHVzaChcIk5vIGZpbGUgaXMgb3BlblwiKVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLnNldHRpbmdzLmlzRXhsdWRlZEZpbGUodGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiVGhpcyBmaWxlIGhhcyBiZWVuIGV4Y2x1ZGVkIGZyb20gdGhlIE1hcCBvZiBDb250ZW50LlwiKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMub3Blbl9maWxlX3BhdGggPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLnBhdGhcbiAgICAgIGlmICh0aGlzLmRiLmdldE5vdGVGcm9tUGF0aCh0aGlzLm9wZW5fZmlsZV9wYXRoKSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXCJVcGRhdGluZy4uLlwiKVxuICAgICAgICB0aGlzLmRiLnVwZGF0ZSh0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcGF0aHMgPSBbXVxuICAgIGlmIChlcnJvcnMubGVuZ3RoID09IDApIHtcbiAgICAgIGxldCBhbGxfcGF0aHMgPSB0aGlzLmRiLmZpbmRQYXRocyh0aGlzLm9wZW5fZmlsZV9wYXRoKVxuICAgICAgaWYgKGFsbF9wYXRocy5sZW5ndGggPT0gMCkge1xuICAgICAgICBMb2coXCJObyBwYXRocyB0byB0aGlzIG5vdGVcIilcbiAgICAgIH1cblxuICAgICAgcGF0aHMgPSBhbGxfcGF0aHMubWFwKChwOiBQYXRoKSA9PlxuICAgICAgICBwLml0ZW1zLnNsaWNlKClcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuXG4gICAgICB0aGlzLm9wZW5fZmlsZV9wYXRoID0gXCJOb25lXCJcbiAgICAgIHBhdGhzID0gW11cbiAgICB9XG5cbiAgICB0aGlzLl9hcHAgPSBuZXcgVmlldyh7XG4gICAgICB0YXJnZXQ6ICh0aGlzIGFzIGFueSkuY29udGVudEVsLFxuICAgICAgcHJvcHM6IHsgdmlldzogdGhpcywgcGF0aHM6IHBhdGhzLCBlcnJvcnM6IGVycm9ycyB9LFxuXG4gICAgfSlcbiAgfVxuXG4gIG9uQ2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICBMb2coXCJWaWV3IGNsb3NpbmdcIilcblxuICAgIGlmICh0aGlzLl9hcHApIHtcbiAgICAgIHRoaXMuX2FwcC4kZGVzdHJveSgpXG4gICAgICB0aGlzLl9hcHAgPSB1bmRlZmluZWQgICAgICAvLyBzZXQgc3ltYm9sIHRvIHVuZGVmaW5lZCB0byBhdm9pZCBcIlRoaXMgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkXCIgbWVzc2FnZVxuXG4gICAgfVxuXG4gICAgdGhpcy5wbHVnaW4udW5yZWdpc3RlclZpZXdJbnN0YW5jZSh0aGlzKVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gIH1cblxuICBhc3luYyBtb25pdG9yTm90ZSgpIHtcbiAgICBsZXQgcmVyZW5kZXIgPSBmYWxzZTtcbiAgICBsZXQgYWN0aXZlX2ZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgaWYgKGFjdGl2ZV9maWxlID09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZ2V0KFwiYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2VcIikpIHtcbiAgICAgIExvZyhcIm5vdCBtb25pdG9yaW5nIG5vdGUgYmVjYXVzZSBkaXNhYmxlZFwiKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChhY3RpdmVfZmlsZSA9PSBudWxsIHx8IHRoaXMuc2V0dGluZ3MuaXNFeGx1ZGVkRmlsZShhY3RpdmVfZmlsZSkpIHtcbiAgICAgIExvZyhcIm5vdCBtb25pdG9yaW5nIGJlY2F1c2Ugbm8gZmlsZSAvIGV4Y2x1ZGVkIGZpbGVcIilcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5tb25pdG9yaW5nX25vdGUgJiYgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZSh0aGlzLm1vbml0b3Jpbmdfbm90ZSkgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBMb2coXCJub3RlIG5hbWUgbXVzdCBoYXZlIGNoYW5nZWRcIilcbiAgICAgIHJlcmVuZGVyID0gdHJ1ZVxuICAgIH1cbiAgICBsZXQgcGF0aCA9IGFjdGl2ZV9maWxlLnBhdGhcblxuICAgIExvZyhcIk1vbml0b3Jub3RlIGNhbGxlZCBvbjogXCIgKyBwYXRoKVxuICAgIExvZyhcIk9sZCBtb25pdG9yaW5nIG5vdGU6IFwiICsgdGhpcy5tb25pdG9yaW5nX25vdGUpXG4gICAgaWYgKHRoaXMubW9uaXRvcmluZ19ub3RlICYmIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUodGhpcy5tb25pdG9yaW5nX25vdGUpKSB7XG4gICAgICBpZiAoIShwYXRoID09PSB0aGlzLm1vbml0b3Jpbmdfbm90ZSkpIHtcblxuICAgICAgICBsZXQgbm93X2xpbmtzID0gdGhpcy5kYi5nZXRMaW5rc0Zyb21Ob3RlKHRoaXMubW9uaXRvcmluZ19ub3RlKVxuICAgICAgICBpZiAoIShKU09OLnN0cmluZ2lmeShub3dfbGlua3MpID09IEpTT04uc3RyaW5naWZ5KHRoaXMubW9uaXRvcmluZ19ub3RlX2xpbmtzKSkpIHtcbiAgICAgICAgICBMb2coXCJsaW5rcyBjaGFuZ2VkIVwiKVxuICAgICAgICAgIHJlcmVuZGVyID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgIH1cbiAgICB0aGlzLm1vbml0b3Jpbmdfbm90ZSA9IHBhdGhcbiAgICB0aGlzLm1vbml0b3Jpbmdfbm90ZV9saW5rcyA9IHRoaXMuZGIuZ2V0TGlua3NGcm9tTm90ZShwYXRoKVxuICAgIGlmIChyZXJlbmRlcikge1xuICAgICAgdGhpcy5kYi51cGRhdGUodHJ1ZSlcbiAgICB9XG4gIH1cblxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIE1PQ19WSUVXX1RZUEVcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiTWFwIG9mIENvbnRlbnRcIlxuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcInN0YWNrZWQtbGV2ZWxzXCJcbiAgfVxuXG59XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB0eXBlIHsgQXBwLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuICAgIGltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2RiXCI7XG4gICAgaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XG4gICAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gXCJzdmVsdGVcIjtcblxuICAgIGltcG9ydCB7IExvZywgR2V0QWxsRm9sZGVycyB9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuXG4gICAgZXhwb3J0IGxldCBhcHA6IEFwcDtcbiAgICBleHBvcnQgbGV0IHBsdWdpbjogTU9DUGx1Z2luO1xuICAgIGxldCBleGNsdWRlZGxpc3Q7XG4gICAgbGV0IGV4Y2x1ZGVkX2ZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3MuZ2V0KFwiZXhsdWRlZF9mb2xkZXJzXCIpO1xuICAgIC8vIFRPRE8gc2hvdyBhbGwgZXhsdWRlZCBmaWxlcyBpbiBUZXh0RWRpdCBub3QgbGlzdFxuICAgIC8vIFNlbGVjdCBib3ggYmFzZWQgb24gaHR0cHM6Ly93d3cuYy1zaGFycGNvcm5lci5jb20vVXBsb2FkRmlsZS9tYWhha2d1cHRhL2FkZC1hbmQtcmVtb3ZlLWxpc3Rib3gtaXRlbXMtaW4tamF2YXNjcmlwdC9cbiAgICBsZXQgYWxsX2ZvbGRlcnMgPSBHZXRBbGxGb2xkZXJzKGFwcCk7XG5cbiAgICB2YXIgbGlzdF9vcHRpb25zX25vID0gMDtcbiAgICBsZXQgZXhjbHVkZWRfZmlsZXMgPSBhbGxFeGNsdWRlZEZpbGVzKCk7XG4gICAgb25Nb3VudCgoKSA9PiB7XG4gICAgICAgIC8vIGNyZWF0ZSBzZWxlY3QgZW50cmllcyBmb3IgYWxsIGFscmVhZHkgZXhjbHVkZWQgZm9sZGVyc1xuICAgICAgICBleGNsdWRlZF9mb2xkZXJzLmZvckVhY2goKGZvbGRlcikgPT4ge1xuICAgICAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbbGlzdF9vcHRpb25zX25vXSA9IG5ldyBPcHRpb24oZm9sZGVyLCBmb2xkZXIpO1xuICAgICAgICAgICAgbGlzdF9vcHRpb25zX25vKys7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYWxsRXhjbHVkZWRGaWxlcygpIHtcbiAgICAgICAgbGV0IGFsbF9maWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpLm1hcCgoZmlsZSkgPT4gZmlsZS5wYXRoKTtcblxuICAgICAgICByZXR1cm4gYWxsX2ZpbGVzLmZpbHRlcigocGF0aF90b19maWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXhjbHVkZWRfZm9sZGVycy5zb21lKChwYXRoOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgcGF0aF90b19maWxlLnN0YXJ0c1dpdGgocGF0aClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZTtcbiAgICBsZXQgZXhsdWRlX3BhdGhfaW5wdXQ7XG4gICAgbGV0IHNob3dfYWxsX2hpZGRlbiA9IGZhbHNlO1xuXG4gICAgLyoqIHVwZGF0ZSB0aGUgbGlzdCBvZiBleGx1ZGVkIGZpbGVzIGFuZCBzYXZlIHRoZSB1cGRhdGVkIHNldHRpbmdzKi9cbiAgICBmdW5jdGlvbiBzYXZlKCkge1xuICAgICAgICBleGNsdWRlZF9maWxlcyA9IGFsbEV4Y2x1ZGVkRmlsZXMoKTtcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnNldCh7IGV4bHVkZWRfZm9sZGVyczogZXhjbHVkZWRfZm9sZGVycyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKCFleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiBpZiBmb2xkZXIgZG9lc24ndCBleGlzdFxuICAgICAgICBpZiAoIWFsbF9mb2xkZXJzLmNvbnRhaW5zKGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgY2hvb3NlIGEgZm9sZGVyIGZyb20gdGhlIGxpc3RcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIGlmIGZvbGRlciBhbHJlYWR5IG9uIGxpc3RcbiAgICAgICAgaWYgKGV4Y2x1ZGVkX2ZvbGRlcnMuY29udGFpbnMoZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUpKSB7XG4gICAgICAgICAgICBleGx1ZGVfcGF0aF9pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIG9wdGlvbiB0byBzZWxlY3QgYm94XG4gICAgICAgIGxldCBBZGRPcHQgPSBuZXcgT3B0aW9uKFxuICAgICAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUsXG4gICAgICAgICAgICBleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZVxuICAgICAgICApO1xuICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm8rK10gPSBBZGRPcHQ7XG4gICAgICAgIGV4Y2x1ZGVkX2ZvbGRlcnMucHVzaChleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSk7XG5cbiAgICAgICAgLy8gcmVzZXQgaW5wdXQgZmllbGRcbiAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSA9IFwiXCI7XG5cbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVWYWx1ZSgpIHtcbiAgICAgICAgbGV0IHMgPSAxO1xuICAgICAgICBsZXQgSW5kZXg7XG4gICAgICAgIGlmIChleGNsdWRlZGxpc3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGFuIGl0ZW0gZnJvbSB0aGUgbGlzdFwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHMgPiAwKSB7XG4gICAgICAgICAgICBJbmRleCA9IGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4O1xuXG4gICAgICAgICAgICBpZiAoSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkX2ZvbGRlcnMucmVtb3ZlKGV4Y2x1ZGVkbGlzdC5vcHRpb25zW0luZGV4XS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tJbmRleF0gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLS1saXN0X29wdGlvbnNfbm87XG4gICAgICAgICAgICB9IGVsc2UgcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG48L3NjcmlwdD5cblxuPGgyPkV4Y2x1ZGVkIGZvbGRlcnM8L2gyPlxuXG48ZGl2IGlkPVwiZXhsdWRlZC1mb2xkZXJzXCI+XG4gICAgPGRpdiBpZD1cImxpc3QtZXhjbHVkZWRcIj5cbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgYmluZDp0aGlzPXtleGNsdWRlZGxpc3R9XG4gICAgICAgICAgICBpZD1cImV4Y2x1ZGVkLXNlbGVjdFwiXG4gICAgICAgICAgICBuYW1lPVwibHN0VmFsdWVcIlxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGlkPVwiYWRkLXJlbW92ZS1leGx1ZGVkXCI+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJteUJyb3dzZXJcIj4gQWRkIGEgZm9sZGVyOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgYmluZDp0aGlzPXtleGx1ZGVfcGF0aF9pbnB1dH1cbiAgICAgICAgICAgIGJpbmQ6dmFsdWU9e2V4bHVkZV9wYXRoX2lucHV0X3ZhbHVlfVxuICAgICAgICAgICAgbGlzdD1cImV4bHVkZS1mb2xkZXJcIlxuICAgICAgICAgICAgaWQ9XCJFeGx1ZGVkLWZvbGRlcnNcIlxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTdGFydCB0eXBpbmcgdG8gc2VlIHN1Z2dlc3Rpb25zLi4uXCJcbiAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6MzAwcHg7XCJcbiAgICAgICAgLz5cbiAgICAgICAgPGRhdGFsaXN0IGlkPVwiZXhsdWRlLWZvbGRlclwiPlxuICAgICAgICAgICAgeyNlYWNoIGFsbF9mb2xkZXJzIGFzIGZvbGRlcl9wYXRofVxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9e2ZvbGRlcl9wYXRofSAvPlxuICAgICAgICAgICAgey9lYWNofVxuICAgICAgICA8L2RhdGFsaXN0PjxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG5hbWU9XCJhZGRcIlxuICAgICAgICAgICAgdmFsdWU9XCJBZGRcIlxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRWYWx1ZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgLz48YnIgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG5hbWU9XCJkZWxldGVcIlxuICAgICAgICAgICAgdmFsdWU9XCJEZWxldGVcIlxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGVWYWx1ZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgLz48YnIgLz48YnIgLz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkXCI+XG4gICAgICAgIEN1cnJlbnRseSBleGNsdWRlZCBmaWxlczoge2V4Y2x1ZGVkX2ZpbGVzLmxlbmd0aH1cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG5hbWU9XCJ0b2dnbGUtc2hvdy1oaWRkZW5cIlxuICAgICAgICAgICAgdmFsdWU9e3Nob3dfYWxsX2hpZGRlbiA/IFwiSGlkZVwiIDogXCJTaG93XCJ9XG4gICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNob3dfYWxsX2hpZGRlbiA9ICFzaG93X2FsbF9oaWRkZW47XG4gICAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBzdHlsZT17c2hvd19hbGxfaGlkZGVuID8gXCJkaXNwbGF5OmJsb2NrXCIgOiBcImRpc3BsYXk6bm9uZVwifVxuICAgICAgICAgICAgaWQ9XCJjdXJyZW50bHktZXhjbHVkZWQtbGlzdFwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICB7I2VhY2ggZXhjbHVkZWRfZmlsZXMgYXMgZmlsZV9wYXRofVxuICAgICAgICAgICAgICAgICAgICA8bGk+e2ZpbGVfcGF0aH08L2xpPlxuICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgICAqIHtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgfVxuXG4gICAgaDIge1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIH1cblxuICAgIGRpdiNleGx1ZGVkLWZvbGRlcnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGNvbHVtbi1nYXA6IDEwcHg7XG4gICAgfVxuXG4gICAgZGl2I2xpc3QtZXhjbHVkZWQge1xuICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgfVxuXG4gICAgI2V4Y2x1ZGVkLXNlbGVjdCB7XG4gICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIH1cblxuICAgICNhZGQtcmVtb3ZlLWV4bHVkZWQge1xuICAgICAgICBoZWlnaHQ6IDMwMHB4O1xuICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgfVxuICAgIGRpdiNjdXJyZW50bHktZXhjbHVkZWQge1xuICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICBkaXYjY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3Qge1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgbWF4LWhlaWdodDogMjYwcHg7XG4gICAgfVxuPC9zdHlsZT5cbiIsIjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gICAgaW1wb3J0IHR5cGUgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gICAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vZGJcIjtcbiAgICBpbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuXG4gICAgZXhwb3J0IGxldCBhcHA6IEFwcDtcbiAgICBleHBvcnQgbGV0IHBsdWdpbjogTU9DUGx1Z2luO1xuICAgIGxldCBleGNsdWRlZGxpc3Q7XG5cbiAgICBsZXQgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzID0gcGx1Z2luLnNldHRpbmdzLmdldChcbiAgICAgICAgXCJleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHNcIlxuICAgICk7XG4gICAgbGV0IGFsbF9maWxlcyA9IGFwcC52YXVsdFxuICAgICAgICAuZ2V0RmlsZXMoKVxuICAgICAgICAubWFwKChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lICsgXCIuXCIgKyBmaWxlLmV4dGVuc2lvbik7XG5cbiAgICBsZXQgZXhjbHVkZWRfZmlsZXMgPSBhbGxFeGNsdWRlZEZpbGVzKCk7XG4gICAgLy8gVE9ETyBzaG93IGFsbCBleGx1ZGVkIGZpbGVzIGluIFRleHRFZGl0IG5vdCBsaXN0XG4gICAgXG4gICAgLy8gYWRkIGFsbCBleGlzdGluZyBleGNsdWRlZCBmb2xkZXJzIHRvIHNlbGVjdCBlbGVtZW50XG5cbiAgICB2YXIgbGlzdF9vcHRpb25zX25vID0gMDtcbiAgICBvbk1vdW50KCgpID0+IHtcbiAgICAgICAgLy8gY3JlYXRlIHNlbGVjdCBlbnRyaWVzIGZvciBhbGwgYWxyZWFkeSBleGNsdWRlZCBmaWxlbmFtZSBjb21wb25lbnRzXG4gICAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cy5mb3JFYWNoKChmb2xkZXIpID0+IHtcbiAgICAgICAgICAgIGV4Y2x1ZGVkbGlzdC5vcHRpb25zW2xpc3Rfb3B0aW9uc19ub10gPSBuZXcgT3B0aW9uKGZvbGRlciwgZm9sZGVyKTtcbiAgICAgICAgICAgIGxpc3Rfb3B0aW9uc19ubysrO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGFsbEV4Y2x1ZGVkRmlsZXMoKSB7XG4gICAgICAgIHJldHVybiBhbGxfZmlsZXMuZmlsdGVyKChmaWxlbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLnNvbWUoKHBhdGg6IHN0cmluZykgPT5cbiAgICAgICAgICAgICAgICBmaWxlbmFtZS5jb250YWlucyhwYXRoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlO1xuICAgIGxldCBleGNsdWRlX3BocmFzZV9pbnB1dDtcbiAgICBsZXQgc2hvd19hbGxfaGlkZGVuID0gZmFsc2U7XG5cbiAgICAvKiogdXBkYXRlIHRoZSBsaXN0IG9mIGV4bHVkZWQgZmlsZXMgYW5kIHNhdmUgdGhlIHVwZGF0ZWQgc2V0dGluZ3MqL1xuICAgIGZ1bmN0aW9uIHNhdmUoKSB7XG4gICAgICAgIGV4Y2x1ZGVkX2ZpbGVzID0gYWxsRXhjbHVkZWRGaWxlcygpO1xuICAgICAgICBwbHVnaW4uc2V0dGluZ3Muc2V0KHtcbiAgICAgICAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50czogZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkVmFsdWUoKSB7XG4gICAgICAgIGlmICghZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gaWYgZm9sZGVyIGFscmVhZHkgb24gbGlzdFxuICAgICAgICBpZiAoZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLmNvbnRhaW5zKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKSkge1xuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIG9wdGlvbiB0byBzZWxlY3QgYm94XG4gICAgICAgIGxldCBBZGRPcHQgPSBuZXcgT3B0aW9uKFxuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUsXG4gICAgICAgICAgICBleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZVxuICAgICAgICApO1xuICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm8rK10gPSBBZGRPcHQ7XG4gICAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cy5wdXNoKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKTtcbiAgICAgICAgLy8gcmVzZXQgaW5wdXQgZmllbGRcblxuICAgICAgICBleGNsdWRlX3BocmFzZV9pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlID0gXCJcIjtcblxuICAgICAgICBzYXZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVZhbHVlKCkge1xuICAgICAgICBsZXQgcyA9IDE7XG4gICAgICAgIGxldCBJbmRleDtcbiAgICAgICAgaWYgKGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gaXRlbSBmcm9tIHRoZSBsaXN0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAocyA+IDApIHtcbiAgICAgICAgICAgIEluZGV4ID0gZXhjbHVkZWRsaXN0LnNlbGVjdGVkSW5kZXg7XG5cbiAgICAgICAgICAgIGlmIChJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLnJlbW92ZShcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbSW5kZXhdLnZhbHVlXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkbGlzdC5vcHRpb25zW0luZGV4XSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAtLWxpc3Rfb3B0aW9uc19ubztcbiAgICAgICAgICAgIH0gZWxzZSBzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBzYXZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbjwvc2NyaXB0PlxuXG48aDI+RXhjbHVkZWQgZmlsZW5hbWVzPC9oMj5cbkZpbGVuYW1lcyB0aGF0IGNvbnRhaW4gdGhlc2UgcGhyYXNlcyB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgTWFwIG9mIENvbnRlbnQuXG5UaGF0IGFsc28gaW5jbHVkZXMgdGhlIGZpbGUgZXh0ZW5zaW9uLjxiciAvPjxiciAvPlxuXG48ZGl2IGlkPVwiZXhsdWRlLWZpbGVuYW1lc1wiPlxuICAgIDxkaXYgaWQ9XCJsaXN0LWV4Y2x1ZGVkXCI+XG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZWRsaXN0fVxuICAgICAgICAgICAgaWQ9XCJleGNsdWRlZC1zZWxlY3RcIlxuICAgICAgICAgICAgbmFtZT1cImxzdFZhbHVlXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImFkZC1yZW1vdmUtZXhsdWRlZFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwibXlCcm93c2VyXCI+IEFkZCBhIHBocmFzZTo8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZV9waHJhc2VfaW5wdXR9XG4gICAgICAgICAgICBiaW5kOnZhbHVlPXtleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZX1cbiAgICAgICAgICAgIGlkPVwiRXhsdWRlZC1maWxlbmFtZXNcIlxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDozMDBweDtcIlxuICAgICAgICAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiYWRkXCJcbiAgICAgICAgICAgIHZhbHVlPVwiQWRkXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiZGVsZXRlXCJcbiAgICAgICAgICAgIHZhbHVlPVwiRGVsZXRlXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+PGJyIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImN1cnJlbnRseS1leGNsdWRlZFwiPlxuICAgICAgICBDdXJyZW50bHkgZXhjbHVkZWQgZmlsZXM6IHtleGNsdWRlZF9maWxlcy5sZW5ndGh9XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwidG9nZ2xlLXNob3ctaGlkZGVuXCJcbiAgICAgICAgICAgIHZhbHVlPXtzaG93X2FsbF9oaWRkZW4gPyBcIkhpZGVcIiA6IFwiU2hvd1wifVxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzaG93X2FsbF9oaWRkZW4gPSAhc2hvd19hbGxfaGlkZGVuO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9e3Nob3dfYWxsX2hpZGRlbiA/IFwiZGlzcGxheTpibG9ja1wiIDogXCJkaXNwbGF5Om5vbmVcIn1cbiAgICAgICAgICAgIGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3RcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgeyNlYWNoIGV4Y2x1ZGVkX2ZpbGVzIGFzIGZpbGVfcGF0aH1cbiAgICAgICAgICAgICAgICAgICAgPGxpPntmaWxlX3BhdGh9PC9saT5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgKiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIH1cblxuICAgIGgyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG5cbiAgICBkaXYjZXhsdWRlLWZpbGVuYW1lcyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgY29sdW1uLWdhcDogMTBweDtcbiAgICB9XG5cbiAgICBkaXYjbGlzdC1leGNsdWRlZCB7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICB9XG5cbiAgICAjZXhjbHVkZWQtc2VsZWN0IHtcbiAgICAgICAgaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgfVxuXG4gICAgI2FkZC1yZW1vdmUtZXhsdWRlZCB7XG4gICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICB9XG4gICAgZGl2I2N1cnJlbnRseS1leGNsdWRlZCB7XG4gICAgICAgIHdpZHRoOiA2MDBweDtcbiAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgIGRpdiNjdXJyZW50bHktZXhjbHVkZWQtbGlzdCB7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICBtYXgtaGVpZ2h0OiAyNjBweDtcbiAgICB9XG48L3N0eWxlPlxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gIGltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4uL2RiXCI7XG4gIGltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuICBpbXBvcnQgeyBMb2csIEdldEFsbEZvbGRlcnMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbiAgaW1wb3J0IEV4Y2x1ZGVkRm9sZGVycyBmcm9tIFwiLi9zZXR0aW5ncy9FeGNsdWRlZEZvbGRlcnMuc3ZlbHRlXCI7XG4gIGltcG9ydCBFeGNsdWRlZEZpbGVuYW1lcyBmcm9tIFwiLi9zZXR0aW5ncy9FeGNsdWRlZEZpbGVuYW1lcy5zdmVsdGVcIjtcblxuICBleHBvcnQgbGV0IGFwcDogQXBwO1xuICBleHBvcnQgbGV0IHBsdWdpbjogTU9DUGx1Z2luO1xuICBsZXQgY25faW5wdXQ7XG4gIGxldCBzZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcblxuICAvLyBUT0RPIGNoZWNrIHRoZSBkYiBpcyBjb21wbGV0ZSBiZWZvcmUgYWxsb3cgc2V0dGluZ3MgY2hhbmdlcyAobWF5YmUgaGF2ZSB0aGlzIHN2ZWx0ZSBvbmx5IGRvIHRoYXQgYW5kIGxvYWQgYWxsIG90aGVyIGNvbXBvbmVudHMgZnJvbSBvdGhlciBzdmVsdGUgZmlsZXMpXG4gIC8vIFRPRE8gbGF6eSBsb2FkIGFsbCB0aGUgZmlsZSBuYW1lcyBhbmQgZm9sZGVycz9cblxuICAvLyBnZXQgbGlzdCBvZiBhbGwgZmlsZXMgZm9yIGRyb3Bkb3duIG1lbnVcbiAgbGV0IGFsbF9maWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpLm1hcCgoZmlsZTogVEZpbGUpID0+IGZpbGUucGF0aCk7XG4gIExvZyhcIkNlbnRyYWwgbm90ZSBwYXRoOiBcIiArIHNldHRpbmdzLmdldChcIkNOX3BhdGhcIikpO1xuICBsZXQgY25fcGF0aF9pbnB1dF92YWx1ZTtcbiAgbGV0IGN1cnJlbnRfdGxpID0gc2V0dGluZ3MuZ2V0KFwiQ05fcGF0aFwiKTtcblxuICBjb25zdCB1cGRhdGVDTlBhdGggPSAoKSA9PiB7XG4gICAgaWYgKCFjbl9wYXRoX2lucHV0X3ZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNoYW5nZSBUTEkgcGF0aFxuICAgIHNldHRpbmdzLnNldCh7IENOX3BhdGg6IGNuX3BhdGhfaW5wdXRfdmFsdWUgfSk7XG4gICAgTG9nKFwiTmV3IGNlbnRyYWwgbm90ZSBwYXRoOiBcIiArIGNuX3BhdGhfaW5wdXRfdmFsdWUpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGxpX3BhdGhcIikudGV4dENvbnRlbnQgPSBjbl9wYXRoX2lucHV0X3ZhbHVlO1xuICAgIG5ldyBOb3RpY2UoXCJOZXcgQ2VudHJhbCBOb3RlIHBhdGggc2F2ZWRcIik7XG5cbiAgICAvLyBjbGVhciBzZWxlY3Rpb24gZHJvcGRvd24gbGlzdFxuICAgIGNuX2lucHV0LnZhbHVlID0gXCJcIjtcbiAgICBjbl9wYXRoX2lucHV0X3ZhbHVlID0gXCJcIjtcbiAgfTtcbiAgbGV0IGF1dG9fdXBkYXRlX2ZpbGVfc3dpdGNoX2NoZWNrYm94O1xuICBsZXQgZG9fcmVtZW1iZXJfZXhwYW5kZWRfY2hlY2tib3g7XG4gIGNvbnN0IHRvZ2dsZVVwZGF0ZU9uRmlsZVN3aXRjaCA9ICgpID0+IHtcbiAgICBzZXR0aW5ncy5zZXQoe1xuICAgICAgYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2U6ICFzZXR0aW5ncy5nZXQoXCJhdXRvX3VwZGF0ZV9vbl9maWxlX2NoYW5nZVwiKSxcbiAgICB9KTtcbiAgICBpZiAoc2V0dGluZ3MuZ2V0KFwiYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2VcIikpIHtcbiAgICAgIGF1dG9fdXBkYXRlX2ZpbGVfc3dpdGNoX2NoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdXRvX3VwZGF0ZV9maWxlX3N3aXRjaF9jaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuPC9zY3JpcHQ+XG5cbjxkaXYgaWQ9XCJzZXR0aW5ncy1jb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cInBhdGhcIj5cbiAgICA8aDI+UGF0aCBvZiB5b3VyIENlbnRyYWwgTm90ZTwvaDI+XG4gICAgQ3VycmVudCBwYXRoOiZuYnNwOzxzcGFuIGlkPVwidGxpX3BhdGhcIj57Y3VycmVudF90bGl9PC9zcGFuPjxiciAvPlxuICAgIDxsYWJlbCBmb3I9XCJteUJyb3dzZXJcIj4gTmV3IHBhdGg6PC9sYWJlbD5cbiAgICA8aW5wdXRcbiAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgIGJpbmQ6dGhpcz17Y25faW5wdXR9XG4gICAgICBiaW5kOnZhbHVlPXtjbl9wYXRoX2lucHV0X3ZhbHVlfVxuICAgICAgbGlzdD1cIm5vdGVzXCJcbiAgICAgIGlkPVwiQ05fc2VsZWN0XCJcbiAgICAgIHBsYWNlaG9sZGVyPVwiU3RhcnQgdHlwaW5nIHRvIHNlZSBzdWdnZXN0aW9ucy4uLlwiXG4gICAgLz5cblxuICAgIDxkYXRhbGlzdCBpZD1cIm5vdGVzXCI+XG4gICAgICB7I2VhY2ggYWxsX2ZpbGVzIGFzIGZpbGVwYXRofVxuICAgICAgICA8b3B0aW9uIHZhbHVlPXtmaWxlcGF0aH0gLz57L2VhY2h9XG4gICAgPC9kYXRhbGlzdD5cblxuICAgIDxidXR0b25cbiAgICAgIGlkPVwidXBkYXRlX1RMSV9wYXRoX2J1dHRvblwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgIHVwZGF0ZUNOUGF0aCgpO1xuICAgICAgfX0+U2F2ZTwvYnV0dG9uXG4gICAgPlxuICA8L2Rpdj5cbiAgPGJyIC8+XG4gIDxkaXY+XG4gICAgPGgyPkF1dG8tdXBkYXRpbmcgdGhlIE1hcCBvZiBDb250ZW50PC9oMj5cbiAgICA8bGFiZWwgZm9yPVwiYXV0by11cGRhdGUtZmlsZS1zd2l0Y2hcIlxuICAgICAgPlVwZGF0ZSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIGZpbGVzXG4gICAgPC9sYWJlbD48aW5wdXRcbiAgICAgIGJpbmQ6dGhpcz17YXV0b191cGRhdGVfZmlsZV9zd2l0Y2hfY2hlY2tib3h9XG4gICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgaWQ9XCJhdXRvLXVwZGF0ZS1maWxlLXN3aXRjaFwiXG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICBsZXQgZW5hYmxlZCA9ICFzZXR0aW5ncy5nZXQoXCJhdXRvX3VwZGF0ZV9vbl9maWxlX2NoYW5nZVwiKTtcbiAgICAgICAgc2V0dGluZ3Muc2V0KHtcbiAgICAgICAgICBhdXRvX3VwZGF0ZV9vbl9maWxlX2NoYW5nZTogZW5hYmxlZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGF1dG9fdXBkYXRlX2ZpbGVfc3dpdGNoX2NoZWNrYm94LmNoZWNrZWQgPSBlbmFibGVkO1xuICAgICAgfX1cbiAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmdldChcImF1dG9fdXBkYXRlX29uX2ZpbGVfY2hhbmdlXCIpfVxuICAgIC8+XG4gIDwvZGl2PlxuICA8YnIgLz5cbiAgPGRpdj5cbiAgICA8aDI+RGVzY2VuZGFudHM8L2gyPlxuICAgIDxsYWJlbCBmb3I9XCJkb19yZW1lbWJlcl9leHBhbmRlZF9jaGVja2JveFwiXG4gICAgICA+UmVtZW1iZXIgd2hldGhlciBhIGZpbGUncyBkZXNjYW5kYW50cyBhcmUgc2hvd24gb3IgaGlkZGVuXG4gICAgPC9sYWJlbD48aW5wdXRcbiAgICAgIGJpbmQ6dGhpcz17ZG9fcmVtZW1iZXJfZXhwYW5kZWRfY2hlY2tib3h9XG4gICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgaWQ9XCJkb19yZW1lbWJlcl9leHBhbmRlZF9jaGVja2JveFwiXG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICBsZXQgZW5hYmxlZCA9ICFzZXR0aW5ncy5nZXQoXCJkb19yZW1lbWJlcl9leHBhbmRlZFwiKTtcbiAgICAgICAgc2V0dGluZ3Muc2V0KHtcbiAgICAgICAgICBkb19yZW1lbWJlcl9leHBhbmRlZDogZW5hYmxlZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGRvX3JlbWVtYmVyX2V4cGFuZGVkX2NoZWNrYm94LmNoZWNrZWQgPSBlbmFibGVkO1xuICAgICAgfX1cbiAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmdldChcImRvX3JlbWVtYmVyX2V4cGFuZGVkXCIpfVxuICAgIC8+XG4gIDwvZGl2PlxuICA8YnIgLz5cbiAgPEV4Y2x1ZGVkRm9sZGVycyB7YXBwfSB7cGx1Z2lufSAvPlxuICA8RXhjbHVkZWRGaWxlbmFtZXMge2FwcH0ge3BsdWdpbn0gLz5cbiAgPHA+XG4gICAgRm9yIHN1cHBvcnQgJiBzdWdnZXN0aW9uIGZlYXR1cmUgaWRlYXMsIHZpc2l0IHRoZSBwbHVnaW4ncyA8YVxuICAgICAgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9Sb2Jpbi1IYXVwdC0xL09ic2lkaWFuLU1hcC1vZi1Db250ZW50XCJcbiAgICA+XG4gICAgICBHaXRIdWIgcGFnZTwvYVxuICAgID5cbiAgICBvclxuICAgIDxhIGhyZWY9XCJodHRwczovL2ZvcnVtLm9ic2lkaWFuLm1kL3QvbWFwLW9mLWNvbnRlbnQtcGx1Z2luLXJlbGVhc2UvMjUyMDlcIj5cbiAgICAgIHRoaXMgcG9zdDwvYVxuICAgID5cbiAgICBpbiB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gZm9ydW0uXG4gICAgPGJyIC8+PGJyIC8+XG4gICAgWW91IGNhbiBzdXBwb3J0IHRoZSBkZXZlbG9wbWVudCBieSBkb25hdGluZyBvblxuICAgIDxhIGhyZWY9XCJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9Sb2JpbkhhdXB0XCI+UGF0cmVvbjwvYT4sXG4gICAgPGEgaHJlZj1cImh0dHBzOi8va28tZmkuY29tL3JvYmluaGF1cHRcIj5Lby1GaTwvYT5cbiAgICBvciA8YSBocmVmPVwiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9wYXlwYWxtZS9yb2JpbmhhdXB0XCI+UGF5UGFsPC9hPi4gVGhhbmtcbiAgICB5b3UhXG4gIDwvcD5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICNzZXR0aW5ncy1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgI0NOX3NlbGVjdCB7XG4gICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICB3aWR0aDogNTAlO1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICB9XG4gICN1cGRhdGVfVExJX3BhdGhfYnV0dG9uIHtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIH1cbiAgaDIge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cbjwvc3R5bGU+XG4iLCJpbXBvcnQgdHlwZSB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbidcblxuaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuL21haW5cIlxuaW1wb3J0IHsgTG9nIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSB7IERCTWFuYWdlciB9IGZyb20gJy4vZGInXG5pbXBvcnQgU2V0dGluZ3MgZnJvbSAnLi9zdmVsdGUvU2V0dGluZ3Muc3ZlbHRlJztcblxuZXhwb3J0IGludGVyZmFjZSBNT0NTZXR0aW5ncyB7XG5cdENOX3BhdGg6IHN0cmluZyxcblx0ZXhsdWRlZF9mb2xkZXJzOiBzdHJpbmdbXSxcblx0ZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzOiBzdHJpbmdbXSxcblx0c2V0dGluZ3NfdmVyc2lvbjogc3RyaW5nLFxuXHRwbHVnaW5fdmVyc2lvbjogc3RyaW5nLFxuXHRkb19zaG93X3VwZGF0ZV9ub3RpY2U6IGJvb2xlYW4sXG5cdGF1dG9fdXBkYXRlX29uX2ZpbGVfY2hhbmdlOiBib29sZWFuLFxuXHRkb19yZW1lbWJlcl9leHBhbmRlZDogYm9vbGVhbixcblx0ZmlsZV9kZXNjZW5kYW50c19leHBhbmRlZDoge31cbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1PQ1NldHRpbmdzID0ge1xuXHRDTl9wYXRoOiBcIkNlbnRyYWwgTm90ZS5tZFwiLFxuXHRleGx1ZGVkX2ZvbGRlcnM6IFtdLFxuXHRleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHM6IFtdLFxuXHRzZXR0aW5nc192ZXJzaW9uOiBcIjAuMS4xNFwiLFxuXHRwbHVnaW5fdmVyc2lvbjogXCIwLjEuMTRcIixcblx0ZG9fc2hvd191cGRhdGVfbm90aWNlOiBmYWxzZSxcblx0YXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2U6IHRydWUsXG5cdGRvX3JlbWVtYmVyX2V4cGFuZGVkOiBmYWxzZSxcblx0ZmlsZV9kZXNjZW5kYW50c19leHBhbmRlZDoge31cbn1cblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XG5cdHNldHRpbmdzOiBNT0NTZXR0aW5ncztcblx0cGx1Z2luOiBNT0NQbHVnaW47XG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogYW55KSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIHRoaXMuVXBncmFkZVNldHRpbmdzVmVyc2lvbihhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpKSk7XG5cdFx0dGhpcy5zYXZlU2V0dGluZ3MoKVxuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0YXN5bmMgc2V0KHVwZGF0ZXM6IFBhcnRpYWw8TU9DU2V0dGluZ3M+KSB7XG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLCB1cGRhdGVzKVxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpXG5cdH1cblxuXHRnZXQ8SyBleHRlbmRzIGtleW9mIE1PQ1NldHRpbmdzPihzZXR0aW5nOiBLKTogTU9DU2V0dGluZ3NbS10ge1xuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzW3NldHRpbmddXG5cdH1cblxuXHRVcGdyYWRlU2V0dGluZ3NWZXJzaW9uKG9iamVjdDogYW55KSB7XG5cdFx0Ly8gVE9ETyByZW1vdmUgZGVsZXRlZC9yZW5hbWVkIGZpbGVzIGZyb20gdGhlIGlzX2V4cGFuZGVkIG9iamVjdFxuXHRcdHRyeSB7XG5cdFx0XHQvLyBpZiBmcmVzaCBpbnN0YWxsLCBnbyB3aXRoIGRlZmF1bHRzXG5cdFx0XHRpZiAob2JqZWN0ID09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRMb2coXCJmcmVzaCBpbnN0YWxsLCByZXR1cm5pbmcgZW1wdHkgc2V0dGluZ3Mgb2JqZWN0XCIpXG5cdFx0XHRcdHJldHVybiB7fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBhYm9ydCBpZiBzZXR0aW5ncyBhcmUgYWxyZWFkeSBpbiBjdXJyZW50IHZlcnNpb24gZm9ybWF0XG5cdFx0XHRpZiAob2JqZWN0W1wic2V0dGluZ3NfdmVyc2lvblwiXSA9PT0gREVGQVVMVF9TRVRUSU5HU1tcInNldHRpbmdzX3ZlcnNpb25cIl0pIHtcblx0XHRcdFx0TG9nKFwiU2V0dGluZ3MgYWxyZWFkeSBpbiBjdXJyZW50IHZlcnNpb25cIilcblx0XHRcdFx0cmV0dXJuIG9iamVjdFxuXHRcdFx0fVxuXG5cdFx0XHQvLyBjbG9uZSB0aGUgb2JqZWN0XG5cdFx0XHRvYmplY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpXG5cblx0XHRcdGxldCBvYmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdClcblx0XHRcdExvZyhcIm9sZCBzZXR0aW5ncyBvYmplY3Q6IFwiICsgU3RyaW5nKG9iamVjdF9rZXlzKSlcblx0XHRcdGxldCBvbGRfdmVyc2lvbiA9IHVuZGVmaW5lZFxuXG5cdFx0XHQvLyBkZXRlcm1pbmUgd2hpY2ggdmVyc2lvbiB0aGUgbGVnYWN5IG9iamVjdCBpcyBmcm9tXG5cdFx0XHRpZiAoIW9iamVjdF9rZXlzLmNvbnRhaW5zKFwic2V0dGluZ3NfdmVyc2lvblwiKSkge1xuXHRcdFx0XHRvbGRfdmVyc2lvbiA9IFwicHJlLTAuMS4xMFwiXG5cdFx0XHR9XG5cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRvbGRfdmVyc2lvbiA9IG9iamVjdFtcInNldHRpbmdzX3ZlcnNpb25cIl1cblx0XHRcdH1cblxuXHRcdFx0TG9nKFwib2xkIHNldHRpbmdzIHZlcnNpb246IFwiICsgb2xkX3ZlcnNpb24pXG5cblx0XHRcdGlmIChvbGRfdmVyc2lvbiA9PT0gXCJwcmUtMC4xLjEwXCIpIHtcblx0XHRcdFx0Ly8gZXh0cmFjdCB0aGUgQ04gcGF0aCBmcm9tIENOX3BhdGhfcGVyX3ZhdWx0IGFuZCBzYXZlIGl0IGFzIENOX3BhdGhcblx0XHRcdFx0TG9nKFwiQ29udmVydGluZyBDTiBwYXRoIGZyb20gcHJlLTAuMS4xMCB0byAwLjEuMTBcIilcblxuXHRcdFx0XHRsZXQgY25fc2V0dGluZ3NfdmF1bHRfbmFtZXMgPSBvYmplY3RbXCJDTl9wYXRoX3Blcl92YXVsdFwiXS5tYXAoKHZhbDogW3N0cmluZywgc3RyaW5nXSkgPT4gdmFsWzBdKSAvLyBnZXQganVzdCB0aGUgbmFtZSBvZiBhbGwgdmF1bHRzIHRoZXJlJ3MgYSBDTiBzdG9yZWQgZm9yXG5cdFx0XHRcdGlmIChjbl9zZXR0aW5nc192YXVsdF9uYW1lcy5jb250YWlucyh0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TmFtZSgpKSkge1xuXHRcdFx0XHRcdG9iamVjdFtcIkNOX3BhdGhcIl0gPSBvYmplY3RbXCJDTl9wYXRoX3Blcl92YXVsdFwiXVtjbl9zZXR0aW5nc192YXVsdF9uYW1lcy5pbmRleE9mKHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXROYW1lKCkpXVsxXVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlbGV0ZSBvYmplY3RbXCJDTl9wYXRoXCJdXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgb2JqZWN0W1wiQ05fcGF0aF9wZXJfdmF1bHRcIl1cblxuXHRcdFx0XHRvYmplY3RbXCJzZXR0aW5nc192ZXJzaW9uXCJdID0gXCIwLjEuMTBcIlxuXG5cdFx0XHR9XHRcdFx0Ly8gY2xvbmUgdGhlIG9iamVjdFxuXG5cblx0XHRcdGlmIChvbGRfdmVyc2lvbiA9PT0gXCIwLjEuMTBcIikge1xuXHRcdFx0XHRMb2coXCJ1cGdyYWRpbmcgc2V0dGluZ3MgdG8gMC4xLjEyXCIpXG5cdFx0XHRcdG9iamVjdFtcInBsdWdpbl92ZXJzaW9uXCJdID0gXCIwLjEuMTJcIlxuXHRcdFx0XHRvYmplY3RbXCJzZXR0aW5nc192ZXJzaW9uXCJdID0gXCIwLjEuMTJcIlxuXHRcdFx0XHRvYmplY3RbXCJkb19zaG93X3VwZGF0ZV9ub3RpY2VcIl09dHJ1ZVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmIChvbGRfdmVyc2lvbiA9PT0gXCIwLjEuMTJcIikge1xuXHRcdFx0XHRMb2coXCJ1cGdyYWRpbmcgc2V0dGluZ3MgdG8gMC4xLjE0XCIpXG5cdFx0XHRcdG9iamVjdFtcInBsdWdpbl92ZXJzaW9uXCJdID0gXCIwLjEuMTRcIlxuXHRcdFx0XHRvYmplY3RbXCJzZXR0aW5nc192ZXJzaW9uXCJdID0gXCIwLjEuMTRcIlxuXHRcdFx0XHRvYmplY3RbXCJkb19zaG93X3VwZGF0ZV9ub3RpY2VcIl09dHJ1ZVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGhpcy5VcGdyYWRlU2V0dGluZ3NWZXJzaW9uKG9iamVjdClcblx0XHR9IGNhdGNoIHtcblx0XHRcdC8vIGl0IHRoaW5ncyBkb24ndCB3b3JrIG91dCwgZGVsZXRlIGFsbCBvbGQgc2V0dGluZ3MgZGF0YSAoYmV0dGVyIHRoYW4gYnJlYWtpbmcgdGhlIHBsdWdpbilcblx0XHRcdExvZyhcImVycm9yIHdoaWxlIHRyYW5zZm9ybWluZyBzZXR0aW5ncyBvYmplY3RcIilcblx0XHRcdHJldHVybiB7fVxuXHRcdH1cblx0fVxuXG5cdGlzRXhsdWRlZEZpbGUoZmlsZTogVEZpbGUpIHtcblx0XHRsZXQgcGF0aF90b19maWxlID0gZmlsZS5wYXRoXG5cdFx0bGV0IGluX2V4Y2x1ZGVkX2ZvbGRlciA9IHRoaXMuZ2V0KFwiZXhsdWRlZF9mb2xkZXJzXCIpLnNvbWUoKHBhdGg6IHN0cmluZykgPT4gcGF0aF90b19maWxlLnN0YXJ0c1dpdGgocGF0aCkpXG5cdFx0aWYgKGluX2V4Y2x1ZGVkX2ZvbGRlcikgeyByZXR1cm4gdHJ1ZSB9XG5cdFx0bGV0IGZpbGVuYW1lID0gZmlsZS5iYXNlbmFtZSArIFwiLlwiICsgZmlsZS5leHRlbnNpb25cblx0XHRsZXQgaGFzX2V4Y2x1ZGVkX2ZpbGVuYW1lID0gdGhpcy5nZXQoXCJleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHNcIikuc29tZSgocGhyYXNlOiBzdHJpbmcpID0+IGZpbGVuYW1lLmNvbnRhaW5zKHBocmFzZSkpXG5cdFx0cmV0dXJuIGhhc19leGNsdWRlZF9maWxlbmFtZVxuXHR9XG5cblx0aXNFeHBhbmRlZChwYXRoOiBzdHJpbmcpIHtcblx0XHRpZiAoIXRoaXMuZ2V0KFwiZG9fcmVtZW1iZXJfZXhwYW5kZWRcIikpIHJldHVybiB0cnVlXG5cdFx0bGV0IGN1cnJlbnRfc2V0dGluZ3MgPSB0aGlzLmdldChcImZpbGVfZGVzY2VuZGFudHNfZXhwYW5kZWRcIilcblx0XHRpZiAoT2JqZWN0LmtleXMoY3VycmVudF9zZXR0aW5ncykuY29udGFpbnMocGF0aCkpIHtcblx0XHRcdHJldHVybiBjdXJyZW50X3NldHRpbmdzW3BhdGhdXG5cdFx0fVxuXHRcdGxldCBuZXdfc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKGN1cnJlbnRfc2V0dGluZ3MsIHsgcGF0aDogdHJ1ZSB9KVxuXHRcdHRoaXMuc2V0KHsgXCJmaWxlX2Rlc2NlbmRhbnRzX2V4cGFuZGVkXCI6IG5ld19zZXR0aW5ncyB9KVxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdHNldEV4cGFuZGVkKHBhdGg6IHN0cmluZywgZXhwYW5kZWQ6IGJvb2xlYW4pIHtcblx0XHRpZiAoIXRoaXMuZ2V0KFwiZG9fcmVtZW1iZXJfZXhwYW5kZWRcIikpIHJldHVyblxuXG5cdFx0bGV0IG5ld192YWwgPSB7fVxuXHRcdG5ld192YWxbcGF0aF0gPSBleHBhbmRlZFxuXG5cblx0XHRsZXQgbmV3X3NldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXQoXCJmaWxlX2Rlc2NlbmRhbnRzX2V4cGFuZGVkXCIpLCBuZXdfdmFsKVxuXHRcdHRoaXMuc2V0KHsgXCJmaWxlX2Rlc2NlbmRhbnRzX2V4cGFuZGVkXCI6IG5ld19zZXR0aW5ncyB9KVxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cblxufVxuXG5cbmV4cG9ydCBjbGFzcyBNT0NTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTU9DUGx1Z2luO1xuXHRfYXBwOiBTZXR0aW5ncztcblx0ZGI6IERCTWFuYWdlclxuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogTU9DUGx1Z2luKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLmRiID0gcGx1Z2luLmRiXG5cdFx0dGhpcy5fYXBwID0gdW5kZWZpbmVkXG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9hcHApIHtcblx0XHRcdHRoaXMuX2FwcC4kZGVzdHJveSgpXG5cdFx0XHR0aGlzLl9hcHAgPSB1bmRlZmluZWRcblxuXHRcdH1cblx0XHR0aGlzLl9hcHAgPSBuZXcgU2V0dGluZ3Moe1xuXHRcdFx0dGFyZ2V0OiAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsLFxuXHRcdFx0cHJvcHM6IHsgYXBwOiB0aGlzLmFwcCwgcGx1Z2luOiB0aGlzLnBsdWdpbiB9LFxuXHRcdH0pXG5cdH1cblxuXHRoaWRlKCk6IHZvaWQge1xuXHRcdHRoaXMucGx1Z2luLmRiLnVwZGF0ZSgpXG5cdH1cblxufVxuIiwiaW1wb3J0IHsgQXBwLCBnZXRMaW5rcGF0aCwgTGlua0NhY2hlLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1PQ19WSUVXX1RZUEUgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IERCTWFuYWdlciB9IGZyb20gJy4vZGInXG5pbXBvcnQgTU9DVmlldyBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgTU9DU2V0dGluZ1RhYiwgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBMb2cgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTU9DUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0ZGI6IERCTWFuYWdlcjtcblx0dmlldzogTU9DVmlldztcblx0c2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlclxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gbmV3IFNldHRpbmdzTWFuYWdlcih0aGlzKVxuXHRcdGF3YWl0IHRoaXMuc2V0dGluZ3MubG9hZFNldHRpbmdzKClcblx0XHR0aGlzLmRiID0gbmV3IERCTWFuYWdlcih0aGlzKVxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KE1PQ19WSUVXX1RZUEUsIChsZWFmKSA9PiAodGhpcy52aWV3ID0gbmV3IE1PQ1ZpZXcobGVhZiwgdGhpcykpKVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHRoaXMuaW5pdGlhbGl6ZVBsdWdpbigpKVxuXHR9XG5cblx0YXN5bmMgaW5pdGlhbGl6ZVBsdWdpbigpIHtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1PQ1NldHRpbmdUYWIodGhpcykpO1xuXHRcdHRoaXMuaW5pdExlYWYoKVxuXHRcdHRoaXMuZGIudXBkYXRlKHRydWUpXG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3N5bmMnLCAnVXBkYXRlIE1hcCBvZiBDb250ZW50JywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5kYi51cGRhdGUoKVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAncmVidWlsZC1tYXAtb2YtY29udGVudCcsXG5cdFx0XHRuYW1lOiAnVXBkYXRlIE1hcCBvZiBDb250ZW50Jyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZGIudXBkYXRlKClcblxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLWFzLWNlbnRyYWwtbm90ZScsXG5cdFx0XHRuYW1lOiAnU2V0IGN1cnJlbnQgbm90ZSBhcyBDZW50cmFsIE5vdGUnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bGV0IGVycm9ycyA9IFtdXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSBhIGZpbGUgaXMgb3BlbmVkXG5cdFx0XHRcdGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09IG51bGwpIHtcblx0XHRcdFx0XHRlcnJvcnMucHVzaChcIk5vIGZpbGUgaGFzIGJlZW4gb3BlbmVkXCIpXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5pc0V4bHVkZWRGaWxlKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpKSB7XG5cdFx0XHRcdFx0ZXJyb3JzLnB1c2goXCJUaGlzIGZpbGUgaGFzIGJlZW4gZXhjbHVkZWQgZnJvbSB0aGUgTWFwIG9mIENvbnRlbnQuXCIpXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVycm9ycy5sZW5ndGgpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGVycm9yc1swXSlcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnNldCh7IENOX3BhdGg6IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkucGF0aCB9KTtcblx0XHRcdFx0dGhpcy5kYi51cGRhdGUoKVxuXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRpbml0TGVhZigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShNT0NfVklFV19UWVBFKS5sZW5ndGgpIHtcblx0XHRcdExvZyhcIlZpZXcgYWxyZWFkeSBhdHRhY2hlZFwiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHRcdHR5cGU6IE1PQ19WSUVXX1RZUEUsXG5cdFx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHRyZXJlbmRlcigpIHtcblx0XHRMb2coXCJyZXJlbmRlciBvbiBwbHVnaW4gY2FsbGVkXCIpXG5cdFx0aWYgKHRoaXMudmlldykge1xuXHRcdFx0dGhpcy52aWV3LnJlcmVuZGVyKClcblx0XHR9XG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHRMb2coJ1VubG9hZGluZyBwbHVnaW4nKTtcblxuXHRcdGlmICh0aGlzLnZpZXcpIHtcblx0XHRcdHRoaXMudmlldy5vbkNsb3NlKClcblx0XHR9XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShNT0NfVklFV19UWVBFKVxuXHR9XG5cblxuXG5cdENOZXhpc3RzKCk6IGJvb2xlYW4ge1xuXHRcdGxldCBleGlzdHMgPSAhKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIikpID09IG51bGwpXG5cdFx0TG9nKGV4aXN0cyA/IFwiQ04gZXhpc3RzXCIgOiBcIkNOIGRvZXMgbm90IGV4aXN0XCIpXG5cdFx0cmV0dXJuIGV4aXN0c1xuXHR9XG5cblxuXHRyZWdpc3RlclZpZXdJbnN0YW5jZSh2aWV3OiBNT0NWaWV3KSB7XG5cdFx0TG9nKFwiVmlldyByZWdpc3RlcmVkXCIpXG5cdFx0dGhpcy52aWV3ID0gdmlld1xuXHR9XG5cdHVucmVnaXN0ZXJWaWV3SW5zdGFuY2UodmlldzogTU9DVmlldykge1xuXHRcdHRoaXMudmlldyA9IHVuZGVmaW5lZFxuXHR9XG5cblxufVxuXG4iXSwibmFtZXMiOlsiTm90aWNlIiwiSXRlbVZpZXciLCJQbHVnaW5TZXR0aW5nVGFiIiwiUGx1Z2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFTyxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUE7QUFDeEIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFBO0FBQzFCLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQTtBQUN4QixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUE7QUFDM0IsTUFBTSxhQUFhLEdBQUcsZ0JBQWdCOztNQ0xoQyxRQUFRO0lBT2pCLFlBQ0ksSUFBWSxFQUNaLFNBQWlCLEVBQ2pCLFFBQWtCLEVBQ2xCLFdBQXFCLEVBQ3JCLGdCQUF3QjtRQUd4QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQTtRQUMxQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQTtRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7S0FDM0M7OztBQ2pCRSxNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQWU7QUFLbkMsQ0FBQyxDQUFBO0FBRU0sTUFBTSxlQUFlLEdBQUcsQ0FBQyxJQUFZLEVBQUUsWUFBb0IsS0FBSztJQUNuRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtLQUMxQztJQUNELE9BQU8sSUFBSSxDQUFBO0FBQ2YsQ0FBQyxDQUFBO0FBRUQ7QUFDTyxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQWE7SUFDdkMsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFBO0FBRW5GLENBQUMsQ0FBQTtBQUVEO0FBQ08sTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLElBQVk7SUFDekMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0FBQ2pDLENBQUMsQ0FBQTtBQUVEO0FBQ08sTUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUFZLEVBQUUsRUFBYTtJQUN0RCxJQUFJLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN0QyxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUE7SUFFdkIsSUFBSSxFQUFFLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1FBQ3pDLFlBQVksR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7S0FDdkM7U0FBTTtRQUNILFlBQVksR0FBRyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUE7S0FDNUM7SUFDRCxPQUFPLFlBQVksQ0FBQTtBQUN2QixDQUFDLENBQUE7QUFHTSxNQUFNLGNBQWMsR0FBRyxPQUMxQixHQUFRLEVBQ1IsSUFBWSxFQUNaLEtBQWlCO0lBR2pCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRTdELElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTztJQUNMLGFBQWEsQ0FBQyxLQUFLLENBQUM7VUFDM0IsR0FBRyxDQUFDLFNBQVMsQ0FBQyxlQUFlLEVBQUU7VUFDL0IsR0FBRyxDQUFDLFNBQVMsQ0FBQyxlQUFlLEdBQUc7SUFDdEMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFBO0FBQ3pDLENBQUMsQ0FBQztBQUVGO0FBQ08sTUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFRO0lBQ2xDLElBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUE7SUFDdEMsSUFBSSxnQkFBZ0IsR0FBRyxFQUFFLENBQUE7SUFDekIsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7O1FBRXJCLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBOztRQUUzRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDL0QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1NBQ3JDO0tBQ0osQ0FBQyxDQUFBOztJQUdGLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7UUFDMUIsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNuQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDL0MsSUFBSSxZQUFZLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQTtZQUM1RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUMxQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7YUFDdEM7U0FDSjtLQUlKLENBQUMsQ0FBQTtJQUdGLE9BQU8sZ0JBQWdCLENBQUE7QUFDM0IsQ0FBQzs7TUM5RVksU0FBUztJQWdCbEIsWUFBWSxNQUFpQjtRQUo3QixzQkFBaUIsR0FBWSxJQUFJLENBQUE7UUFLN0IsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQTtRQUMvQixJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQTtRQUNuQixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQTtRQUNaLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7S0FDNUM7SUFFRCxJQUFJO0tBRUg7SUFFRCxNQUFNLE1BQU0sQ0FBQyxTQUFrQixLQUFLO1FBQ2hDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUE7UUFDOUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQTtRQUU3QixJQUFJO1lBQ0EsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUN4QixJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUE7Z0JBQzNCLElBQUksQ0FBQyxNQUFNLEVBQUU7b0JBQ1QsSUFBSUEsZUFBTSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7aUJBQ2hEO2dCQUNELEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO2dCQUNyQyxNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ3hDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtnQkFDZixNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBRXhDLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFBO2dCQUN0QixJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQTtnQkFFN0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO2dCQUN6QixJQUFJLFdBQVcsR0FBUyxFQUFFLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUE7Z0JBQzNILE1BQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFFeEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQTtnQkFDN0IsTUFBTSxJQUFJLE9BQU8sQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUV4QyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtnQkFFeEIsSUFBSSxDQUFDLE1BQU0sRUFBRTtvQkFDVCxJQUFJQSxlQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtpQkFFaEM7Z0JBQ0QsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFBO2dCQUN6QixHQUFHLENBQUMsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLENBQUMsUUFBUSxHQUFHLFVBQVUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFBO2dCQUV0RSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFBO2FBQ2hDO1NBRUo7Z0JBQVM7WUFDTixJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFBO1lBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUE7U0FDekI7S0FHSjtJQUVELGVBQWUsQ0FBQyxJQUFZO1FBQ3hCLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakIsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFBO1NBQ3ZCO0tBRUo7O0lBR0QsU0FBUyxDQUFDLElBQVk7UUFDbEIsSUFBSSxjQUFjLEdBQVcsRUFBRSxDQUFBO1FBQy9CLElBQUksbUJBQW1CLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUN4RCxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQU87WUFDM0IsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDOUIsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtvQkFDOUIsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtpQkFFekI7cUJBQU07b0JBQ0gsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO29CQUMzQyxJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUE7b0JBQzdDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFOzt3QkFFaEUsY0FBYyxDQUFDLElBQUksQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUE7d0JBQ25HLG1CQUFtQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUE7cUJBQ3ZEO2lCQUNKO2FBR0o7U0FDSixDQUFDLENBQUE7UUFFRixPQUFPLGNBQWMsQ0FBQTtLQUV4QjtJQUVELFNBQVM7UUFDTCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUE7S0FDdEQ7SUFFRCxRQUFROztRQUlKLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFOztRQUVuRCxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUMzQyxHQUFHLENBQUMsa0NBQWtDLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO1FBR3BFLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJO1lBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFPcEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDOUU7U0FFSixDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFFbkMsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksR0FBRyxFQUFtQixDQUFDO1FBRXhELElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJO1lBQzFCLElBQUksU0FBUyxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQU8zQyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQzNDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFBO2FBQ2xEO2lCQUFNO2dCQUNILElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFBO2FBQ25EO1NBR0osQ0FBQyxDQUFBOztRQUdGLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFJekMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWM7WUFDcEMsSUFBSSxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksRUFBRTs7Z0JBRXhCLE9BQU07YUFDVDs7WUFHRCxJQUFJLGFBQWEsR0FBYSxFQUFFLENBQUE7WUFDaEMsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUE7WUFFaEUsSUFBSSxTQUFTLEVBQUU7Z0JBQ1gsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQWM7O29CQUU3QixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFBOztvQkFFMUUsSUFBSSxTQUFTLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQy9GLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUVyQztpQkFFSixDQUFDLENBQUE7YUFDTDtZQUVELElBQUksYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFBO1lBQ3JFLElBQUksYUFBYSxFQUFFO2dCQUNmLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFlOztvQkFFbEMsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQTtvQkFDMUUsSUFBSSxTQUFTLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQy9GLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUVyQztpQkFDSixDQUFDLENBQUE7YUFDTDtZQUNELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTTtnQkFBRSxPQUFNOztZQUdqQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEdBQUcsYUFBYSxDQUFBOztZQUczQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBWTtnQkFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ2hELElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7aUJBQzVDO2FBQ0osQ0FBQyxDQUFBO1NBQ0wsQ0FBQyxDQUFBO0tBQ0w7O0lBR0Qsc0JBQXNCO1FBQ2xCLEdBQUcsQ0FBQyxpREFBaUQsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFBO1FBQ3JGLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQTtRQUNiLElBQUksYUFBYSxHQUFhLEVBQUUsQ0FBQTtRQUNoQyxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUE7O1FBRXRCLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQTtRQUMxQyxPQUFPLFdBQVcsRUFBRTtZQUNoQixJQUFJLFVBQVUsR0FBYSxFQUFFLENBQUE7WUFDN0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVk7O2dCQUV2QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNyQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVk7b0JBQy9CLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTt3QkFDN0QsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtxQkFDeEI7aUJBQ0osQ0FBQyxDQUFBO2dCQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBWTtvQkFDbEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO3dCQUM3RCxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUN4QjtpQkFDSixDQUFDLENBQUE7O2dCQUVGLElBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxFQUFFO29CQUNoRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFBO2lCQUNoQztnQkFDRCxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQzNCLENBQUMsQ0FBQTtZQUNGLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUE7WUFDMUIsSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDbkIsV0FBVyxHQUFHLEtBQUssQ0FBQTthQUN0QjtZQUNELEtBQUssSUFBSSxDQUFDLENBQUE7U0FFYjtLQUVKOzs7OztJQU1ELFdBQVcsQ0FBQyxXQUFpQjs7UUFFekIsSUFBSSxDQUFDLGFBQWEsSUFBSSxDQUFDLENBQUE7UUFDdkIsSUFBSSxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssSUFBSSxDQUFDLEVBQUU7WUFDakMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQTtTQUNyRDtRQUVELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO1FBQ2xELElBQUksV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUE7UUFDekMsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQTtRQUU3QixJQUFJLG1CQUFtQixHQUFXLEVBQUUsQ0FBQTtRQUNwQyxJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3pDLElBQUksZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUUvQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBWTs7WUFFL0IsSUFBSSxzQkFBc0IsR0FBRyxTQUFTLENBQUE7WUFDdEMsSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7O2dCQUVqQyxJQUFJLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM5QyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxzQkFBc0IsR0FBRyxXQUFXLENBQUE7YUFFdkM7WUFDRCxJQUFJLFFBQVEsR0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUNySCxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7U0FDckMsQ0FBQyxDQUFBO1FBRUYsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBWTtZQUNsQyxJQUFJLFFBQVEsR0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7WUFDMUcsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1NBQ3JDLENBQUMsQ0FBQTtRQUNGLElBQUksYUFBYSxHQUFZLEtBQUssQ0FBQTs7UUFJbEMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBVTs7WUFFbkMsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUNwRCxJQUFJLGNBQWMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQzVDLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLENBQUE7O1lBR3BELElBQUksZ0JBQWdCLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFO2dCQUMzQyxPQUFNO2FBQ1Q7O1lBR0QsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLEVBQUU7Z0JBQzVELE9BQU07YUFDVDtZQUVELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDdEIsYUFBYSxHQUFHLElBQUksQ0FBQTtTQUN2QixDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsYUFBYSxFQUFFOztZQUVoQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtTQUNuQztLQUVKOztJQUdELGlCQUFpQjs7UUFHYixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUE7UUFHNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFPO1lBRTNCLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBaUIsRUFBRSxLQUFhOztnQkFHbkQsSUFBSSxFQUFFLEtBQUssSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRTs7b0JBRXRDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRTt3QkFDbEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFBO3FCQUN0QztvQkFNRCxJQUFJLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFBOztvQkFFL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO3dCQUM3RCxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQTtxQkFDNUY7aUJBQ0o7YUFFSixDQUVBLENBQUE7U0FDSixDQUFDLENBQUE7S0FFTDtJQUNELGdCQUFnQixDQUFDLElBQVksRUFBRSxrQkFBMkIsS0FBSztRQUMzRCxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFBO1FBQzNELElBQUksU0FBUyxHQUFhLEVBQUUsQ0FBQTtRQUM1QixJQUFJLFNBQVMsRUFBRTtZQUNYLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFjOztnQkFFN0IsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQTs7Z0JBRTFFLElBQUksU0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUU7b0JBQ2pILFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO2lCQUVqQzthQUVKLENBQUMsQ0FBQTtTQUNMO1FBQ0QsT0FBTyxTQUFTLENBQUE7S0FDbkI7OztBQ3pYTCxTQUFTLElBQUksR0FBRyxHQUFHO0FBV25CLFNBQVMsWUFBWSxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDekQsSUFBSSxPQUFPLENBQUMsYUFBYSxHQUFHO0FBQzVCLFFBQVEsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ3pDLEtBQUssQ0FBQztBQUNOLENBQUM7QUFDRCxTQUFTLEdBQUcsQ0FBQyxFQUFFLEVBQUU7QUFDakIsSUFBSSxPQUFPLEVBQUUsRUFBRSxDQUFDO0FBQ2hCLENBQUM7QUFDRCxTQUFTLFlBQVksR0FBRztBQUN4QixJQUFJLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixDQUFDO0FBQ0QsU0FBUyxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQ3RCLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQixDQUFDO0FBQ0QsU0FBUyxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQzVCLElBQUksT0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLENBQUM7QUFDdkMsQ0FBQztBQUNELFNBQVMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDOUIsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsS0FBSyxPQUFPLENBQUMsS0FBSyxVQUFVLENBQUMsQ0FBQztBQUNsRyxDQUFDO0FBWUQsU0FBUyxRQUFRLENBQUMsR0FBRyxFQUFFO0FBQ3ZCLElBQUksT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7QUFDekMsQ0FBQztBQXNHRCxTQUFTLGFBQWEsQ0FBQyxLQUFLLEVBQUU7QUFDOUIsSUFBSSxPQUFPLEtBQUssSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQztBQUN0QyxDQUFDO0FBK0pELFNBQVMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdCLENBQUM7QUFDRCxTQUFTLGFBQWEsQ0FBQyxNQUFNLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRTtBQUN2RCxJQUFJLE1BQU0sZ0JBQWdCLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEQsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxFQUFFO0FBQzFELFFBQVEsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZDLFFBQVEsS0FBSyxDQUFDLEVBQUUsR0FBRyxjQUFjLENBQUM7QUFDbEMsUUFBUSxLQUFLLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztBQUNuQyxRQUFRLGlCQUFpQixDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ25ELEtBQUs7QUFDTCxDQUFDO0FBQ0QsU0FBUyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUU7QUFDbEMsSUFBSSxJQUFJLENBQUMsSUFBSTtBQUNiLFFBQVEsT0FBTyxRQUFRLENBQUM7QUFDeEIsSUFBSSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO0FBQzVFLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ25CLFFBQVEsT0FBTyxJQUFJLENBQUM7QUFDcEIsS0FBSztBQUNMLElBQUksT0FBTyxRQUFRLENBQUM7QUFDcEIsQ0FBQztBQU1ELFNBQVMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUN4QyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBeUJELFNBQVMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFO0FBQ3RDLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQzlDLENBQUM7QUFTRCxTQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDdEIsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBQ0QsU0FBUyxZQUFZLENBQUMsVUFBVSxFQUFFLFNBQVMsRUFBRTtBQUM3QyxJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDbkQsUUFBUSxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDekIsWUFBWSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3ZDLEtBQUs7QUFDTCxDQUFDO0FBQ0QsU0FBUyxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLElBQUksT0FBTyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3hDLENBQUM7QUFnQkQsU0FBUyxXQUFXLENBQUMsSUFBSSxFQUFFO0FBQzNCLElBQUksT0FBTyxRQUFRLENBQUMsZUFBZSxDQUFDLDRCQUE0QixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3hFLENBQUM7QUFDRCxTQUFTLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDcEIsSUFBSSxPQUFPLFFBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekMsQ0FBQztBQUNELFNBQVMsS0FBSyxHQUFHO0FBQ2pCLElBQUksT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDckIsQ0FBQztBQUNELFNBQVMsS0FBSyxHQUFHO0FBQ2pCLElBQUksT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEIsQ0FBQztBQUNELFNBQVMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUMvQyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ25ELElBQUksT0FBTyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ25FLENBQUM7QUE2QkQsU0FBUyxJQUFJLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUU7QUFDdEMsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJO0FBQ3JCLFFBQVEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN4QyxTQUFTLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxLQUFLO0FBQ25ELFFBQVEsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUMsQ0FBQztBQTJERCxTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUU7QUFDM0IsSUFBSSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzFDLENBQUM7QUFzSEQsU0FBUyxlQUFlLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUN2QyxJQUFJLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxJQUFJLElBQUksR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDO0FBQzdDLENBQUM7QUFTRCxTQUFTLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7QUFDaEQsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsR0FBRyxXQUFXLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDckUsQ0FBQztBQTRFRCxTQUFTLFlBQVksQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUM3QyxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2RCxDQUFDO0FBQ0QsU0FBUyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLEdBQUcsS0FBSyxFQUFFO0FBQ3JELElBQUksTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNsRCxJQUFJLENBQUMsQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDcEQsSUFBSSxPQUFPLENBQUMsQ0FBQztBQUNiLENBQUM7QUF5TUQ7QUFDQSxJQUFJLGlCQUFpQixDQUFDO0FBQ3RCLFNBQVMscUJBQXFCLENBQUMsU0FBUyxFQUFFO0FBQzFDLElBQUksaUJBQWlCLEdBQUcsU0FBUyxDQUFDO0FBQ2xDLENBQUM7QUFDRCxTQUFTLHFCQUFxQixHQUFHO0FBQ2pDLElBQUksSUFBSSxDQUFDLGlCQUFpQjtBQUMxQixRQUFRLE1BQU0sSUFBSSxLQUFLLENBQUMsa0RBQWtELENBQUMsQ0FBQztBQUM1RSxJQUFJLE9BQU8saUJBQWlCLENBQUM7QUFDN0IsQ0FBQztBQUlELFNBQVMsT0FBTyxDQUFDLEVBQUUsRUFBRTtBQUNyQixJQUFJLHFCQUFxQixFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakQsQ0FBQztBQTJDRDtBQUNBLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBRTVCLE1BQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDO0FBQzdCLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBQzVCLE1BQU0sZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUMzQixNQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMzQyxJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUM3QixTQUFTLGVBQWUsR0FBRztBQUMzQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtBQUMzQixRQUFRLGdCQUFnQixHQUFHLElBQUksQ0FBQztBQUNoQyxRQUFRLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxLQUFLO0FBQ0wsQ0FBQztBQUtELFNBQVMsbUJBQW1CLENBQUMsRUFBRSxFQUFFO0FBQ2pDLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzlCLENBQUM7QUFJRCxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDckIsTUFBTSxjQUFjLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNqQyxTQUFTLEtBQUssR0FBRztBQUNqQixJQUFJLElBQUksUUFBUTtBQUNoQixRQUFRLE9BQU87QUFDZixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDcEIsSUFBSSxHQUFHO0FBQ1A7QUFDQTtBQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQzdELFlBQVksTUFBTSxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEQsWUFBWSxxQkFBcUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM3QyxZQUFZLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakMsU0FBUztBQUNULFFBQVEscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDcEMsUUFBUSxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3BDLFFBQVEsT0FBTyxpQkFBaUIsQ0FBQyxNQUFNO0FBQ3ZDLFlBQVksaUJBQWlCLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUM3RCxZQUFZLE1BQU0sUUFBUSxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pELFlBQVksSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDL0M7QUFDQSxnQkFBZ0IsY0FBYyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM3QyxnQkFBZ0IsUUFBUSxFQUFFLENBQUM7QUFDM0IsYUFBYTtBQUNiLFNBQVM7QUFDVCxRQUFRLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDcEMsS0FBSyxRQUFRLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtBQUN0QyxJQUFJLE9BQU8sZUFBZSxDQUFDLE1BQU0sRUFBRTtBQUNuQyxRQUFRLGVBQWUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQ2hDLEtBQUs7QUFDTCxJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUM3QixJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDckIsSUFBSSxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDM0IsQ0FBQztBQUNELFNBQVMsTUFBTSxDQUFDLEVBQUUsRUFBRTtBQUNwQixJQUFJLElBQUksRUFBRSxDQUFDLFFBQVEsS0FBSyxJQUFJLEVBQUU7QUFDOUIsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDcEIsUUFBUSxPQUFPLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ2xDLFFBQVEsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUMvQixRQUFRLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLFFBQVEsRUFBRSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3BELFFBQVEsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNyRCxLQUFLO0FBQ0wsQ0FBQztBQWVELE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDM0IsSUFBSSxNQUFNLENBQUM7QUFDWCxTQUFTLFlBQVksR0FBRztBQUN4QixJQUFJLE1BQU0sR0FBRztBQUNiLFFBQVEsQ0FBQyxFQUFFLENBQUM7QUFDWixRQUFRLENBQUMsRUFBRSxFQUFFO0FBQ2IsUUFBUSxDQUFDLEVBQUUsTUFBTTtBQUNqQixLQUFLLENBQUM7QUFDTixDQUFDO0FBQ0QsU0FBUyxZQUFZLEdBQUc7QUFDeEIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRTtBQUNuQixRQUFRLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsS0FBSztBQUNMLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDdEIsQ0FBQztBQUNELFNBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDckMsSUFBSSxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFO0FBQzFCLFFBQVEsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMvQixRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkIsS0FBSztBQUNMLENBQUM7QUFDRCxTQUFTLGNBQWMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFDeEQsSUFBSSxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFO0FBQzFCLFFBQVEsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUMvQixZQUFZLE9BQU87QUFDbkIsUUFBUSxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzVCLFFBQVEsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTTtBQUM1QixZQUFZLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkMsWUFBWSxJQUFJLFFBQVEsRUFBRTtBQUMxQixnQkFBZ0IsSUFBSSxNQUFNO0FBQzFCLG9CQUFvQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CLGdCQUFnQixRQUFRLEVBQUUsQ0FBQztBQUMzQixhQUFhO0FBQ2IsU0FBUyxDQUFDLENBQUM7QUFDWCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkIsS0FBSztBQUNMLENBQUM7QUFvVEQ7QUFDQSxNQUFNLE9BQU8sSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXO0FBQzlDLE1BQU0sTUFBTTtBQUNaLE1BQU0sT0FBTyxVQUFVLEtBQUssV0FBVztBQUN2QyxVQUFVLFVBQVU7QUFDcEIsVUFBVSxNQUFNLENBQUMsQ0FBQztBQXVTbEIsU0FBUyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUU7QUFDakMsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBQ3ZCLENBQUM7QUFJRCxTQUFTLGVBQWUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUU7QUFDbkUsSUFBSSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQztBQUMxRSxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMzQyxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDeEI7QUFDQSxRQUFRLG1CQUFtQixDQUFDLE1BQU07QUFDbEMsWUFBWSxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN6RSxZQUFZLElBQUksVUFBVSxFQUFFO0FBQzVCLGdCQUFnQixVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUM7QUFDbkQsYUFBYTtBQUNiLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUN4QyxhQUFhO0FBQ2IsWUFBWSxTQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDdkMsU0FBUyxDQUFDLENBQUM7QUFDWCxLQUFLO0FBQ0wsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDOUMsQ0FBQztBQUNELFNBQVMsaUJBQWlCLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRTtBQUNqRCxJQUFJLE1BQU0sRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUM7QUFDNUIsSUFBSSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEtBQUssSUFBSSxFQUFFO0FBQzlCLFFBQVEsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvQixRQUFRLEVBQUUsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDaEQ7QUFDQTtBQUNBLFFBQVEsRUFBRSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztBQUMzQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLEtBQUs7QUFDTCxDQUFDO0FBQ0QsU0FBUyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRTtBQUNsQyxJQUFJLElBQUksU0FBUyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7QUFDdEMsUUFBUSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDekMsUUFBUSxlQUFlLEVBQUUsQ0FBQztBQUMxQixRQUFRLFNBQVMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxLQUFLO0FBQ0wsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFDRCxTQUFTLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUM1RyxJQUFJLE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUM7QUFDL0MsSUFBSSxxQkFBcUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxJQUFJLE1BQU0sRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFFLEdBQUc7QUFDOUIsUUFBUSxRQUFRLEVBQUUsSUFBSTtBQUN0QixRQUFRLEdBQUcsRUFBRSxJQUFJO0FBQ2pCO0FBQ0EsUUFBUSxLQUFLO0FBQ2IsUUFBUSxNQUFNLEVBQUUsSUFBSTtBQUNwQixRQUFRLFNBQVM7QUFDakIsUUFBUSxLQUFLLEVBQUUsWUFBWSxFQUFFO0FBQzdCO0FBQ0EsUUFBUSxRQUFRLEVBQUUsRUFBRTtBQUNwQixRQUFRLFVBQVUsRUFBRSxFQUFFO0FBQ3RCLFFBQVEsYUFBYSxFQUFFLEVBQUU7QUFDekIsUUFBUSxhQUFhLEVBQUUsRUFBRTtBQUN6QixRQUFRLFlBQVksRUFBRSxFQUFFO0FBQ3hCLFFBQVEsT0FBTyxFQUFFLElBQUksR0FBRyxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDaEc7QUFDQSxRQUFRLFNBQVMsRUFBRSxZQUFZLEVBQUU7QUFDakMsUUFBUSxLQUFLO0FBQ2IsUUFBUSxVQUFVLEVBQUUsS0FBSztBQUN6QixRQUFRLElBQUksRUFBRSxPQUFPLENBQUMsTUFBTSxJQUFJLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxJQUFJO0FBQ3hELEtBQUssQ0FBQztBQUNOLElBQUksYUFBYSxJQUFJLGFBQWEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDNUMsSUFBSSxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDdEIsSUFBSSxFQUFFLENBQUMsR0FBRyxHQUFHLFFBQVE7QUFDckIsVUFBVSxRQUFRLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxLQUFLLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksS0FBSztBQUN4RSxZQUFZLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUN0RCxZQUFZLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFO0FBQ25FLGdCQUFnQixJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNqRCxvQkFBb0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN2QyxnQkFBZ0IsSUFBSSxLQUFLO0FBQ3pCLG9CQUFvQixVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzdDLGFBQWE7QUFDYixZQUFZLE9BQU8sR0FBRyxDQUFDO0FBQ3ZCLFNBQVMsQ0FBQztBQUNWLFVBQVUsRUFBRSxDQUFDO0FBQ2IsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDaEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM5QjtBQUNBLElBQUksRUFBRSxDQUFDLFFBQVEsR0FBRyxlQUFlLEdBQUcsZUFBZSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDcEUsSUFBSSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDeEIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFFN0IsWUFBWSxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ25EO0FBQ0EsWUFBWSxFQUFFLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hELFlBQVksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxTQUFTO0FBQ1QsYUFBYTtBQUNiO0FBQ0EsWUFBWSxFQUFFLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDM0MsU0FBUztBQUNULFFBQVEsSUFBSSxPQUFPLENBQUMsS0FBSztBQUN6QixZQUFZLGFBQWEsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pELFFBQVEsZUFBZSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBRTFGLFFBQVEsS0FBSyxFQUFFLENBQUM7QUFDaEIsS0FBSztBQUNMLElBQUkscUJBQXFCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM1QyxDQUFDO0FBOENEO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZUFBZSxDQUFDO0FBQ3RCLElBQUksUUFBUSxHQUFHO0FBQ2YsUUFBUSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztBQUM3QixLQUFLO0FBQ0wsSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRTtBQUN4QixRQUFRLE1BQU0sU0FBUyxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEYsUUFBUSxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDLFFBQVEsT0FBTyxNQUFNO0FBQ3JCLFlBQVksTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN0RCxZQUFZLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQztBQUM1QixnQkFBZ0IsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0MsU0FBUyxDQUFDO0FBQ1YsS0FBSztBQUNMLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNsQixRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUM5QyxZQUFZLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN0QyxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDaEMsWUFBWSxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7QUFDdkMsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQSxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFO0FBQ3BDLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNuRyxDQUFDO0FBQ0QsU0FBUyxVQUFVLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRTtBQUNsQyxJQUFJLFlBQVksQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3RELElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBS0QsU0FBUyxVQUFVLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDMUMsSUFBSSxZQUFZLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDOUQsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNqQyxDQUFDO0FBS0QsU0FBUyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQzFCLElBQUksWUFBWSxDQUFDLGlCQUFpQixFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5QyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBZ0JELFNBQVMsVUFBVSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxvQkFBb0IsRUFBRTtBQUM5RixJQUFJLE1BQU0sU0FBUyxHQUFHLE9BQU8sS0FBSyxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3ZHLElBQUksSUFBSSxtQkFBbUI7QUFDM0IsUUFBUSxTQUFTLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDekMsSUFBSSxJQUFJLG9CQUFvQjtBQUM1QixRQUFRLFNBQVMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMxQyxJQUFJLFlBQVksQ0FBQywyQkFBMkIsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7QUFDbkYsSUFBSSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDMUQsSUFBSSxPQUFPLE1BQU07QUFDakIsUUFBUSxZQUFZLENBQUMsOEJBQThCLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO0FBQzFGLFFBQVEsT0FBTyxFQUFFLENBQUM7QUFDbEIsS0FBSyxDQUFDO0FBQ04sQ0FBQztBQUNELFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFO0FBQzFDLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDakMsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJO0FBQ3JCLFFBQVEsWUFBWSxDQUFDLDBCQUEwQixFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7QUFDdEU7QUFDQSxRQUFRLFlBQVksQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUMxRSxDQUFDO0FBQ0QsU0FBUyxRQUFRLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUU7QUFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQzNCLElBQUksWUFBWSxDQUFDLHNCQUFzQixFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFLENBQUM7QUFLRCxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ2xDLElBQUksSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFDckIsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssSUFBSTtBQUMvQixRQUFRLE9BQU87QUFDZixJQUFJLFlBQVksQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMzRCxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLENBQUM7QUFDRCxTQUFTLHNCQUFzQixDQUFDLEdBQUcsRUFBRTtBQUNyQyxJQUFJLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxJQUFJLEVBQUUsR0FBRyxJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsSUFBSSxRQUFRLElBQUksR0FBRyxDQUFDLEVBQUU7QUFDekYsUUFBUSxJQUFJLEdBQUcsR0FBRyxnREFBZ0QsQ0FBQztBQUNuRSxRQUFRLElBQUksT0FBTyxNQUFNLEtBQUssVUFBVSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxJQUFJLEdBQUcsRUFBRTtBQUMzRSxZQUFZLEdBQUcsSUFBSSwrREFBK0QsQ0FBQztBQUNuRixTQUFTO0FBQ1QsUUFBUSxNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLEtBQUs7QUFDTCxDQUFDO0FBQ0QsU0FBUyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDMUMsSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDOUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQ3RDLFlBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsK0JBQStCLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakYsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTSxrQkFBa0IsU0FBUyxlQUFlLENBQUM7QUFDakQsSUFBSSxXQUFXLENBQUMsT0FBTyxFQUFFO0FBQ3pCLFFBQVEsSUFBSSxDQUFDLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDaEUsWUFBWSxNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDN0QsU0FBUztBQUNULFFBQVEsS0FBSyxFQUFFLENBQUM7QUFDaEIsS0FBSztBQUNMLElBQUksUUFBUSxHQUFHO0FBQ2YsUUFBUSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDekIsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU07QUFDOUIsWUFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLENBQUM7QUFDNUQsU0FBUyxDQUFDO0FBQ1YsS0FBSztBQUNMLElBQUksY0FBYyxHQUFHLEdBQUc7QUFDeEIsSUFBSSxhQUFhLEdBQUcsR0FBRztBQUN2Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0M1OERBLFVBc0RNO0dBcERGLFVBbUQ4RDtHQWpEbEUsVUE2Qkc7R0E1QkYsVUFFb0Q7R0FDcEQsVUFDOEY7R0FDOUYsVUFFa0Q7R0FDbEQsVUFFbUQ7R0FDbkQsVUFDNkY7R0FDN0YsVUFFa0Q7R0FDbEQsVUFFa0Q7R0FDbEQsVUFFOEM7R0FDOUMsVUFFMkQ7R0FDM0QsVUFFdUY7R0FFeEYsVUFHZ0U7R0FDaEUsVUFLNEU7R0FDNUUsVUFHK0Q7R0FDL0QsVUFLNkQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQ0NsRCxHQUFXLE9BQUksQ0FBQzs7Ozs7OzhCQXFDaEIsR0FBUSxJQUFDLE1BQU0sR0FBRyxDQUFDLGlCQUFJLEdBQVE7Ozs7Ozs7Ozs7Ozs7O3NEQXZDbEIsR0FBUzs7OztHQUEvQixVQW9ESTtHQW5ERixVQW9DRzs7O0dBQ0gsVUFhSTs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBWkcsR0FBUSxJQUFDLE1BQU0sR0FBRyxDQUFDLGlCQUFJLEdBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBMUNHLGdCQUU3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQkFtQ1csY0FBYyxlQUFDLEdBQVMsWUFBRSxHQUFFOzs7OzZCQTlCckIsR0FBUSxJQUFDLE1BQU0sR0FBRyxDQUFDOzs7Ozs7Ozs7c0NBeUJwQixHQUFTOzs7Ozs7R0FGbEIsVUFRQTs7Ozs7Ozs7O29CQS9CVSxHQUFRLElBQUMsTUFBTSxHQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7K0RBOEIxQixjQUFjLGVBQUMsR0FBUyxZQUFFLEdBQUU7Ozt1Q0FMdEIsR0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQTFCakIsY0FBYyxlQUFDLEdBQVMsWUFBRSxHQUFFOzs7Ozs7Ozs7Ozs2REFBNUIsY0FBYyxlQUFDLEdBQVMsWUFBRSxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQkFjbEIsR0FBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBWmpCLFVBcUJDO0dBVkUsVUFTSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FKRyxVQUVBO0dBREgsVUFBK0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQUpqQyxVQUVLO0dBREgsVUFBK0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0JBcUJsQyxHQUFROzs7O2dDQUFiLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQUFDLEdBQVE7Ozs7K0JBQWIsTUFBSTs7Ozs7Ozs7Ozs7Ozs7Ozt3QkFBSixNQUFJOzs7Ozs7Ozs7O2tDQUFKLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3lCQUlTLEdBQUs7aUNBQ0gsR0FBVyxNQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkVBRGpCLEdBQUs7b0ZBQ0gsR0FBVyxNQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0JBaERuQyxHQUFXLE9BQUksQ0FBQyxpQkFBSSxHQUFRLElBQUMsTUFBTSxJQUFJLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FUN0MsVUFPQTtHQU5FLFVBS1M7R0FETixVQUFvQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXhDNUIsU0FBaUI7T0FDakIsRUFBYTtPQUNiLFdBQW1CO09BQ25CLElBQVM7T0FDVCxHQUFRO09BQ1IsU0FBd0I7Q0FFbkMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxXQUFXOztLQUMzQixTQUFTLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFlBQVk7R0FDekQsV0FBQTtHQUNBLFlBQVk7O0tBRVosUUFBUTtLQUVSLFFBQVE7O0tBQ1IsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUztFQUM5QixRQUFRLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUs7OztVQUd2QyxhQUFhLENBQUMsY0FBc0I7TUFDeEMsV0FBVyxJQUFFLENBQUM7bUJBQ2YsUUFBUSxHQUFDLElBQUk7Y0FFTCxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsU0FBUzttQkFDakQsUUFBUSxHQUFHLEtBQUs7O21CQUVoQixRQUFRLEdBQVUsV0FBVyxHQUFHLGNBQWMsQ0FBUTs7OztDQUcxRCxhQUFhLENBQUMsU0FBUyxDQUFDLGtCQUFrQjtDQUUxQyxTQUFTLENBQUMsZ0NBQWdDLENBQUMsYUFBYTs7Ozs7Ozs7a0JBd0I1QyxRQUFRLElBQUksUUFBUTtFQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxTQUFTO0VBQ3JDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsUUFBUTs7TUFDaEQsUUFBUTtHQUNWLFNBQVMsQ0FBQyxjQUFjO0dBQ3hCLFNBQVMsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLENBQUM7Ozs7eUJBaUI5QixLQUFLO0VBQ2QsY0FBYyxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsS0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7YUM3RHNCLCtDQUc5RDs7Ozs7Ozs7O2FBWUksZ0JBQ0E7OzthQUdKLGtEQUNzQzs7O2FBQVcsbUZBRWpEOzs7Y0FBd0QsYUFDeEQ7OztjQUErQyx3QkFFL0M7OztjQUErRCxtQ0FHL0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkRBOUIwQixHQUFTOzs7Ozs7Ozs7O0dBRDNDLFVBd0NLO0dBdkNELFVBc0NLO0dBcENELFVBQThEOztHQUc5RCxVQVlJO0dBWEEsVUFJSTs7R0FDSixVQUFLOztHQUNMLFVBSUk7O0dBRUosVUFHSjs7R0FDc0MsVUFBTTtHQUFBLFVBQUs7O0dBRWpELFVBQXdEOztHQUN4RCxVQUErQzs7R0FFL0MsVUFBK0Q7O0dBRy9ELFVBQU07R0FBQSxVQUFLOztHQUNYLFVBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0FuRE8sR0FBUTtPQUNSLElBQVM7T0FDVCxNQUFpQjtLQUN4QixRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVE7O0tBRzFCLFNBQVMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBWTtHQUN2RCxXQUFBO0dBQ0EsWUFBWTs7Ozs7Ozs7O0VBdUNOLFFBQVEsQ0FBQyxHQUFHLEdBQUcscUJBQXFCLEVBQUUsS0FBSztFQUMzQyxJQUFJLENBQUMsUUFBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01DOUNoQixhQUFhO0lBQ3RCO1FBS0EsdUJBQWtCLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLG9CQUFlLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLHNCQUFpQixHQUFHLEtBQUssQ0FBQztLQUp6QjtJQU1ELE1BQU07UUFDRixJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUN4QixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztTQUNsQzthQUFNO1lBQ0gsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUN6RDtLQUNKO0lBRUQsUUFBUTtRQUNKLElBQUksSUFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsRUFBRTtZQUM3QixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3RELElBQUksQ0FBQyxrQkFBa0IsSUFBSSxDQUFDLENBQUM7U0FDaEM7S0FDSjtJQUVELG1CQUFtQixDQUFDLGNBQWM7UUFFOUIsS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ25DLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUN4QjtLQUNKO0lBQ0QsZ0NBQWdDLENBQUMsTUFBZ0I7UUFDN0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDckM7SUFFRCxTQUFTLENBQUMsTUFBYztRQUVwQixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDbEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQztTQUNwQztLQUNKO0lBQ0QsY0FBYztRQUNWLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7S0FDakM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDMkhjLEdBQUs7Ozs7Z0NBQVYsTUFBSTs7Ozs7Ozs7O3dCQTREYSxHQUFJLElBQUMsY0FBYztpQkFDakIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBUHRCLFVBQUs7O0dBQ0wsVUFTSTs7Ozs7OzJCQWhFRyxHQUFLOzs7OytCQUFWLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBQUosTUFBSTs7Ozs7b0VBNERhLEdBQUksSUFBQyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQXhFakMsY0FBYyxhQUFDLEdBQU8sYUFBRSxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7YUFOUiw0Q0FDbUI7OzthQU16QyxHQUFDOzs7YUFBWSx5RkFFZDs7O2FBS0Esc0RBQ3NDOzs7OztxQ0FaM0IsR0FBTzs7Ozs7Ozs7OztHQUZ3QixVQU16Qzs7O0dBQUMsVUFBTTtHQUFBLFVBQU07O0dBRWQsVUFLQTs7R0FDc0MsVUFBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFqQmhDLEdBQU0sSUFBQyxDQUFDOzs7Ozs7Ozs7R0FEbkIsVUFFSzs7OztxRUFETSxHQUFNLElBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7ZUFrQ0UsY0FBYyxjQUFDLEdBQVEsS0FBQyxDQUFDLFVBQUcsR0FBRTs7Ozs7Ozs7Ozs7Ozs7O3FEQUp4QixHQUFRLEtBQUMsQ0FBQzs7OztHQUZyQixVQU9BOzs7Ozs7Ozs7O3FEQURLLGNBQWMsY0FBQyxHQUFRLEtBQUMsQ0FBQyxVQUFHLEdBQUU7OzhFQUp4QixHQUFRLEtBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQUxoQixjQUFjLGNBQUMsR0FBUSxLQUFDLENBQUMsVUFBRyxHQUFFOzs7Ozs7OzsyREFEdEIsR0FBUSxLQUFDLENBQUM7Ozs7R0FBdkIsVUFFQTs7OztxREFESyxjQUFjLGNBQUMsR0FBUSxLQUFDLENBQUMsVUFBRyxHQUFFOztvRkFEdEIsR0FBUSxLQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQ3ZCLFVBUUs7R0FIRCxVQUVDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWpCTCxVQVFLO0dBSEQsVUFFQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FqQkwsVUFRSztHQUhELFVBRUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQXZCSixHQUFDLFFBQUksQ0FBQzs7Ozs7Ozs7bUJBZU4sR0FBUSxLQUFDLENBQUMsS0FBSyxXQUFXO21CQVVyQixHQUFRLEtBQUMsQ0FBQyxLQUFLLFNBQVM7bUJBVXhCLEdBQVEsS0FBQyxDQUFDLEtBQUssV0FBVzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZCQXBDakMsR0FBSSxLQUFDLE9BQU87Ozs7a0NBQWpCLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FEVixVQWlESzs7Ozs7OztHQUNMLFVBQUs7Ozs7NEJBakRNLEdBQUksS0FBQyxPQUFPOzs7O2lDQUFqQixNQUFJOzs7Ozs7Ozs7Ozs7Ozs7O3NDQUFKLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREExQmIsR0FBUSxLQUFDLEdBQUcsQ0FBQyx1QkFBdUI7O2lCQUUvQixHQUFNLElBQUMsTUFBTTtnQkFJYixHQUFLLElBQUMsTUFBTSxJQUFJLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NERBckhoQixHQUFTO0tBQUcsaUJBQWlCO0tBQUcsZUFBZTs7aURBRHJDLEdBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0NBUjNCLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFZO0tBQzlDLFdBQVU7S0FDVixZQUFZOzs7Ozs7OztHQUp0QixVQXFOSztHQS9NRCxVQWlHSztHQWhHRCxVQTZCSztHQWpCRCxVQU9NO0dBRkYsVUFDcWpCO0dBQ25qQixVQVNOO0dBSEssVUFFQzs7R0FHVixVQWdESztHQS9DRCxVQWFLO0dBTEQsVUFJSztHQUhELFVBRUM7O0dBR1QsVUFhSztHQUxELFVBSUs7R0FIRCxVQUVDOztHQUdULFVBa0JLO0dBVkQsVUFTSztHQUhELFVBRUM7O0dBSWIsVUFnQks7R0FQRCxVQU1BO0dBSEssVUFFQzs7O0dBSWQsVUE0R0s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0dBek1VLEdBQVM7S0FBRyxpQkFBaUI7S0FBRyxlQUFlOzs7OztrREFEckMsR0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXpCdkIsSUFBYTtPQUNiLEtBQTJCO09BQzNCLE1BQWdCO0tBQ3ZCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTTtLQUNwQixHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7S0FDaEIsRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFO0tBQ2QsT0FBTyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVM7S0FDdkMsU0FBUyxPQUFPLGFBQWE7S0FDN0IsYUFBYTtLQUNiLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUTtLQUMxQixRQUFRO0tBQ1IsNkJBQTZCLEdBQUcsS0FBSztLQUNyQyxTQUFTLEdBQUcsS0FBSzs7Ozs7Ozs7a0JBZ0JULElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLFNBQVM7a0JBQ2hDLFNBQVMsSUFBSSxTQUFTOztNQUNsQixJQUFJLENBQUMsU0FBUzs7OztFQTRCZCxFQUFFLENBQUMsTUFBTTs7OztFQWNULFNBQVMsQ0FBQyxRQUFROzs7O0VBY2xCLFNBQVMsQ0FBQyxNQUFNOzs7OztHQWdCYixhQUFhOzs7Ozs7a0JBS3BCLFFBQVEsQ0FBQyxTQUFTLEdBQUcsQ0FBQzs7O3lCQXdDWCxLQUFLLElBQUssY0FBYyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSzs7O0VBUW5ELEVBQUUsQ0FBQyxNQUFNOzs7b0NBaUJjLEtBQUssS0FDWixjQUFjLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEdBQUcsS0FBSzs7OztHQXBEdkQsUUFBUTs7Ozs7d0JBQ1AsQ0FBQztNQUNMLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLEVBQUUsS0FBSyw2QkFBNkI7bUJBQ3pELGFBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU87bUJBQ3JDLDZCQUE2QixHQUFHLElBQUk7O01BSXBDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsSUFDeEIsNkJBQUE7bUJBRUEsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTTttQkFDcEMsNkJBQTZCLEdBQUcsS0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01DdkloQyxPQUFRLFNBQVFDLGlCQUFRO0lBWTNDLFlBQVksSUFBbUIsRUFBRSxNQUFpQjtRQUNoRCxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUE7UUFQYixlQUFVLEdBQVcsQ0FBQyxDQUFBO1FBQ3RCLGNBQVMsR0FBRyxLQUFLLENBQUE7UUFPZixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQTtRQUMvQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFBOztRQUcxQixJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3RDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTs7O1FBSTFELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFO1lBQ3pDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtTQUNoQixDQUFDLENBQUE7S0FFSDtJQUVELElBQUk7O1FBRUYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBVyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO1NBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUN6SSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7UUFDbEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO0tBQ2hCO0lBRUQsTUFBTSxNQUFNO0tBRVg7O0lBSUQsUUFBUTs7O1FBS04sSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQTtTQUN0QjtRQUlELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQTtRQUVmLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRTtZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQzNCO2FBRUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUU7WUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxzRkFBc0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLDZEQUE2RCxDQUFDLENBQUE7U0FDN0w7YUFFSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxJQUFJLElBQUksRUFBRTtZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7U0FDL0I7YUFDSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQUU7WUFDeEUsTUFBTSxDQUFDLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFBO1NBQ3BFO2FBQ0k7WUFDSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLElBQUksQ0FBQTtZQUM3RCxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxTQUFTLEVBQUU7Z0JBQzdELE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7Z0JBQzFCLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQ3JCO1NBQ0Y7UUFDRCxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUE7UUFDZCxJQUFJLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ3RCLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQTtZQUN0RCxJQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFLENBRTFCO1lBRUQsS0FBSyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFPLEtBQzVCLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQ2hCLENBQUE7U0FDRjthQUFNO1lBRUwsSUFBSSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUE7WUFDNUIsS0FBSyxHQUFHLEVBQUUsQ0FBQTtTQUNYO1FBRUQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQztZQUNuQixNQUFNLEVBQUcsSUFBWSxDQUFDLFNBQVM7WUFDL0IsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7U0FFcEQsQ0FBQyxDQUFBO0tBQ0g7SUFFRCxPQUFPO1FBSUwsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQTtTQUV0QjtRQUVELElBQUksQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUE7UUFFeEMsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7S0FFMUI7SUFFRCxNQUFNLFdBQVc7UUFDZixJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDckIsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUE7UUFDcEQsSUFBSSxXQUFXLElBQUksSUFBSSxFQUFFO1lBQ3ZCLE9BQU07U0FDUDtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFO1lBRXBELE9BQU07U0FDUDtRQUNELElBQUksV0FBVyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUVuRSxPQUFNO1NBQ1A7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxTQUFTLEVBQUU7WUFFOUYsUUFBUSxHQUFHLElBQUksQ0FBQTtTQUNoQjtRQUNELElBQUksSUFBSSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUE7UUFHM0IsR0FBRyxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUNuRCxJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUNqRixJQUFJLEVBQUUsSUFBSSxLQUFLLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRTtnQkFFcEMsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7Z0JBQzlELElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsRUFBRTtvQkFFOUUsUUFBUSxHQUFHLElBQUksQ0FBQTtpQkFDaEI7YUFDRjtTQUdGO1FBQ0QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUE7UUFDM0IsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDM0QsSUFBSSxRQUFRLEVBQUU7WUFDWixJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtTQUNyQjtLQUNGO0lBR0QsV0FBVztRQUNULE9BQU8sYUFBYSxDQUFBO0tBQ3JCO0lBRUQsY0FBYztRQUNaLE9BQU8sZ0JBQWdCLENBQUE7S0FDeEI7SUFFRCxPQUFPO1FBQ0wsT0FBTyxnQkFBZ0IsQ0FBQTtLQUN4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NDekQ0QixHQUFXOzs7Ozs7R0FBMUIsVUFBNkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJBcUNwQixHQUFTOzs7Ozs7Ozs7OztHQUFkLFVBQW1COzs7OzRFQUFkLEdBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29DQWZDLEdBQWMsSUFBQyxNQUFNOzs7Ozs7Ozs7OztvQ0F2QnJDLEdBQVc7Ozs7a0NBQWhCLE1BQUk7Ozs7cUNBcUNLLEdBQWM7Ozs7Z0NBQW5CLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Y0FmVSw0QkFDRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyREFJZixHQUFlLE1BQUcsTUFBTSxHQUFHLE1BQU07Ozs7OztrRUFNakMsR0FBZTtLQUFHLGVBQWU7S0FBRyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7O0dBekRyRSxVQUF3Qjs7R0FFeEIsVUFpRUs7R0FoRUQsVUFRSztHQVBELFVBTUM7OztHQUVMLFVBaUNLO0dBaENELFVBQTRDOztHQUM1QyxVQVFDOzt1REFOZSxHQUF1Qjs7R0FPdkMsVUFJVzs7Ozs7O0dBQUEsVUFBSzs7R0FDaEIsVUFBSzs7R0FDTCxVQU9FO0dBQUEsVUFBSzs7R0FDUCxVQU9FO0dBQUEsVUFBTTtHQUFBLFVBQUs7O0dBRWpCLFVBb0JLOzs7O0dBbEJELFVBT0M7O0dBQ0QsVUFTSztHQUxELFVBSUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2RkFoRFEsR0FBdUI7d0RBQXZCLEdBQXVCOzs7O21DQVE1QixHQUFXOzs7O2lDQUFoQixNQUFJOzs7Ozs7Ozs7Ozs7Ozs7O3dDQUFKLE1BQUk7OztxRkF1QmlCLEdBQWMsSUFBQyxNQUFNOzswR0FJckMsR0FBZSxNQUFHLE1BQU0sR0FBRyxNQUFNOzs7OztvQ0FVN0IsR0FBYzs7OzsrQkFBbkIsTUFBSTs7Ozs7Ozs7Ozs7Ozs7OztvQ0FBSixNQUFJOzs7c0dBSkgsR0FBZTtLQUFHLGVBQWU7S0FBRyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0F0SnRELEdBQVE7T0FDUixNQUFpQjtLQUN4QixZQUFZO0tBQ1osZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUJBQWlCOzs7O0tBR3hELFdBQVcsR0FBRyxhQUFhLENBQUMsR0FBRzs7S0FFL0IsZUFBZSxHQUFHLENBQUM7S0FDbkIsY0FBYyxHQUFHLGdCQUFnQjs7Q0FDckMsT0FBTzs7RUFFSCxnQkFBZ0IsQ0FBQyxPQUFPLENBQUUsTUFBTTttQkFDNUIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxlQUFlLFFBQVEsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNO0dBQ2pFLGVBQWU7Ozs7VUFJZCxnQkFBZ0I7TUFDakIsU0FBUyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBRSxJQUFJLElBQUssSUFBSSxDQUFDLElBQUk7O1NBRXJELFNBQVMsQ0FBQyxNQUFNLENBQUUsWUFBWTtVQUMxQixnQkFBZ0IsQ0FBQyxJQUFJLENBQUUsSUFBWSxJQUN0QyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUk7Ozs7S0FLcEMsdUJBQXVCO0tBQ3ZCLGlCQUFpQjtLQUNqQixlQUFlLEdBQUcsS0FBSzs7O1VBR2xCLElBQUk7a0JBQ1QsY0FBYyxHQUFHLGdCQUFnQjtFQUNqQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxlQUFlLEVBQUUsZ0JBQWdCOzs7VUFHbEQsUUFBUTtPQUNSLHVCQUF1Qjs7Ozs7T0FJdkIsV0FBVyxDQUFDLFFBQVEsQ0FBQyx1QkFBdUI7R0FDN0MsS0FBSyxDQUFDLHNDQUFzQzs7Ozs7TUFJNUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLHVCQUF1QjttQkFDakQsaUJBQWlCLENBQUMsS0FBSyxHQUFHLEVBQUU7bUJBQzVCLHVCQUF1QixHQUFHLEVBQUU7Ozs7O01BSTVCLE1BQU0sT0FBTyxNQUFNLENBQ25CLHVCQUF1QixFQUN2Qix1QkFBdUI7O2tCQUUzQixZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsTUFBTSxNQUFNO0VBQ2hELGdCQUFnQixDQUFDLElBQUksQ0FBQyx1QkFBdUI7OztrQkFHN0MsaUJBQWlCLENBQUMsS0FBSyxHQUFHLEVBQUU7O2tCQUM1Qix1QkFBdUIsR0FBRyxFQUFFO0VBRTVCLElBQUk7U0FDRyxJQUFJOzs7VUFHTixXQUFXO01BQ1osQ0FBQyxHQUFHLENBQUM7TUFDTCxLQUFLOztNQUNMLFlBQVksQ0FBQyxhQUFhLEtBQUssQ0FBQztHQUNoQyxLQUFLLENBQUMscUNBQXFDO1VBQ3BDLElBQUk7OztTQUdSLENBQUMsR0FBRyxDQUFDO0dBQ1IsS0FBSyxHQUFHLFlBQVksQ0FBQyxhQUFhOztPQUU5QixLQUFLLElBQUksQ0FBQztJQUNWLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLO29CQUV6RCxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxJQUFJO01BRWhDLGVBQWU7VUFDZCxDQUFDLEdBQUcsQ0FBQzs7O0VBRWhCLElBQUk7U0FDRyxJQUFJOzs7Ozs7Ozs7OztHQVNJLFlBQVk7Ozs7Ozs7R0FVWixpQkFBaUI7Ozs7OztFQUNoQix1QkFBdUI7Ozs7O0VBa0IvQixRQUFROzs7O0VBUVIsV0FBVzs7OztrQkFXWCxlQUFlLElBQUksZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJDT3pCLEdBQVM7Ozs7Ozs7Ozs7O0dBQWQsVUFBbUI7Ozs7NEVBQWQsR0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQ0FmQyxHQUFjLElBQUMsTUFBTTs7Ozs7Ozs7Ozs7cUNBY2pDLEdBQWM7Ozs7Z0NBQW5CLE1BQUk7Ozs7Ozs7O2FBekRJLDRIQUVZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztjQXdDTiw0QkFDRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzJEQUlmLEdBQWUsTUFBRyxNQUFNLEdBQUcsTUFBTTs7Ozs7O2tFQU1qQyxHQUFlO0tBQUcsZUFBZTtLQUFHLGNBQWM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FyRHJFLFVBQTBCOztHQUVZLFVBQU07R0FBQSxVQUFLOztHQUVqRCxVQTJESztHQTFERCxVQVFLO0dBUEQsVUFNQzs7O0dBRUwsVUEyQks7R0ExQkQsVUFBNEM7O0dBQzVDLFVBTUM7OzBEQUplLEdBQTBCOztHQUsxQyxVQUFLOztHQUNMLFVBQUs7O0dBQ0wsVUFPRTtHQUFBLFVBQUs7O0dBQ1AsVUFPRTtHQUFBLFVBQU07R0FBQSxVQUFLOztHQUVqQixVQW9CSzs7OztHQWxCRCxVQU9DOztHQUNELFVBU0s7R0FMRCxVQUlJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7bUdBMUNRLEdBQTBCOzJEQUExQixHQUEwQjs7O3FGQXlCZixHQUFjLElBQUMsTUFBTTs7MEdBSXJDLEdBQWUsTUFBRyxNQUFNLEdBQUcsTUFBTTs7Ozs7b0NBVTdCLEdBQWM7Ozs7K0JBQW5CLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBQUosTUFBSTs7O3NHQUpILEdBQWU7S0FBRyxlQUFlO0tBQUcsY0FBYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0F0SnRELEdBQVE7T0FDUixNQUFpQjtLQUN4QixZQUFZO0tBRVosMkJBQTJCLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQ2pELDZCQUE2QjtLQUU3QixTQUFTLEdBQUcsR0FBRyxDQUFDLEtBQUEsQ0FDZixRQUFRLEdBQ1IsR0FBRyxDQUFFLElBQUksSUFBSyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUztLQUVuRCxjQUFjLEdBQUcsZ0JBQWdCOzs7O0tBS2pDLGVBQWUsR0FBRyxDQUFDOztDQUN2QixPQUFPOztFQUVILDJCQUEyQixDQUFDLE9BQU8sQ0FBRSxNQUFNO21CQUN2QyxZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsUUFBUSxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU07R0FDakUsZUFBZTs7OztVQUlkLGdCQUFnQjtTQUNkLFNBQVMsQ0FBQyxNQUFNLENBQUUsUUFBZ0I7VUFDOUIsMkJBQTJCLENBQUMsSUFBSSxDQUFFLElBQVksSUFDakQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJOzs7O0tBSzlCLDBCQUEwQjtLQUMxQixvQkFBb0I7S0FDcEIsZUFBZSxHQUFHLEtBQUs7OztVQUdsQixJQUFJO2tCQUNULGNBQWMsR0FBRyxnQkFBZ0I7RUFDakMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQ2MsMkJBQTJCOzs7VUFHdkQsUUFBUTtPQUNSLDBCQUEwQjs7Ozs7TUFJM0IsMkJBQTJCLENBQUMsUUFBUSxDQUFDLDBCQUEwQjttQkFDL0Qsb0JBQW9CLENBQUMsS0FBSyxHQUFHLEVBQUU7bUJBQy9CLDBCQUEwQixHQUFHLEVBQUU7Ozs7O01BSy9CLE1BQU0sT0FBTyxNQUFNLENBQ25CLDBCQUEwQixFQUMxQiwwQkFBMEI7O2tCQUU5QixZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsTUFBTSxNQUFNO0VBQ2hELDJCQUEyQixDQUFDLElBQUksQ0FBQywwQkFBMEI7OztrQkFHM0Qsb0JBQW9CLENBQUMsS0FBSyxHQUFHLEVBQUU7O2tCQUMvQiwwQkFBMEIsR0FBRyxFQUFFO0VBRS9CLElBQUk7U0FDRyxJQUFJOzs7VUFHTixXQUFXO01BQ1osQ0FBQyxHQUFHLENBQUM7TUFDTCxLQUFLOztNQUNMLFlBQVksQ0FBQyxhQUFhLEtBQUssQ0FBQztHQUNoQyxLQUFLLENBQUMscUNBQXFDO1VBQ3BDLElBQUk7OztTQUdSLENBQUMsR0FBRyxDQUFDO0dBQ1IsS0FBSyxHQUFHLFlBQVksQ0FBQyxhQUFhOztPQUU5QixLQUFLLElBQUksQ0FBQztJQUNWLDJCQUEyQixDQUFDLE1BQU0sQ0FDOUIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSztvQkFHckMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLElBQUksSUFBSTtNQUVoQyxlQUFlO1VBQ2QsQ0FBQyxHQUFHLENBQUM7OztFQUVoQixJQUFJO1NBQ0csSUFBSTs7Ozs7Ozs7Ozs7R0FXSSxZQUFZOzs7Ozs7O0dBVVosb0JBQW9COzs7Ozs7RUFDbkIsMEJBQTBCOzs7OztFQVlsQyxRQUFROzs7O0VBUVIsV0FBVzs7OztrQkFXWCxlQUFlLElBQUksZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQ3RGM0IsR0FBUTs7Ozs7R0FBdkIsVUFBMkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQ0FEdEIsR0FBUzs7OztnQ0FBZCxNQUFJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzthQWJ5QixzQkFDZDs7eUNBQXFCLEdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztjQWlFbkQsNkRBQzJEOzs7Y0FJM0QsZ0JBRUE7OztjQUVBLDZDQUVBOzs7Y0FBVyw0REFFWDs7O2NBQXdELFNBQ3hEOzs7Y0FBK0MsV0FDNUM7OztjQUErRCxtQkFFcEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQTFDYSxHQUFRLElBQUMsR0FBRyxDQUFDLDRCQUE0Qjs7Ozs7Ozs7OztpQ0FtQnpDLEdBQVEsSUFBQyxHQUFHLENBQUMsc0JBQXNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBOURsRCxVQXNGSztHQXJGSCxVQXlCSztHQXhCSCxVQUFpQzs7R0FDZCxVQUF3QztHQUFBLFVBQUs7O0dBQ2hFLFVBQXdDOztHQUN4QyxVQU9DOzttREFKYSxHQUFtQjs7R0FNakMsVUFHVTs7Ozs7OztHQUVWLFVBTUE7O0dBRUYsVUFBSzs7R0FDTCxVQWlCSztHQWhCSCxVQUF3Qzs7R0FDeEMsVUFFUTtHQUFBLFVBWVA7OztHQUVILFVBQUs7O0dBQ0wsVUFpQks7R0FoQkgsVUFBbUI7O0dBQ25CLFVBRVE7R0FBQSxVQVlQOzs7R0FFSCxVQUFLOzs7Ozs7R0FHTCxVQWlCRzs7R0FoQjBELFVBSTNEOztHQUVBLFVBRUE7O0dBRUEsVUFBTTtHQUFBLFVBQUs7O0dBRVgsVUFBd0Q7O0dBQ3hELFVBQStDOztHQUM1QyxVQUErRDs7Ozs7Ozs7Ozs7Ozs7OztxRkEzRXBELEdBQW1CO29EQUFuQixHQUFtQjs7OzsrQkFPeEIsR0FBUzs7OzsrQkFBZCxNQUFJOzs7Ozs7Ozs7Ozs7Ozs7O29DQUFKLE1BQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0F6REMsR0FBUTtPQUNSLE1BQWlCO0tBQ3hCLFFBQVE7S0FDUixRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVE7Ozs7O0tBTTFCLFNBQVMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUUsSUFBVyxJQUFLLElBQUksQ0FBQyxJQUFJOztDQUNuRSxHQUFHLENBQUMscUJBQXFCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTO0tBQzlDLG1CQUFtQjtLQUNuQixXQUFXLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTOztPQUVsQyxZQUFZO09BQ1gsbUJBQW1COzs7OztFQUl4QixRQUFRLENBQUMsR0FBRyxHQUFHLE9BQU8sRUFBRSxtQkFBbUI7RUFFM0MsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxHQUFHLG1CQUFtQjtNQUNqRUQsZUFBTSxDQUFDLDZCQUE2Qjs7O2tCQUd4QyxRQUFRLENBQUMsS0FBSyxHQUFHLEVBQUU7O2tCQUNuQixtQkFBbUIsR0FBRyxFQUFFOzs7S0FFdEIsZ0NBQWdDO0tBQ2hDLDZCQUE2Qjs7T0FDM0Isd0JBQXdCO0VBQzVCLFFBQVEsQ0FBQyxHQUFHO0dBQ1YsMEJBQTBCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEI7OztNQUVwRSxRQUFRLENBQUMsR0FBRyxDQUFDLDRCQUE0QjttQkFDM0MsZ0NBQWdDLENBQUMsT0FBTyxHQUFHLElBQUk7O21CQUUvQyxnQ0FBZ0MsQ0FBQyxPQUFPLEdBQUcsS0FBSzs7Ozs7Ozs7Ozs7O0dBWXJDLFFBQVE7Ozs7OztFQUNQLG1CQUFtQjs7Ozs7RUFlN0IsWUFBWTs7Ozs7R0FVSCxnQ0FBZ0M7Ozs7OztNQUlyQyxPQUFPLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEI7RUFDeEQsUUFBUSxDQUFDLEdBQUcsR0FDViwwQkFBMEIsRUFBRSxPQUFPO2tCQUVyQyxnQ0FBZ0MsQ0FBQyxPQUFPLEdBQUcsT0FBTzs7Ozs7R0FXekMsNkJBQTZCOzs7Ozs7TUFJbEMsT0FBTyxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsc0JBQXNCO0VBQ2xELFFBQVEsQ0FBQyxHQUFHLEdBQ1Ysb0JBQW9CLEVBQUUsT0FBTztrQkFFL0IsNkJBQTZCLENBQUMsT0FBTyxHQUFHLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUZoRCxNQUFNLGdCQUFnQixHQUFnQjtJQUM1QyxPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLGVBQWUsRUFBRSxFQUFFO0lBQ25CLDJCQUEyQixFQUFFLEVBQUU7SUFDL0IsZ0JBQWdCLEVBQUUsUUFBUTtJQUMxQixjQUFjLEVBQUUsUUFBUTtJQUN4QixxQkFBcUIsRUFBRSxLQUFLO0lBQzVCLDBCQUEwQixFQUFFLElBQUk7SUFDaEMsb0JBQW9CLEVBQUUsS0FBSztJQUMzQix5QkFBeUIsRUFBRSxFQUFFO0NBQzdCLENBQUE7TUFFWSxlQUFlO0lBRzNCLFlBQVksTUFBVztRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztLQUNyQjtJQUVELE1BQU0sWUFBWTtRQUNqQixJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLGdCQUFnQixFQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9HLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtLQUNuQjtJQUVELE1BQU0sWUFBWTtRQUNqQixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUMxQztJQUVELE1BQU0sR0FBRyxDQUFDLE9BQTZCO1FBQ3RDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUNyQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtLQUN6QztJQUVELEdBQUcsQ0FBOEIsT0FBVTtRQUMxQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUE7S0FDN0I7SUFFRCxzQkFBc0IsQ0FBQyxNQUFXOztRQUVqQyxJQUFJOztZQUVILElBQUksTUFBTSxJQUFJLFNBQVMsRUFBRTtnQkFDeEIsR0FBRyxDQUFDLGdEQUFnRCxDQUFDLENBQUE7Z0JBQ3JELE9BQU8sRUFBRSxDQUFBO2FBQ1Q7O1lBR0QsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsS0FBSyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO2dCQUN4RSxHQUFHLENBQUMscUNBQXFDLENBQUMsQ0FBQTtnQkFDMUMsT0FBTyxNQUFNLENBQUE7YUFDYjs7WUFHRCxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7WUFFM0MsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUNyQyxHQUFHLENBQUMsdUJBQXVCLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUE7WUFDbEQsSUFBSSxXQUFXLEdBQUcsU0FBUyxDQUFBOztZQUczQixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO2dCQUM5QyxXQUFXLEdBQUcsWUFBWSxDQUFBO2FBQzFCO2lCQUVJO2dCQUNKLFdBQVcsR0FBRyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQTthQUN4QztZQUVELEdBQUcsQ0FBQyx3QkFBd0IsR0FBRyxXQUFXLENBQUMsQ0FBQTtZQUUzQyxJQUFJLFdBQVcsS0FBSyxZQUFZLEVBQUU7O2dCQUVqQyxHQUFHLENBQUMsOENBQThDLENBQUMsQ0FBQTtnQkFFbkQsSUFBSSx1QkFBdUIsR0FBRyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFxQixLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUNoRyxJQUFJLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRTtvQkFDdEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2lCQUNwSDtxQkFBTTtvQkFDTixPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQTtpQkFDeEI7Z0JBRUQsT0FBTyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtnQkFFbEMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsUUFBUSxDQUFBO2FBRXJDO1lBR0QsSUFBSSxXQUFXLEtBQUssUUFBUSxFQUFFO2dCQUM3QixHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQTtnQkFDbkMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsUUFBUSxDQUFBO2dCQUNuQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsR0FBRyxRQUFRLENBQUE7Z0JBQ3JDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxHQUFDLElBQUksQ0FBQTthQUVwQztZQUVELElBQUksV0FBVyxLQUFLLFFBQVEsRUFBRTtnQkFDN0IsR0FBRyxDQUFDLDhCQUE4QixDQUFDLENBQUE7Z0JBQ25DLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLFFBQVEsQ0FBQTtnQkFDbkMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsUUFBUSxDQUFBO2dCQUNyQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsR0FBQyxJQUFJLENBQUE7YUFDcEM7WUFFRCxPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUMxQztRQUFDLFdBQU07WUFHUCxPQUFPLEVBQUUsQ0FBQTtTQUNUO0tBQ0Q7SUFFRCxhQUFhLENBQUMsSUFBVztRQUN4QixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFBO1FBQzVCLElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQVksS0FBSyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7UUFDMUcsSUFBSSxrQkFBa0IsRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFBO1NBQUU7UUFDdkMsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQTtRQUNuRCxJQUFJLHFCQUFxQixHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFjLEtBQUssUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO1FBQ3ZILE9BQU8scUJBQXFCLENBQUE7S0FDNUI7SUFFRCxVQUFVLENBQUMsSUFBWTtRQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztZQUFFLE9BQU8sSUFBSSxDQUFBO1FBQ2xELElBQUksZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO1FBQzVELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNqRCxPQUFPLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFBO1NBQzdCO1FBQ0QsSUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO1FBQ2xFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSwyQkFBMkIsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFBO1FBQ3ZELE9BQU8sSUFBSSxDQUFBO0tBRVg7SUFFRCxXQUFXLENBQUMsSUFBWSxFQUFFLFFBQWlCO1FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDO1lBQUUsT0FBTTtRQUU3QyxJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUE7UUFDaEIsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQTtRQUd4QixJQUFJLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDcEYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLDJCQUEyQixFQUFFLFlBQVksRUFBRSxDQUFDLENBQUE7UUFDdkQsT0FBTyxJQUFJLENBQUE7S0FFWDtDQUlEO01BR1ksYUFBYyxTQUFRRSx5QkFBZ0I7SUFLbEQsWUFBWSxNQUFpQjtRQUM1QixLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUE7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUE7S0FDckI7SUFFRCxPQUFPO1FBQ04sSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQTtTQUVyQjtRQUNELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxRQUFRLENBQUM7WUFDeEIsTUFBTSxFQUFHLElBQVksQ0FBQyxXQUFXO1lBQ2pDLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFO1NBQzdDLENBQUMsQ0FBQTtLQUNGO0lBRUQsSUFBSTtRQUNILElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFBO0tBQ3ZCOzs7TUM3TG1CLFNBQVUsU0FBUUMsZUFBTTtJQUs1QyxNQUFNLE1BQU07UUFDWCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3pDLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUNsQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLENBQUMsSUFBSSxNQUFNLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNqRixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFBO0tBQy9EO0lBRUQsTUFBTSxnQkFBZ0I7UUFDckIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUNmLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBRXBCLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLHVCQUF1QixFQUFFO1lBQ25ELE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtTQUN0QixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ2YsRUFBRSxFQUFFLHdCQUF3QjtZQUM1QixJQUFJLEVBQUUsdUJBQXVCO1lBQzdCLFFBQVEsRUFBRTtnQkFDVCxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFBO2FBRWhCO1NBQ0QsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUNmLEVBQUUsRUFBRSwyQkFBMkI7WUFDL0IsSUFBSSxFQUFFLGtDQUFrQztZQUN4QyxRQUFRLEVBQUU7Z0JBQ1QsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBOztnQkFFZixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxJQUFJLElBQUksRUFBRTtvQkFDL0MsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO2lCQUN0QztxQkFDSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQUU7b0JBQ3pFLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0RBQXNELENBQUMsQ0FBQTtpQkFDbkU7Z0JBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO29CQUNsQixJQUFJSCxlQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7b0JBQ3JCLE9BQU07aUJBQ047Z0JBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQTthQUVoQjtTQUNELENBQUMsQ0FBQztLQUNIO0lBRUQsUUFBUTtRQUNQLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUU3RDthQUFNO1lBQ04sSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQztnQkFDbEQsSUFBSSxFQUFFLGFBQWE7Z0JBQ25CLE1BQU0sRUFBRSxJQUFJO2FBQ1osQ0FBQyxDQUFBO1NBQ0Y7S0FDRDtJQUVELFFBQVE7UUFFUCxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO1NBQ3BCO0tBQ0Q7SUFFRCxRQUFRO1FBR1AsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtTQUNuQjtRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLGFBQWEsQ0FBQyxDQUFBO0tBQ3BEO0lBSUQsUUFBUTtRQUNQLElBQUksTUFBTSxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQTtRQUUxRixPQUFPLE1BQU0sQ0FBQTtLQUNiO0lBR0Qsb0JBQW9CLENBQUMsSUFBYTtRQUVqQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtLQUNoQjtJQUNELHNCQUFzQixDQUFDLElBQWE7UUFDbkMsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUE7S0FDckI7Ozs7OyJ9
